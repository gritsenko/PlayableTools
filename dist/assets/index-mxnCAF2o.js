(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}})();/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const we=e=>(i,t)=>{t!==void 0?t.addInitializer(()=>{customElements.define(e,i)}):customElements.define(e,i)};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Zi=globalThis,tn=Zi.ShadowRoot&&(Zi.ShadyCSS===void 0||Zi.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,rn=Symbol(),Rn=new WeakMap;let Za=class{constructor(i,t,n){if(this._$cssResult$=!0,n!==rn)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=i,this.t=t}get styleSheet(){let i=this.o;const t=this.t;if(tn&&i===void 0){const n=t!==void 0&&t.length===1;n&&(i=Rn.get(t)),i===void 0&&((this.o=i=new CSSStyleSheet).replaceSync(this.cssText),n&&Rn.set(t,i))}return i}toString(){return this.cssText}};const Ys=e=>new Za(typeof e=="string"?e:e+"",void 0,rn),Ha=(e,...i)=>{const t=e.length===1?e[0]:i.reduce((n,r,a)=>n+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(r)+e[a+1],e[0]);return new Za(t,e,rn)},Ks=(e,i)=>{if(tn)e.adoptedStyleSheets=i.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet);else for(const t of i){const n=document.createElement("style"),r=Zi.litNonce;r!==void 0&&n.setAttribute("nonce",r),n.textContent=t.cssText,e.appendChild(n)}},On=tn?e=>e:e=>e instanceof CSSStyleSheet?(i=>{let t="";for(const n of i.cssRules)t+=n.cssText;return Ys(t)})(e):e;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:Xs,defineProperty:Js,getOwnPropertyDescriptor:Qs,getOwnPropertyNames:eo,getOwnPropertySymbols:to,getPrototypeOf:io}=Object,rr=globalThis,Un=rr.trustedTypes,ro=Un?Un.emptyScript:"",no=rr.reactiveElementPolyfillSupport,ei=(e,i)=>e,qi={toAttribute(e,i){switch(i){case Boolean:e=e?ro:null;break;case Object:case Array:e=e==null?e:JSON.stringify(e)}return e},fromAttribute(e,i){let t=e;switch(i){case Boolean:t=e!==null;break;case Number:t=e===null?null:Number(e);break;case Object:case Array:try{t=JSON.parse(e)}catch{t=null}}return t}},nn=(e,i)=>!Xs(e,i),Dn={attribute:!0,type:String,converter:qi,reflect:!1,useDefault:!1,hasChanged:nn};Symbol.metadata??=Symbol("metadata"),rr.litPropertyMetadata??=new WeakMap;let At=class extends HTMLElement{static addInitializer(i){this._$Ei(),(this.l??=[]).push(i)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(i,t=Dn){if(t.state&&(t.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(i)&&((t=Object.create(t)).wrapped=!0),this.elementProperties.set(i,t),!t.noAccessor){const n=Symbol(),r=this.getPropertyDescriptor(i,n,t);r!==void 0&&Js(this.prototype,i,r)}}static getPropertyDescriptor(i,t,n){const{get:r,set:a}=Qs(this.prototype,i)??{get(){return this[t]},set(o){this[t]=o}};return{get:r,set(o){const l=r?.call(this);a?.call(this,o),this.requestUpdate(i,l,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(i){return this.elementProperties.get(i)??Dn}static _$Ei(){if(this.hasOwnProperty(ei("elementProperties")))return;const i=io(this);i.finalize(),i.l!==void 0&&(this.l=[...i.l]),this.elementProperties=new Map(i.elementProperties)}static finalize(){if(this.hasOwnProperty(ei("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(ei("properties"))){const t=this.properties,n=[...eo(t),...to(t)];for(const r of n)this.createProperty(r,t[r])}const i=this[Symbol.metadata];if(i!==null){const t=litPropertyMetadata.get(i);if(t!==void 0)for(const[n,r]of t)this.elementProperties.set(n,r)}this._$Eh=new Map;for(const[t,n]of this.elementProperties){const r=this._$Eu(t,n);r!==void 0&&this._$Eh.set(r,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(i){const t=[];if(Array.isArray(i)){const n=new Set(i.flat(1/0).reverse());for(const r of n)t.unshift(On(r))}else i!==void 0&&t.push(On(i));return t}static _$Eu(i,t){const n=t.attribute;return n===!1?void 0:typeof n=="string"?n:typeof i=="string"?i.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise(i=>this.enableUpdating=i),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach(i=>i(this))}addController(i){(this._$EO??=new Set).add(i),this.renderRoot!==void 0&&this.isConnected&&i.hostConnected?.()}removeController(i){this._$EO?.delete(i)}_$E_(){const i=new Map,t=this.constructor.elementProperties;for(const n of t.keys())this.hasOwnProperty(n)&&(i.set(n,this[n]),delete this[n]);i.size>0&&(this._$Ep=i)}createRenderRoot(){const i=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return Ks(i,this.constructor.elementStyles),i}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach(i=>i.hostConnected?.())}enableUpdating(i){}disconnectedCallback(){this._$EO?.forEach(i=>i.hostDisconnected?.())}attributeChangedCallback(i,t,n){this._$AK(i,n)}_$ET(i,t){const n=this.constructor.elementProperties.get(i),r=this.constructor._$Eu(i,n);if(r!==void 0&&n.reflect===!0){const a=(n.converter?.toAttribute!==void 0?n.converter:qi).toAttribute(t,n.type);this._$Em=i,a==null?this.removeAttribute(r):this.setAttribute(r,a),this._$Em=null}}_$AK(i,t){const n=this.constructor,r=n._$Eh.get(i);if(r!==void 0&&this._$Em!==r){const a=n.getPropertyOptions(r),o=typeof a.converter=="function"?{fromAttribute:a.converter}:a.converter?.fromAttribute!==void 0?a.converter:qi;this._$Em=r;const l=o.fromAttribute(t,a.type);this[r]=l??this._$Ej?.get(r)??l,this._$Em=null}}requestUpdate(i,t,n){if(i!==void 0){const r=this.constructor,a=this[i];if(n??=r.getPropertyOptions(i),!((n.hasChanged??nn)(a,t)||n.useDefault&&n.reflect&&a===this._$Ej?.get(i)&&!this.hasAttribute(r._$Eu(i,n))))return;this.C(i,t,n)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(i,t,{useDefault:n,reflect:r,wrapped:a},o){n&&!(this._$Ej??=new Map).has(i)&&(this._$Ej.set(i,o??t??this[i]),a!==!0||o!==void 0)||(this._$AL.has(i)||(this.hasUpdated||n||(t=void 0),this._$AL.set(i,t)),r===!0&&this._$Em!==i&&(this._$Eq??=new Set).add(i))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const i=this.scheduleUpdate();return i!=null&&await i,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[r,a]of this._$Ep)this[r]=a;this._$Ep=void 0}const n=this.constructor.elementProperties;if(n.size>0)for(const[r,a]of n){const{wrapped:o}=a,l=this[r];o!==!0||this._$AL.has(r)||l===void 0||this.C(r,void 0,a,l)}}let i=!1;const t=this._$AL;try{i=this.shouldUpdate(t),i?(this.willUpdate(t),this._$EO?.forEach(n=>n.hostUpdate?.()),this.update(t)):this._$EM()}catch(n){throw i=!1,this._$EM(),n}i&&this._$AE(t)}willUpdate(i){}_$AE(i){this._$EO?.forEach(t=>t.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(i)),this.updated(i)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(i){return!0}update(i){this._$Eq&&=this._$Eq.forEach(t=>this._$ET(t,this[t])),this._$EM()}updated(i){}firstUpdated(i){}};At.elementStyles=[],At.shadowRootOptions={mode:"open"},At[ei("elementProperties")]=new Map,At[ei("finalized")]=new Map,no?.({ReactiveElement:At}),(rr.reactiveElementVersions??=[]).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ao={attribute:!0,type:String,converter:qi,reflect:!1,hasChanged:nn},so=(e=ao,i,t)=>{const{kind:n,metadata:r}=t;let a=globalThis.litPropertyMetadata.get(r);if(a===void 0&&globalThis.litPropertyMetadata.set(r,a=new Map),n==="setter"&&((e=Object.create(e)).wrapped=!0),a.set(t.name,e),n==="accessor"){const{name:o}=t;return{set(l){const f=i.get.call(this);i.set.call(this,l),this.requestUpdate(o,f,e)},init(l){return l!==void 0&&this.C(o,void 0,e,l),l}}}if(n==="setter"){const{name:o}=t;return function(l){const f=this[o];i.call(this,l),this.requestUpdate(o,f,e)}}throw Error("Unsupported decorator location: "+n)};function Ge(e){return(i,t)=>typeof t=="object"?so(e,i,t):((n,r,a)=>{const o=r.hasOwnProperty(a);return r.constructor.createProperty(a,n),o?Object.getOwnPropertyDescriptor(r,a):void 0})(e,i,t)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function it(e){return Ge({...e,state:!0,attribute:!1})}var zn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function of(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var In={};/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Mn;function oo(){if(Mn)return In;Mn=1;var e;return function(i){(function(t){var n=typeof globalThis=="object"?globalThis:typeof zn=="object"?zn:typeof self=="object"?self:typeof this=="object"?this:f(),r=a(i);typeof n.Reflect<"u"&&(r=a(n.Reflect,r)),t(r,n),typeof n.Reflect>"u"&&(n.Reflect=i);function a(c,d){return function($,k){Object.defineProperty(c,$,{configurable:!0,writable:!0,value:k}),d&&d($,k)}}function o(){try{return Function("return this;")()}catch{}}function l(){try{return(0,eval)("(function() { return this; })()")}catch{}}function f(){return o()||l()}})(function(t,n){var r=Object.prototype.hasOwnProperty,a=typeof Symbol=="function",o=a&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",l=a&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",f=typeof Object.create=="function",c={__proto__:[]}instanceof Array,d=!f&&!c,$={create:f?function(){return lt(Object.create(null))}:c?function(){return lt({__proto__:null})}:function(){return lt({})},has:d?function(b,m){return r.call(b,m)}:function(b,m){return m in b},get:d?function(b,m){return r.call(b,m)?b[m]:void 0}:function(b,m){return b[m]}},k=Object.getPrototypeOf(Function),v=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:Oi(),C=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:gr(),j=typeof WeakMap=="function"?WeakMap:ot(),U=a?Symbol.for("@reflect-metadata:registry"):void 0,D=at(),V=qt(D);function z(b,m,x,T){if(H(x)){if(!Ci(b))throw new TypeError;if(!We(m))throw new TypeError;return Ne(b,m)}else{if(!Ci(b))throw new TypeError;if(!ue(m))throw new TypeError;if(!ue(T)&&!H(T)&&!ze(T))throw new TypeError;return ze(T)&&(T=void 0),x=Te(x),Oe(b,m,x,T)}}t("decorate",z);function P(b,m){function x(T,F){if(!ue(T))throw new TypeError;if(!H(F)&&!ur(F))throw new TypeError;De(b,m,T,F)}return x}t("metadata",P);function X(b,m,x,T){if(!ue(x))throw new TypeError;return H(T)||(T=Te(T)),De(b,m,x,T)}t("defineMetadata",X);function ce(b,m,x){if(!ue(m))throw new TypeError;return H(x)||(x=Te(x)),Ue(b,m,x)}t("hasMetadata",ce);function O(b,m,x){if(!ue(m))throw new TypeError;return H(x)||(x=Te(x)),le(b,m,x)}t("hasOwnMetadata",O);function te(b,m,x){if(!ue(m))throw new TypeError;return H(x)||(x=Te(x)),Mt(b,m,x)}t("getMetadata",te);function G(b,m,x){if(!ue(m))throw new TypeError;return H(x)||(x=Te(x)),Ai(b,m,x)}t("getOwnMetadata",G);function I(b,m){if(!ue(b))throw new TypeError;return H(m)||(m=Te(m)),Lt(b,m)}t("getMetadataKeys",I);function W(b,m){if(!ue(b))throw new TypeError;return H(m)||(m=Te(m)),Bt(b,m)}t("getOwnMetadataKeys",W);function $e(b,m,x){if(!ue(m))throw new TypeError;if(H(x)||(x=Te(x)),!ue(m))throw new TypeError;H(x)||(x=Te(x));var T=st(m,x,!1);return H(T)?!1:T.OrdinaryDeleteMetadata(b,m,x)}t("deleteMetadata",$e);function Ne(b,m){for(var x=b.length-1;x>=0;--x){var T=b[x],F=T(m);if(!H(F)&&!ze(F)){if(!We(F))throw new TypeError;m=F}}return m}function Oe(b,m,x,T){for(var F=b.length-1;F>=0;--F){var fe=b[F],h=fe(m,x,T);if(!H(h)&&!ze(h)){if(!ue(h))throw new TypeError;T=h}}return T}function Ue(b,m,x){var T=le(b,m,x);if(T)return!0;var F=jt(m);return ze(F)?!1:Ue(b,F,x)}function le(b,m,x){var T=st(m,x,!1);return H(T)?!1:Ce(T.OrdinaryHasOwnMetadata(b,m,x))}function Mt(b,m,x){var T=le(b,m,x);if(T)return Ai(b,m,x);var F=jt(m);if(!ze(F))return Mt(b,F,x)}function Ai(b,m,x){var T=st(m,x,!1);if(!H(T))return T.OrdinaryGetOwnMetadata(b,m,x)}function De(b,m,x,T){var F=st(x,T,!0);F.OrdinaryDefineOwnMetadata(b,m,x,T)}function Lt(b,m){var x=Bt(b,m),T=jt(b);if(T===null)return x;var F=Lt(T,m);if(F.length<=0)return x;if(x.length<=0)return F;for(var fe=new C,h=[],u=0,s=x;u<s.length;u++){var g=s[u],_=fe.has(g);_||(fe.add(g),h.push(g))}for(var p=0,A=F;p<A.length;p++){var g=A[p],_=fe.has(g);_||(fe.add(g),h.push(g))}return h}function Bt(b,m){var x=st(b,m,!1);return x?x.OrdinaryOwnMetadataKeys(b,m):[]}function Ft(b){if(b===null)return 1;switch(typeof b){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return b===null?1:6;default:return 6}}function H(b){return b===void 0}function ze(b){return b===null}function Nt(b){return typeof b=="symbol"}function ue(b){return typeof b=="object"?b!==null:typeof b=="function"}function dr(b,m){switch(Ft(b)){case 0:return b;case 1:return b;case 2:return b;case 3:return b;case 4:return b;case 5:return b}var x="string",T=Ti(b,o);if(T!==void 0){var F=T.call(b,x);if(ue(F))throw new TypeError;return F}return Ei(b)}function Ei(b,m){var x,T,F;{var fe=b.toString;if(nt(fe)){var T=fe.call(b);if(!ue(T))return T}var x=b.valueOf;if(nt(x)){var T=x.call(b);if(!ue(T))return T}}throw new TypeError}function Ce(b){return!!b}function fr(b){return""+b}function Te(b){var m=dr(b);return Nt(m)?m:fr(m)}function Ci(b){return Array.isArray?Array.isArray(b):b instanceof Object?b instanceof Array:Object.prototype.toString.call(b)==="[object Array]"}function nt(b){return typeof b=="function"}function We(b){return typeof b=="function"}function ur(b){switch(Ft(b)){case 3:return!0;case 4:return!0;default:return!1}}function Zt(b,m){return b===m||b!==b&&m!==m}function Ti(b,m){var x=b[m];if(x!=null){if(!nt(x))throw new TypeError;return x}}function xt(b){var m=Ti(b,l);if(!nt(m))throw new TypeError;var x=m.call(b);if(!ue(x))throw new TypeError;return x}function Pi(b){return b.value}function Ri(b){var m=b.next();return m.done?!1:m}function Ht(b){var m=b.return;m&&m.call(b)}function jt(b){var m=Object.getPrototypeOf(b);if(typeof b!="function"||b===k||m!==k)return m;var x=b.prototype,T=x&&Object.getPrototypeOf(x);if(T==null||T===Object.prototype)return m;var F=T.constructor;return typeof F!="function"||F===b?m:F}function pr(){var b;!H(U)&&typeof n.Reflect<"u"&&!(U in n.Reflect)&&typeof n.Reflect.defineMetadata=="function"&&(b=Vt(n.Reflect));var m,x,T,F=new j,fe={registerProvider:h,getProvider:s,setProvider:_};return fe;function h(p){if(!Object.isExtensible(fe))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case b===p:break;case H(m):m=p;break;case m===p:break;case H(x):x=p;break;case x===p:break;default:T===void 0&&(T=new C),T.add(p);break}}function u(p,A){if(!H(m)){if(m.isProviderFor(p,A))return m;if(!H(x)){if(x.isProviderFor(p,A))return m;if(!H(T))for(var S=xt(T);;){var M=Ri(S);if(!M)return;var w=Pi(M);if(w.isProviderFor(p,A))return Ht(S),w}}}if(!H(b)&&b.isProviderFor(p,A))return b}function s(p,A){var S=F.get(p),M;return H(S)||(M=S.get(A)),H(M)&&(M=u(p,A),H(M)||(H(S)&&(S=new v,F.set(p,S)),S.set(A,M))),M}function g(p){if(H(p))throw new TypeError;return m===p||x===p||!H(T)&&T.has(p)}function _(p,A,S){if(!g(S))throw new Error("Metadata provider not registered.");var M=s(p,A);if(M!==S){if(!H(M))return!1;var w=F.get(p);H(w)&&(w=new v,F.set(p,w)),w.set(A,S)}return!0}}function at(){var b;return!H(U)&&ue(n.Reflect)&&Object.isExtensible(n.Reflect)&&(b=n.Reflect[U]),H(b)&&(b=pr()),!H(U)&&ue(n.Reflect)&&Object.isExtensible(n.Reflect)&&Object.defineProperty(n.Reflect,U,{enumerable:!1,configurable:!1,writable:!1,value:b}),b}function qt(b){var m=new j,x={isProviderFor:function(g,_){var p=m.get(g);return H(p)?!1:p.has(_)},OrdinaryDefineOwnMetadata:h,OrdinaryHasOwnMetadata:F,OrdinaryGetOwnMetadata:fe,OrdinaryOwnMetadataKeys:u,OrdinaryDeleteMetadata:s};return D.registerProvider(x),x;function T(g,_,p){var A=m.get(g),S=!1;if(H(A)){if(!p)return;A=new v,m.set(g,A),S=!0}var M=A.get(_);if(H(M)){if(!p)return;if(M=new v,A.set(_,M),!b.setProvider(g,_,x))throw A.delete(_),S&&m.delete(g),new Error("Wrong provider for target.")}return M}function F(g,_,p){var A=T(_,p,!1);return H(A)?!1:Ce(A.has(g))}function fe(g,_,p){var A=T(_,p,!1);if(!H(A))return A.get(g)}function h(g,_,p,A){var S=T(p,A,!0);S.set(g,_)}function u(g,_){var p=[],A=T(g,_,!1);if(H(A))return p;for(var S=A.keys(),M=xt(S),w=0;;){var y=Ri(M);if(!y)return p.length=w,p;var be=Pi(y);try{p[w]=be}catch(Z){try{Ht(M)}finally{throw Z}}w++}}function s(g,_,p){var A=T(_,p,!1);if(H(A)||!A.delete(g))return!1;if(A.size===0){var S=m.get(_);H(S)||(S.delete(p),S.size===0&&m.delete(S))}return!0}}function Vt(b){var m=b.defineMetadata,x=b.hasOwnMetadata,T=b.getOwnMetadata,F=b.getOwnMetadataKeys,fe=b.deleteMetadata,h=new j,u={isProviderFor:function(s,g){var _=h.get(s);return!H(_)&&_.has(g)?!0:F(s,g).length?(H(_)&&(_=new C,h.set(s,_)),_.add(g),!0):!1},OrdinaryDefineOwnMetadata:m,OrdinaryHasOwnMetadata:x,OrdinaryGetOwnMetadata:T,OrdinaryOwnMetadataKeys:F,OrdinaryDeleteMetadata:fe};return u}function st(b,m,x){var T=D.getProvider(b,m);if(!H(T))return T;if(x){if(D.setProvider(b,m,V))return V;throw new Error("Illegal state.")}}function Oi(){var b={},m=[],x=function(){function u(s,g,_){this._index=0,this._keys=s,this._values=g,this._selector=_}return u.prototype["@@iterator"]=function(){return this},u.prototype[l]=function(){return this},u.prototype.next=function(){var s=this._index;if(s>=0&&s<this._keys.length){var g=this._selector(this._keys[s],this._values[s]);return s+1>=this._keys.length?(this._index=-1,this._keys=m,this._values=m):this._index++,{value:g,done:!1}}return{value:void 0,done:!0}},u.prototype.throw=function(s){throw this._index>=0&&(this._index=-1,this._keys=m,this._values=m),s},u.prototype.return=function(s){return this._index>=0&&(this._index=-1,this._keys=m,this._values=m),{value:s,done:!0}},u}(),T=function(){function u(){this._keys=[],this._values=[],this._cacheKey=b,this._cacheIndex=-2}return Object.defineProperty(u.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),u.prototype.has=function(s){return this._find(s,!1)>=0},u.prototype.get=function(s){var g=this._find(s,!1);return g>=0?this._values[g]:void 0},u.prototype.set=function(s,g){var _=this._find(s,!0);return this._values[_]=g,this},u.prototype.delete=function(s){var g=this._find(s,!1);if(g>=0){for(var _=this._keys.length,p=g+1;p<_;p++)this._keys[p-1]=this._keys[p],this._values[p-1]=this._values[p];return this._keys.length--,this._values.length--,Zt(s,this._cacheKey)&&(this._cacheKey=b,this._cacheIndex=-2),!0}return!1},u.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=b,this._cacheIndex=-2},u.prototype.keys=function(){return new x(this._keys,this._values,F)},u.prototype.values=function(){return new x(this._keys,this._values,fe)},u.prototype.entries=function(){return new x(this._keys,this._values,h)},u.prototype["@@iterator"]=function(){return this.entries()},u.prototype[l]=function(){return this.entries()},u.prototype._find=function(s,g){if(!Zt(this._cacheKey,s)){this._cacheIndex=-1;for(var _=0;_<this._keys.length;_++)if(Zt(this._keys[_],s)){this._cacheIndex=_;break}}return this._cacheIndex<0&&g&&(this._cacheIndex=this._keys.length,this._keys.push(s),this._values.push(void 0)),this._cacheIndex},u}();return T;function F(u,s){return u}function fe(u,s){return s}function h(u,s){return[u,s]}}function gr(){var b=function(){function m(){this._map=new v}return Object.defineProperty(m.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),m.prototype.has=function(x){return this._map.has(x)},m.prototype.add=function(x){return this._map.set(x,x),this},m.prototype.delete=function(x){return this._map.delete(x)},m.prototype.clear=function(){this._map.clear()},m.prototype.keys=function(){return this._map.keys()},m.prototype.values=function(){return this._map.keys()},m.prototype.entries=function(){return this._map.entries()},m.prototype["@@iterator"]=function(){return this.keys()},m.prototype[l]=function(){return this.keys()},m}();return b}function ot(){var b=16,m=$.create(),x=T();return function(){function s(){this._key=T()}return s.prototype.has=function(g){var _=F(g,!1);return _!==void 0?$.has(_,this._key):!1},s.prototype.get=function(g){var _=F(g,!1);return _!==void 0?$.get(_,this._key):void 0},s.prototype.set=function(g,_){var p=F(g,!0);return p[this._key]=_,this},s.prototype.delete=function(g){var _=F(g,!1);return _!==void 0?delete _[this._key]:!1},s.prototype.clear=function(){this._key=T()},s}();function T(){var s;do s="@@WeakMap@@"+u();while($.has(m,s));return m[s]=!0,s}function F(s,g){if(!r.call(s,x)){if(!g)return;Object.defineProperty(s,x,{value:$.create()})}return s[x]}function fe(s,g){for(var _=0;_<g;++_)s[_]=Math.random()*255|0;return s}function h(s){if(typeof Uint8Array=="function"){var g=new Uint8Array(s);return typeof crypto<"u"?crypto.getRandomValues(g):typeof msCrypto<"u"?msCrypto.getRandomValues(g):fe(g,s),g}return fe(new Array(s),s)}function u(){var s=h(b);s[6]=s[6]&79|64,s[8]=s[8]&191|128;for(var g="",_=0;_<b;++_){var p=s[_];(_===4||_===6||_===8)&&(g+="-"),p<16&&(g+="0"),g+=p.toString(16).toLowerCase()}return g}}function lt(b){return b.__=void 0,delete b.__,b}})}(e||(e={})),In}oo();const Et={Singleton:0,Transient:2};class ht{constructor(){this.services=new Map,this.singletonInstances=new Map,this.tokenRegistry=new Map}static getInstance(){return ht.instance||(ht.instance=new ht),ht.instance}addService(i,t,n){this.services.set(i,{token:i,implementation:t,lifetime:n}),n===Et.Singleton&&(this.singletonInstances.has(i)||this.singletonInstances.set(i,new t))}getOrCreateToken(i){const t=i.name;return this.tokenRegistry.has(t)||this.tokenRegistry.set(t,Symbol(t)),this.tokenRegistry.get(t)}getService(i){const t=this.services.get(i);if(!t)throw new Error(`Service not registered for token: ${i.toString()}`);switch(t.lifetime){case Et.Singleton:return this.getSingletonInstance(t);case Et.Transient:return new t.implementation;default:throw new Error(`Unsupported lifetime: ${t.lifetime}`)}}getSingletonInstance(i){return this.singletonInstances.has(i.token)||this.singletonInstances.set(i.token,new i.implementation),this.singletonInstances.get(i.token)}}function nr(e=Et.Singleton){return function(i){const t=ht.getInstance(),n=t.getOrCreateToken(i);return t.addService(n,i,e),i}}function _i(e){return function(i,t){const n=e||Reflect.getMetadata("design:type",i,t);if(!n)throw new Error(`Cannot resolve type for property '${t}'. Make sure emitDecoratorMetadata is enabled.`);const r=ht.getInstance(),a=r.getOrCreateToken(n);Object.defineProperty(i,t,{get:function(){return r.getService(a)},enumerable:!0,configurable:!0})}}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const an=globalThis,Vi=an.trustedTypes,Ln=Vi?Vi.createPolicy("lit-html",{createHTML:e=>e}):void 0,ja="$lit$",Ye=`lit$${Math.random().toFixed(9).slice(2)}$`,qa="?"+Ye,lo=`<${qa}>`,gt=document,ai=()=>gt.createComment(""),si=e=>e===null||typeof e!="object"&&typeof e!="function",sn=Array.isArray,co=e=>sn(e)||typeof e?.[Symbol.iterator]=="function",br=`[ 	
\f\r]`,Wt=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Bn=/-->/g,Fn=/>/g,ct=RegExp(`>|${br}(?:([^\\s"'>=/]+)(${br}*=${br}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Nn=/'/g,Zn=/"/g,Va=/^(?:script|style|textarea|title)$/i,ho=e=>(i,...t)=>({_$litType$:e,strings:i,values:t}),B=ho(1),bt=Symbol.for("lit-noChange"),pe=Symbol.for("lit-nothing"),Hn=new WeakMap,dt=gt.createTreeWalker(gt,129);function Ga(e,i){if(!sn(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return Ln!==void 0?Ln.createHTML(i):i}const fo=(e,i)=>{const t=e.length-1,n=[];let r,a=i===2?"<svg>":i===3?"<math>":"",o=Wt;for(let l=0;l<t;l++){const f=e[l];let c,d,$=-1,k=0;for(;k<f.length&&(o.lastIndex=k,d=o.exec(f),d!==null);)k=o.lastIndex,o===Wt?d[1]==="!--"?o=Bn:d[1]!==void 0?o=Fn:d[2]!==void 0?(Va.test(d[2])&&(r=RegExp("</"+d[2],"g")),o=ct):d[3]!==void 0&&(o=ct):o===ct?d[0]===">"?(o=r??Wt,$=-1):d[1]===void 0?$=-2:($=o.lastIndex-d[2].length,c=d[1],o=d[3]===void 0?ct:d[3]==='"'?Zn:Nn):o===Zn||o===Nn?o=ct:o===Bn||o===Fn?o=Wt:(o=ct,r=void 0);const v=o===ct&&e[l+1].startsWith("/>")?" ":"";a+=o===Wt?f+lo:$>=0?(n.push(c),f.slice(0,$)+ja+f.slice($)+Ye+v):f+Ye+($===-2?l:v)}return[Ga(e,a+(e[t]||"<?>")+(i===2?"</svg>":i===3?"</math>":"")),n]};let Or=class Wa{constructor({strings:i,_$litType$:t},n){let r;this.parts=[];let a=0,o=0;const l=i.length-1,f=this.parts,[c,d]=fo(i,t);if(this.el=Wa.createElement(c,n),dt.currentNode=this.el.content,t===2||t===3){const $=this.el.content.firstChild;$.replaceWith(...$.childNodes)}for(;(r=dt.nextNode())!==null&&f.length<l;){if(r.nodeType===1){if(r.hasAttributes())for(const $ of r.getAttributeNames())if($.endsWith(ja)){const k=d[o++],v=r.getAttribute($).split(Ye),C=/([.?@])?(.*)/.exec(k);f.push({type:1,index:a,name:C[2],strings:v,ctor:C[1]==="."?po:C[1]==="?"?go:C[1]==="@"?bo:ar}),r.removeAttribute($)}else $.startsWith(Ye)&&(f.push({type:6,index:a}),r.removeAttribute($));if(Va.test(r.tagName)){const $=r.textContent.split(Ye),k=$.length-1;if(k>0){r.textContent=Vi?Vi.emptyScript:"";for(let v=0;v<k;v++)r.append($[v],ai()),dt.nextNode(),f.push({type:2,index:++a});r.append($[k],ai())}}}else if(r.nodeType===8)if(r.data===qa)f.push({type:2,index:a});else{let $=-1;for(;($=r.data.indexOf(Ye,$+1))!==-1;)f.push({type:7,index:a}),$+=Ye.length-1}a++}}static createElement(i,t){const n=gt.createElement("template");return n.innerHTML=i,n}};function Pt(e,i,t=e,n){if(i===bt)return i;let r=n!==void 0?t._$Co?.[n]:t._$Cl;const a=si(i)?void 0:i._$litDirective$;return r?.constructor!==a&&(r?._$AO?.(!1),a===void 0?r=void 0:(r=new a(e),r._$AT(e,t,n)),n!==void 0?(t._$Co??=[])[n]=r:t._$Cl=r),r!==void 0&&(i=Pt(e,r._$AS(e,i.values),r,n)),i}let uo=class{constructor(i,t){this._$AV=[],this._$AN=void 0,this._$AD=i,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(i){const{el:{content:t},parts:n}=this._$AD,r=(i?.creationScope??gt).importNode(t,!0);dt.currentNode=r;let a=dt.nextNode(),o=0,l=0,f=n[0];for(;f!==void 0;){if(o===f.index){let c;f.type===2?c=new on(a,a.nextSibling,this,i):f.type===1?c=new f.ctor(a,f.name,f.strings,this,i):f.type===6&&(c=new _o(a,this,i)),this._$AV.push(c),f=n[++l]}o!==f?.index&&(a=dt.nextNode(),o++)}return dt.currentNode=gt,r}p(i){let t=0;for(const n of this._$AV)n!==void 0&&(n.strings!==void 0?(n._$AI(i,n,t),t+=n.strings.length-2):n._$AI(i[t])),t++}},on=class Ya{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(i,t,n,r){this.type=2,this._$AH=pe,this._$AN=void 0,this._$AA=i,this._$AB=t,this._$AM=n,this.options=r,this._$Cv=r?.isConnected??!0}get parentNode(){let i=this._$AA.parentNode;const t=this._$AM;return t!==void 0&&i?.nodeType===11&&(i=t.parentNode),i}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(i,t=this){i=Pt(this,i,t),si(i)?i===pe||i==null||i===""?(this._$AH!==pe&&this._$AR(),this._$AH=pe):i!==this._$AH&&i!==bt&&this._(i):i._$litType$!==void 0?this.$(i):i.nodeType!==void 0?this.T(i):co(i)?this.k(i):this._(i)}O(i){return this._$AA.parentNode.insertBefore(i,this._$AB)}T(i){this._$AH!==i&&(this._$AR(),this._$AH=this.O(i))}_(i){this._$AH!==pe&&si(this._$AH)?this._$AA.nextSibling.data=i:this.T(gt.createTextNode(i)),this._$AH=i}$(i){const{values:t,_$litType$:n}=i,r=typeof n=="number"?this._$AC(i):(n.el===void 0&&(n.el=Or.createElement(Ga(n.h,n.h[0]),this.options)),n);if(this._$AH?._$AD===r)this._$AH.p(t);else{const a=new uo(r,this),o=a.u(this.options);a.p(t),this.T(o),this._$AH=a}}_$AC(i){let t=Hn.get(i.strings);return t===void 0&&Hn.set(i.strings,t=new Or(i)),t}k(i){sn(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let n,r=0;for(const a of i)r===t.length?t.push(n=new Ya(this.O(ai()),this.O(ai()),this,this.options)):n=t[r],n._$AI(a),r++;r<t.length&&(this._$AR(n&&n._$AB.nextSibling,r),t.length=r)}_$AR(i=this._$AA.nextSibling,t){for(this._$AP?.(!1,!0,t);i!==this._$AB;){const n=i.nextSibling;i.remove(),i=n}}setConnected(i){this._$AM===void 0&&(this._$Cv=i,this._$AP?.(i))}},ar=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(i,t,n,r,a){this.type=1,this._$AH=pe,this._$AN=void 0,this.element=i,this.name=t,this._$AM=r,this.options=a,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=pe}_$AI(i,t=this,n,r){const a=this.strings;let o=!1;if(a===void 0)i=Pt(this,i,t,0),o=!si(i)||i!==this._$AH&&i!==bt,o&&(this._$AH=i);else{const l=i;let f,c;for(i=a[0],f=0;f<a.length-1;f++)c=Pt(this,l[n+f],t,f),c===bt&&(c=this._$AH[f]),o||=!si(c)||c!==this._$AH[f],c===pe?i=pe:i!==pe&&(i+=(c??"")+a[f+1]),this._$AH[f]=c}o&&!r&&this.j(i)}j(i){i===pe?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,i??"")}},po=class extends ar{constructor(){super(...arguments),this.type=3}j(i){this.element[this.name]=i===pe?void 0:i}},go=class extends ar{constructor(){super(...arguments),this.type=4}j(i){this.element.toggleAttribute(this.name,!!i&&i!==pe)}},bo=class extends ar{constructor(i,t,n,r,a){super(i,t,n,r,a),this.type=5}_$AI(i,t=this){if((i=Pt(this,i,t,0)??pe)===bt)return;const n=this._$AH,r=i===pe&&n!==pe||i.capture!==n.capture||i.once!==n.once||i.passive!==n.passive,a=i!==pe&&(n===pe||r);r&&this.element.removeEventListener(this.name,this,n),a&&this.element.addEventListener(this.name,this,i),this._$AH=i}handleEvent(i){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,i):this._$AH.handleEvent(i)}},_o=class{constructor(i,t,n){this.element=i,this.type=6,this._$AN=void 0,this._$AM=t,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(i){Pt(this,i)}};const mo=an.litHtmlPolyfillSupport;mo?.(Or,on),(an.litHtmlVersions??=[]).push("3.3.1");const wo=(e,i,t)=>{const n=t?.renderBefore??i;let r=n._$litPart$;if(r===void 0){const a=t?.renderBefore??null;n._$litPart$=r=new on(i.insertBefore(ai(),a),a,void 0,t??{})}return r._$AI(e),r};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ln=globalThis;let Ct=class extends At{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const i=super.createRenderRoot();return this.renderOptions.renderBefore??=i.firstChild,i}update(i){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(i),this._$Do=wo(t,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return bt}};Ct._$litElement$=!0,Ct.finalized=!0,ln.litElementHydrateSupport?.({LitElement:Ct});const vo=ln.litElementPolyfillSupport;vo?.({LitElement:Ct});(ln.litElementVersions??=[]).push("4.2.1");class yo{update(i){i.title&&(document.title=i.title);let t=document.querySelector('meta[name="description"]');t||(t=document.createElement("meta"),t.setAttribute("name","description"),document.head.appendChild(t)),t.setAttribute("content",i.description||"")}}const _r=new yo;var ko=Object.defineProperty,xo=Object.getOwnPropertyDescriptor,cn=(e,i,t,n)=>{for(var r=n>1?void 0:n?xo(i,t):i,a=e.length-1,o;a>=0;a--)(o=e[a])&&(r=(n?o(i,t,r):o(r))||r);return n&&r&&ko(i,t,r),r};let Gi=class extends Ct{constructor(){super(...arguments),this.currentPath="",this.handleNavigation=()=>{const e=window.location.hash;let i=e?e.substring(1):"";const[t]=i.split("?");let n=t;n.startsWith("/")||(n="/"+n),this.currentPath=n,this.requestUpdate()}}connectedCallback(){super.connectedCallback(),window.addEventListener("hashchange",this.handleNavigation),this.handleNavigation()}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("hashchange",this.handleNavigation)}createRenderRoot(){return this}render(){for(const[e,i]of Ka.entries()){const t=new RegExp("^"+e.replace(/:[^\s/]+/g,"([\\w-]+)")+"$"),n=this.currentPath.match(t);if(n){i.metadata?_r.update(i.metadata):_r.update({title:"PlayableTools"});const r=n.slice(1),a=new i.component;return a.routeParams=r,this.renderContentWithLayout(()=>B`<div>${a}</div>`)}}return _r.update({title:"Page Not Found"}),this.renderContentWithLayout(()=>B`<h1>404 Not Found</h1>`)}renderContentWithLayout(e){if(!this.defaultLayout)return e();const i=new this.defaultLayout;return i.body=e(),B`
            <div>${i}</div>
        `}};cn([Ge({attribute:!1})],Gi.prototype,"defaultLayout",2);cn([it()],Gi.prototype,"currentPath",2);Gi=cn([we("router-outlet")],Gi);const Ka=new Map;function rt(e,i){return function(t){return Ka.set(e,{component:t,metadata:i}),t}}function So(e){return function(i,t){Object.defineProperty(i,t,{get:function(){const r=window.location.hash;if(r){const a=r.indexOf("?");if(a!==-1){const o=r.substring(a+1);return new URLSearchParams(o).get(e)}}return null},enumerable:!0,configurable:!0})}}const Pn=class Pn extends Ct{createRenderRoot(){return this.constructor.useShadowDom?super.createRenderRoot():this}};Pn.useShadowDom=!1;let ge=Pn;class $o extends ge{}var Ao=Object.defineProperty,Eo=Object.getOwnPropertyDescriptor,mi=(e,i,t,n)=>{for(var r=n>1?void 0:n?Eo(i,t):i,a=e.length-1,o;a>=0;a--)(o=e[a])&&(r=(n?o(i,t,r):o(r))||r);return n&&r&&Ao(i,t,r),r};let Rt=class extends ge{constructor(){super(...arguments),this.open=!1,this.src="",this.alt="",this.thumbWidth="500px",this.openPopup=()=>{this.open=!0,this.requestUpdate()},this.closePopup=()=>{this.open=!1,this.requestUpdate()}}render(){return B`
      <img
        src="${this.src}"
        alt="${this.alt}"
        style="max-width: ${this.thumbWidth}; display: block; margin: 1em auto; border: 1px solid #ccc; border-radius: 8px; cursor: zoom-in;"
        @click=${this.openPopup}
      />
      ${this.open?B`
        <div
          style="position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.8);display:flex;align-items:center;justify-content:center;z-index:10000;"
          @click=${this.closePopup}
        >
          <img
            src="${this.src}"
            alt="${this.alt} full size"
            style="max-width:90vw;max-height:90vh;box-shadow:0 0 32px #000;border-radius:12px;"
            @click=${e=>e.stopPropagation()}
          />
          <button
            style="position:absolute;top:32px;right:48px;font-size:2rem;background:rgba(0,0,0,0.5);color:#fff;border:none;border-radius:50%;width:48px;height:48px;cursor:pointer;"
            @click=${this.closePopup}
            aria-label="Close preview"
          >×</button>
        </div>
      `:""}
    `}};mi([Ge({type:Boolean})],Rt.prototype,"open",2);mi([Ge({type:String})],Rt.prototype,"src",2);mi([Ge({type:String})],Rt.prototype,"alt",2);mi([Ge({type:String})],Rt.prototype,"thumbWidth",2);Rt=mi([we("image-popup")],Rt);var Co=Object.defineProperty,To=Object.getOwnPropertyDescriptor,Xa=(e,i,t,n)=>{for(var r=n>1?void 0:n?To(i,t):i,a=e.length-1,o;a>=0;a--)(o=e[a])&&(r=(n?o(i,t,r):o(r))||r);return n&&r&&Co(i,t,r),r};let oi=class extends ge{constructor(){super(...arguments),this.visible=!1}show(){this.visible=!0}hide(){this.visible=!1}handleReload(){this.dispatchEvent(new CustomEvent("reload-requested",{bubbles:!0,composed:!0}))}render(){return B`
      <div class="notification ${this.visible?"visible":""}">
        <div class="notification-content">
          <svg class="icon" viewBox="0 0 24 24">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
          </svg>
          <div class="notification-message">
            A new version is available with latest features and improvements
          </div>
          <button class="reload-btn" @click=${this.handleReload}>
            <svg class="reload-icon" viewBox="0 0 24 24">
              <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>
            </svg>
            Reload App
          </button>
        </div>
      </div>
    `}};oi.useShadowDom=!0;oi.styles=Ha`
    :host {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 10000;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }

    .notification {
      background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
      color: white;
      padding: 12px 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 16px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      transform: translateY(-100%);
      transition: transform 0.3s ease-in-out;
    }

    .notification.visible {
      transform: translateY(0);
    }

    .notification-content {
      display: flex;
      align-items: center;
      gap: 12px;
      flex: 1;
      justify-content: center;
      max-width: 600px;
    }

    .notification-message {
      margin: 0;
      font-size: 14px;
      font-weight: 500;
    }

    .reload-btn {
      background: white;
      color: #3b82f6;
      border: none;
      padding: 8px 16px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 13px;
      font-weight: 600;
      transition: all 0.2s;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .reload-btn:hover {
      background: #f8fafc;
      transform: translateY(-1px);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    }

    .icon {
      width: 18px;
      height: 18px;
      fill: currentColor;
    }

    .reload-icon {
      width: 14px;
      height: 14px;
      fill: currentColor;
    }

    @media (max-width: 768px) {
      .notification {
        padding: 10px 16px;
        text-align: center;
      }
      
      .notification-content {
        flex-direction: column;
        gap: 8px;
      }
      
      .notification-message {
        font-size: 13px;
      }
      
      .reload-btn {
        padding: 6px 12px;
        font-size: 12px;
      }
    }
  `;Xa([it()],oi.prototype,"visible",2);oi=Xa([we("update-notification")],oi);class hn{constructor(i=60*60*1e3,t="./version.json"){this.currentVersion=null,this.checkInterval=null,this.listeners=[],this.isPWA=!1,this.checkIntervalMs=i,this.versionEndpoint=t,this.detectPWAMode()}detectPWAMode(){this.isPWA=window.matchMedia("(display-mode: standalone)").matches||window.matchMedia("(display-mode: fullscreen)").matches||window.navigator.standalone===!0||document.referrer.includes("android-app://"),this.isPWA&&console.log("VersionService: Running in PWA mode")}async initialize(){try{this.currentVersion=await this.fetchVersionInfo(),console.log(`🚀 PlayableTools v${this.currentVersion.version}`),console.log(`📦 Build: ${this.currentVersion.buildTime}`),console.log(`🔖 Hash: ${this.currentVersion.hash}`),this.isPWA&&console.log("📱 Running in PWA mode"),this.startPeriodicCheck()}catch(i){console.warn("Failed to initialize version service:",i),this.currentVersion={version:"1.0.1",buildTime:new Date().toISOString(),hash:"unknown"},console.log(`🚀 PlayableTools v${this.currentVersion.version} (fallback)`),console.log("⚠️ Could not fetch version from server")}}startPeriodicCheck(){this.checkInterval&&clearInterval(this.checkInterval),this.checkInterval=window.setInterval(async()=>{await this.checkForUpdates()},this.checkIntervalMs)}stopPeriodicCheck(){this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null)}async checkForUpdates(){try{const i=await this.fetchVersionInfo();return this.currentVersion&&this.hasNewVersion(this.currentVersion,i)?(console.log("🆕 Update available!"),console.log(`📍 Current: v${this.currentVersion.version} (${this.currentVersion.hash})`),console.log(`🎯 Latest: v${i.version} (${i.hash})`),this.notifyListeners(!0),!0):(console.log("✅ App is up to date"),!1)}catch(i){return console.warn("Failed to check for updates:",i),!1}}async testCacheBusting(){console.log("🧪 Testing cache busting...");try{const i=[];for(let a=0;a<3;a++)i.push(this.fetchVersionInfo()),await new Promise(o=>setTimeout(o,100));const t=await Promise.all(i);console.log("🧪 Cache busting test results:"),t.forEach((a,o)=>{console.log(`Request ${o+1}:`,a)});const n=t.map(a=>a.buildTime);new Set(n).size===1?console.log("✅ Cache busting working correctly - all requests returned same data"):console.log("⚠️ Inconsistent responses - possible caching issues")}catch(i){console.error("🧪 Cache busting test failed:",i)}}async fetchVersionInfo(){if("serviceWorker"in navigator&&navigator.serviceWorker.controller)try{const i=await this.fetchVersionViaServiceWorker();if(i)return i}catch(i){console.warn("Failed to fetch version via service worker, falling back to direct fetch:",i)}return this.fetchVersionDirect()}async fetchVersionViaServiceWorker(){return new Promise((i,t)=>{if(!navigator.serviceWorker.controller){t(new Error("No service worker controller"));return}const n=new MessageChannel;n.port1.onmessage=r=>{const{type:a,data:o,error:l}=r.data;a==="VERSION_INFO"?i(o):a==="VERSION_ERROR"&&t(new Error(l))},navigator.serviceWorker.controller.postMessage({type:"CHECK_VERSION"},[n.port2]),setTimeout(()=>{t(new Error("Service worker version check timeout"))},5e3)})}async fetchVersionDirect(){let i=this.versionEndpoint;window.location.origin==="https://gritsenko.biz"&&window.location.pathname.startsWith("/PlayableTools/")&&(i="/PlayableTools/version.json");const t=`?t=${Date.now()}&r=${Math.random().toString(36).substring(2)}`,n=i+t;console.log(`📡 Fetching version from: ${n}`);const r=await fetch(n,{method:"GET",headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0","If-Modified-Since":"0","If-None-Match":"*"},cache:"no-store"});if(!r.ok)throw new Error(`Failed to fetch version info from ${n}: ${r.status}`);const a=await r.json();return console.log("📡 Version info fetched from server:",a),console.log("🔍 Response headers cache-control:",r.headers.get("cache-control")),a}hasNewVersion(i,t){return i.hash!==t.hash||i.buildTime!==t.buildTime?!0:i.version!==t.version}onUpdateAvailable(i){return this.listeners.push(i),()=>{const t=this.listeners.indexOf(i);t>-1&&this.listeners.splice(t,1)}}notifyListeners(i){this.listeners.forEach(t=>{try{t(i)}catch(n){console.error("Error in update listener:",n)}})}async reloadWithCacheClear(){try{await this.clearAllCaches(),await this.updateServiceWorker(),window.location.reload()}catch(i){console.error("Failed to clear caches:",i),window.location.reload()}}async updateServiceWorker(){if("serviceWorker"in navigator)try{const i=await navigator.serviceWorker.getRegistrations();for(const t of i)await t.update(),t.waiting&&t.waiting.postMessage({type:"SKIP_WAITING"})}catch(i){console.warn("Failed to update service worker:",i)}}async clearAllCaches(){const i=[];if("caches"in window&&i.push(caches.keys().then(t=>Promise.all(t.map(n=>(console.log(`Clearing cache: ${n}`),caches.delete(n)))))),"serviceWorker"in navigator&&navigator.serviceWorker.controller)try{navigator.serviceWorker.controller.postMessage({type:"CLEAR_CACHE"})}catch(t){console.warn("Failed to send clear cache message to service worker:",t)}try{localStorage.clear(),sessionStorage.clear()}catch(t){console.warn("Failed to clear storage:",t)}await Promise.all(i)}getCurrentVersion(){return this.currentVersion}isPWAMode(){return this.isPWA}destroy(){this.stopPeriodicCheck(),this.listeners=[]}}var Po=Object.defineProperty,Ro=Object.getOwnPropertyDescriptor,wi=(e,i,t,n)=>{for(var r=n>1?void 0:n?Ro(i,t):i,a=e.length-1,o;a>=0;a--)(o=e[a])&&(r=(n?o(i,t,r):o(r))||r);return n&&r&&Po(i,t,r),r};let tt=class extends ge{constructor(){super(...arguments),this.versionService=new hn,this.isChecking=!1}async connectedCallback(){super.connectedCallback(),await this.loadCurrentVersion()}async loadCurrentVersion(){try{await this.versionService.initialize();const e=this.versionService.getCurrentVersion();this.currentVersion=e?.version||"unknown",this.isPWA=this.versionService.isPWAMode()}catch(e){console.warn("Failed to load current version:",e)}}async handleCheckVersion(){this.isChecking=!0;try{const e=await this.versionService.checkForUpdates();this.lastCheckTime=new Date,e&&this.dispatchEvent(new CustomEvent("update-available",{bubbles:!0,composed:!0,detail:{hasUpdate:!0}}))}catch(e){console.error("Failed to check for updates:",e)}finally{this.isChecking=!1}}async handleForceReload(){try{await this.versionService.reloadWithCacheClear()}catch(e){console.error("Failed to reload:",e),window.location.reload()}}render(){const e=i=>i.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return B`
      <div class="version-checker">
        <div class="version-info">
          v${this.currentVersion||"?"}${this.isPWA?" (PWA)":""}
        </div>
        
        <button 
          class="check-btn" 
          @click=${this.handleCheckVersion}
          ?disabled=${this.isChecking}
          title="Check for updates"
        >
          ${this.isChecking?"...":"↻"}
        </button>

        <button 
          class="check-btn" 
          @click=${this.handleForceReload}
          title="Force reload with cache clear"
        >
          ⟳
        </button>

        ${this.lastCheckTime?B`
          <div class="status">
            Last check: ${e(this.lastCheckTime)}
          </div>
        `:""}
      </div>
    `}};tt.useShadowDom=!0;tt.styles=Ha`
    :host {
      display: inline-block;
    }

    .version-checker {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      background: #f8fafc;
      border: 1px solid #e2e8f0;
      border-radius: 6px;
      font-size: 12px;
      color: #64748b;
    }

    .check-btn {
      background: #3b82f6;
      color: white;
      border: none;
      padding: 4px 8px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 11px;
      font-weight: 500;
      transition: background-color 0.2s;
    }

    .check-btn:hover:not(:disabled) {
      background: #2563eb;
    }

    .check-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    .version-info {
      font-family: monospace;
      font-size: 11px;
    }

    .status {
      font-weight: 500;
    }

    .status.checking {
      color: #f59e0b;
    }

    .status.up-to-date {
      color: #059669;
    }

    .status.update-available {
      color: #dc2626;
    }
  `;wi([it()],tt.prototype,"isChecking",2);wi([it()],tt.prototype,"lastCheckTime",2);wi([it()],tt.prototype,"currentVersion",2);wi([it()],tt.prototype,"isPWA",2);tt=wi([we("version-checker")],tt);var Oo=Object.getOwnPropertyDescriptor,Uo=(e,i,t,n)=>{for(var r=n>1?void 0:n?Oo(i,t):i,a=e.length-1,o;a>=0;a--)(o=e[a])&&(r=o(r)||r);return r};let Ur=class{async convertFilesToBase64(e,i){const t=[];for(let n=0;n<e.length;n++){const r=e[n],a=r.type||"application/octet-stream",o=await this.fileToDataUrl(r),l=o.split(",")[1]||"";t.push({file:r,name:r.name,mimeType:a,dataUrl:o,originalSize:r.size,base64Size:l.length}),i&&i(Math.round((n+1)/e.length*100))}return t}fileToDataUrl(e){return new Promise((i,t)=>{const n=new FileReader;n.onload=()=>i(n.result),n.onerror=t,n.readAsDataURL(e)})}};Ur=Uo([nr(Et.Singleton)],Ur);var Do=Object.defineProperty,zo=Object.getOwnPropertyDescriptor,Ja=(e,i,t,n)=>{for(var r=n>1?void 0:n?zo(i,t):i,a=e.length-1,o;a>=0;a--)(o=e[a])&&(r=(n?o(i,t,r):o(r))||r);return n&&r&&Do(i,t,r),r};let Dr=class extends ge{constructor(){super(...arguments),this.dragActive=!1,this.files=[],this.progress=0,this.results=[],this.processing=!1,this.copiedIndex=null,this._onDragOver=i=>{i.preventDefault(),this.dragActive=!0,this.requestUpdate()},this._onDragLeave=i=>{i.preventDefault(),this.dragActive=!1,this.requestUpdate()},this._onDrop=i=>{i.preventDefault(),this.dragActive=!1,i.dataTransfer?.files?.length&&this._handleFiles(i.dataTransfer.files)},this._onFileChange=i=>{const t=i.target;t.files?.length&&this._handleFiles(t.files)}}_downloadDataUrl(i,t,n){i.preventDefault();const r=window.open();r&&(r.document.write("<pre>"+this._escapeHtml(t)+"</pre>"),r.document.title=n+" (Base64)")}_escapeHtml(i){return i.replace(/[&<>"']/g,function(t){return{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}[t]})}async _handleFiles(i){this.files=Array.from(i),this.progress=0,this.processing=!0,this.results=[],this.requestUpdate(),this.results=await this.base64Service.convertFilesToBase64(this.files,t=>{this.progress=t,this.requestUpdate()}),this.processing=!1,this.requestUpdate()}async _copyToClipboard(i,t){try{await navigator.clipboard.writeText(i),this.copiedIndex=t,this.requestUpdate(),setTimeout(()=>{this.copiedIndex=null,this.requestUpdate()},3e3)}catch{}}_selectDataUrl(i){const t=i.currentTarget;if(!t)return;const n=document.createRange();n.selectNodeContents(t);const r=window.getSelection();r?.removeAllRanges(),r?.addRange(n)}render(){return B`
      <h1>Convert assets to base64 format</h1>
      <p>
        This app provides a simple tool to convert media files to Base64 to use
        in playable ads.
      </p>

      <div
        class="dropzone ${this.dragActive?"dragover":""}"
        @dragover=${this._onDragOver}
        @dragleave=${this._onDragLeave}
        @drop=${this._onDrop}
      >
        <p>Drop your files here or</p>
        <label class="file-select-button">
          Select files
          <input type="file" multiple @change=${this._onFileChange} />
        </label>
      </div>

      ${this.processing?B`
            <div class="progress-container">
              <div class="progress-bar-background">
                <div
                  class="progress-bar-fill"
                  style="width: ${this.progress}%;"
                ></div>
              </div>
              <div style="margin-top:0.5em; font-size:0.95em;">
                Processing... ${this.progress}%
              </div>
            </div>
          `:null}
      ${this.results.length>0?B`
            <div class="file-list">
              ${this.results.map((i,t)=>B`
                  <div class="file-row">
                    <div class="file-name">
                      <span>${i.name}</span>
                      <div class="file-size">
                        ${(i.originalSize/1024).toFixed(2)} KB →
                        ${(i.base64Size/1024).toFixed(2)} KB
                      </div>
                    </div>
                    ${i.dataUrl.length>2048?B`<span class="data-url long-content"
                          >content too long to display
                          <a
                            href="#"
                            @click=${n=>this._downloadDataUrl(n,i.dataUrl,i.name)}
                            >Open in new tab</a
                          ></span
                        >`:B`<span
                          class="data-url"
                          tabindex="0"
                          @click=${n=>this._selectDataUrl(n)}
                          @focus=${n=>this._selectDataUrl(n)}
                          >${i.dataUrl}</span
                        >`}
                    <button
                      class="copy-btn${this.copiedIndex===t?" copied":""}"
                      @click=${()=>this._copyToClipboard(i.dataUrl,t)}
                    >
                      ${this.copiedIndex===t?"Copied":"Copy"}
                    </button>
                  </div>
                `)}
            </div>
          `:null}
    `}};Ja([_i(Ur)],Dr.prototype,"base64Service",2);Dr=Ja([we("base64-page"),rt("/base64",{title:"Base64 Converter",description:"A simple tool to convert text to Base64 and vice versa."})],Dr);var Io=Object.getOwnPropertyDescriptor,Mo=(e,i,t,n)=>{for(var r=n>1?void 0:n?Io(i,t):i,a=e.length-1,o;a>=0;a--)(o=e[a])&&(r=o(r)||r);return r};let jn=class extends ge{render(){return B`
      <div class="compress-assets-info">
        <h1>Compress Assets</h1>
        <p>
          <strong>PngChpocker</strong> is a Windows desktop app that allows you
          to compress PNG images in a folder without needing to use online
          services like TinyPNG. Additionally, it can extract images from merged
          HTML files containing base64-encoded images.
        </p>
        <image-popup src="PngChpocker.png" alt="PngChpocker app screenshot" thumbWidth="500px"></image-popup>
        <div
          class="usage-tip"
          style="background:#f8f8f8; border-left:4px solid #2196f3; padding:1em; margin:1em 0;"
        >
          <strong>Usage tip:</strong> Just open the app, choose the maximum
          number of colors for the image (256 is usually fine, but you can
          experiment to keep acceptable quality). For images with gradients,
          it's better to use more colors. Then select and drag images from
          Explorer to the app window and see the result. It will create a subfolder with compressed images.
        </div>
        <p>
          <a href="files/PngChpocker.zip" download>Download PngChpocker x64 for windows</a>
        </p>
        <p>
          <em
            >Note: A new version of this tool will soon be integrated directly
            into the Playable Tools site.</em
          >
        </p>
      </div>
    `}};jn=Mo([we("compress-assets-page"),rt("/compress-assets")],jn);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Lo={CHILD:2},Bo=e=>(...i)=>({_$litDirective$:e,values:i});class Fo{constructor(i){}get _$AU(){return this._$AM._$AU}_$AT(i,t,n){this._$Ct=i,this._$AM=t,this._$Ci=n}_$AS(i,t){return this.update(i,t)}update(i,t){return this.render(...t)}}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */class zr extends Fo{constructor(i){if(super(i),this.it=pe,i.type!==Lo.CHILD)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(i){if(i===pe||i==null)return this._t=void 0,this.it=i;if(i===bt)return i;if(typeof i!="string")throw Error(this.constructor.directiveName+"() called with a non-string value");if(i===this.it)return this._t;this.it=i;const t=[i];return t.raw=t,this._t={_$litType$:this.constructor.resultType,strings:t,values:[]}}}zr.directiveName="unsafeHTML",zr.resultType=1;const No=Bo(zr);function dn(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var yt=dn();function Qa(e){yt=e}var ti={exec:()=>null};function ae(e,i=""){let t=typeof e=="string"?e:e.source,n={replace:(r,a)=>{let o=typeof a=="string"?a:a.source;return o=o.replace(ke.caret,"$1"),t=t.replace(r,o),n},getRegex:()=>new RegExp(t,i)};return n}var ke={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},Zo=/^(?:[ \t]*(?:\n|$))+/,Ho=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,jo=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,vi=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,qo=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,fn=/(?:[*+-]|\d{1,9}[.)])/,es=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,ts=ae(es).replace(/bull/g,fn).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),Vo=ae(es).replace(/bull/g,fn).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),un=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Go=/^[^\n]+/,pn=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Wo=ae(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",pn).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Yo=ae(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,fn).getRegex(),sr="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",gn=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Ko=ae("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",gn).replace("tag",sr).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),is=ae(un).replace("hr",vi).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",sr).getRegex(),Xo=ae(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",is).getRegex(),bn={blockquote:Xo,code:Ho,def:Wo,fences:jo,heading:qo,hr:vi,html:Ko,lheading:ts,list:Yo,newline:Zo,paragraph:is,table:ti,text:Go},qn=ae("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",vi).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",sr).getRegex(),Jo={...bn,lheading:Vo,table:qn,paragraph:ae(un).replace("hr",vi).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",qn).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",sr).getRegex()},Qo={...bn,html:ae(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",gn).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:ti,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:ae(un).replace("hr",vi).replace("heading",` *#{1,6} *[^
]`).replace("lheading",ts).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},el=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,tl=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,rs=/^( {2,}|\\)\n(?!\s*$)/,il=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,or=/[\p{P}\p{S}]/u,_n=/[\s\p{P}\p{S}]/u,ns=/[^\s\p{P}\p{S}]/u,rl=ae(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,_n).getRegex(),as=/(?!~)[\p{P}\p{S}]/u,nl=/(?!~)[\s\p{P}\p{S}]/u,al=/(?:[^\s\p{P}\p{S}]|~)/u,sl=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,ss=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,ol=ae(ss,"u").replace(/punct/g,or).getRegex(),ll=ae(ss,"u").replace(/punct/g,as).getRegex(),os="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",cl=ae(os,"gu").replace(/notPunctSpace/g,ns).replace(/punctSpace/g,_n).replace(/punct/g,or).getRegex(),hl=ae(os,"gu").replace(/notPunctSpace/g,al).replace(/punctSpace/g,nl).replace(/punct/g,as).getRegex(),dl=ae("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,ns).replace(/punctSpace/g,_n).replace(/punct/g,or).getRegex(),fl=ae(/\\(punct)/,"gu").replace(/punct/g,or).getRegex(),ul=ae(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),pl=ae(gn).replace("(?:-->|$)","-->").getRegex(),gl=ae("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",pl).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Wi=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,bl=ae(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",Wi).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),ls=ae(/^!?\[(label)\]\[(ref)\]/).replace("label",Wi).replace("ref",pn).getRegex(),cs=ae(/^!?\[(ref)\](?:\[\])?/).replace("ref",pn).getRegex(),_l=ae("reflink|nolink(?!\\()","g").replace("reflink",ls).replace("nolink",cs).getRegex(),mn={_backpedal:ti,anyPunctuation:fl,autolink:ul,blockSkip:sl,br:rs,code:tl,del:ti,emStrongLDelim:ol,emStrongRDelimAst:cl,emStrongRDelimUnd:dl,escape:el,link:bl,nolink:cs,punctuation:rl,reflink:ls,reflinkSearch:_l,tag:gl,text:il,url:ti},ml={...mn,link:ae(/^!?\[(label)\]\((.*?)\)/).replace("label",Wi).getRegex(),reflink:ae(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Wi).getRegex()},Ir={...mn,emStrongRDelimAst:hl,emStrongLDelim:ll,url:ae(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},wl={...Ir,br:ae(rs).replace("{2,}","*").getRegex(),text:ae(Ir.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Ii={normal:bn,gfm:Jo,pedantic:Qo},Yt={normal:mn,gfm:Ir,breaks:wl,pedantic:ml},vl={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Vn=e=>vl[e];function Me(e,i){if(i){if(ke.escapeTest.test(e))return e.replace(ke.escapeReplace,Vn)}else if(ke.escapeTestNoEncode.test(e))return e.replace(ke.escapeReplaceNoEncode,Vn);return e}function Gn(e){try{e=encodeURI(e).replace(ke.percentDecode,"%")}catch{return null}return e}function Wn(e,i){let t=e.replace(ke.findPipe,(a,o,l)=>{let f=!1,c=o;for(;--c>=0&&l[c]==="\\";)f=!f;return f?"|":" |"}),n=t.split(ke.splitPipe),r=0;if(n[0].trim()||n.shift(),n.length>0&&!n.at(-1)?.trim()&&n.pop(),i)if(n.length>i)n.splice(i);else for(;n.length<i;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(ke.slashPipe,"|");return n}function Kt(e,i,t){let n=e.length;if(n===0)return"";let r=0;for(;r<n&&e.charAt(n-r-1)===i;)r++;return e.slice(0,n-r)}function yl(e,i){if(e.indexOf(i[1])===-1)return-1;let t=0;for(let n=0;n<e.length;n++)if(e[n]==="\\")n++;else if(e[n]===i[0])t++;else if(e[n]===i[1]&&(t--,t<0))return n;return t>0?-2:-1}function Yn(e,i,t,n,r){let a=i.href,o=i.title||null,l=e[1].replace(r.other.outputLinkReplace,"$1");n.state.inLink=!0;let f={type:e[0].charAt(0)==="!"?"image":"link",raw:t,href:a,title:o,text:l,tokens:n.inlineTokens(l)};return n.state.inLink=!1,f}function kl(e,i,t){let n=e.match(t.other.indentCodeCompensation);if(n===null)return i;let r=n[1];return i.split(`
`).map(a=>{let o=a.match(t.other.beginningSpace);if(o===null)return a;let[l]=o;return l.length>=r.length?a.slice(r.length):a}).join(`
`)}var Yi=class{options;rules;lexer;constructor(e){this.options=e||yt}space(e){let i=this.rules.block.newline.exec(e);if(i&&i[0].length>0)return{type:"space",raw:i[0]}}code(e){let i=this.rules.block.code.exec(e);if(i){let t=i[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:i[0],codeBlockStyle:"indented",text:this.options.pedantic?t:Kt(t,`
`)}}}fences(e){let i=this.rules.block.fences.exec(e);if(i){let t=i[0],n=kl(t,i[3]||"",this.rules);return{type:"code",raw:t,lang:i[2]?i[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):i[2],text:n}}}heading(e){let i=this.rules.block.heading.exec(e);if(i){let t=i[2].trim();if(this.rules.other.endingHash.test(t)){let n=Kt(t,"#");(this.options.pedantic||!n||this.rules.other.endingSpaceChar.test(n))&&(t=n.trim())}return{type:"heading",raw:i[0],depth:i[1].length,text:t,tokens:this.lexer.inline(t)}}}hr(e){let i=this.rules.block.hr.exec(e);if(i)return{type:"hr",raw:Kt(i[0],`
`)}}blockquote(e){let i=this.rules.block.blockquote.exec(e);if(i){let t=Kt(i[0],`
`).split(`
`),n="",r="",a=[];for(;t.length>0;){let o=!1,l=[],f;for(f=0;f<t.length;f++)if(this.rules.other.blockquoteStart.test(t[f]))l.push(t[f]),o=!0;else if(!o)l.push(t[f]);else break;t=t.slice(f);let c=l.join(`
`),d=c.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");n=n?`${n}
${c}`:c,r=r?`${r}
${d}`:d;let $=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(d,a,!0),this.lexer.state.top=$,t.length===0)break;let k=a.at(-1);if(k?.type==="code")break;if(k?.type==="blockquote"){let v=k,C=v.raw+`
`+t.join(`
`),j=this.blockquote(C);a[a.length-1]=j,n=n.substring(0,n.length-v.raw.length)+j.raw,r=r.substring(0,r.length-v.text.length)+j.text;break}else if(k?.type==="list"){let v=k,C=v.raw+`
`+t.join(`
`),j=this.list(C);a[a.length-1]=j,n=n.substring(0,n.length-k.raw.length)+j.raw,r=r.substring(0,r.length-v.raw.length)+j.raw,t=C.substring(a.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:n,tokens:a,text:r}}}list(e){let i=this.rules.block.list.exec(e);if(i){let t=i[1].trim(),n=t.length>1,r={type:"list",raw:"",ordered:n,start:n?+t.slice(0,-1):"",loose:!1,items:[]};t=n?`\\d{1,9}\\${t.slice(-1)}`:`\\${t}`,this.options.pedantic&&(t=n?t:"[*+-]");let a=this.rules.other.listItemRegex(t),o=!1;for(;e;){let f=!1,c="",d="";if(!(i=a.exec(e))||this.rules.block.hr.test(e))break;c=i[0],e=e.substring(c.length);let $=i[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,D=>" ".repeat(3*D.length)),k=e.split(`
`,1)[0],v=!$.trim(),C=0;if(this.options.pedantic?(C=2,d=$.trimStart()):v?C=i[1].length+1:(C=i[2].search(this.rules.other.nonSpaceChar),C=C>4?1:C,d=$.slice(C),C+=i[1].length),v&&this.rules.other.blankLine.test(k)&&(c+=k+`
`,e=e.substring(k.length+1),f=!0),!f){let D=this.rules.other.nextBulletRegex(C),V=this.rules.other.hrRegex(C),z=this.rules.other.fencesBeginRegex(C),P=this.rules.other.headingBeginRegex(C),X=this.rules.other.htmlBeginRegex(C);for(;e;){let ce=e.split(`
`,1)[0],O;if(k=ce,this.options.pedantic?(k=k.replace(this.rules.other.listReplaceNesting,"  "),O=k):O=k.replace(this.rules.other.tabCharGlobal,"    "),z.test(k)||P.test(k)||X.test(k)||D.test(k)||V.test(k))break;if(O.search(this.rules.other.nonSpaceChar)>=C||!k.trim())d+=`
`+O.slice(C);else{if(v||$.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||z.test($)||P.test($)||V.test($))break;d+=`
`+k}!v&&!k.trim()&&(v=!0),c+=ce+`
`,e=e.substring(ce.length+1),$=O.slice(C)}}r.loose||(o?r.loose=!0:this.rules.other.doubleBlankLine.test(c)&&(o=!0));let j=null,U;this.options.gfm&&(j=this.rules.other.listIsTask.exec(d),j&&(U=j[0]!=="[ ] ",d=d.replace(this.rules.other.listReplaceTask,""))),r.items.push({type:"list_item",raw:c,task:!!j,checked:U,loose:!1,text:d,tokens:[]}),r.raw+=c}let l=r.items.at(-1);if(l)l.raw=l.raw.trimEnd(),l.text=l.text.trimEnd();else return;r.raw=r.raw.trimEnd();for(let f=0;f<r.items.length;f++)if(this.lexer.state.top=!1,r.items[f].tokens=this.lexer.blockTokens(r.items[f].text,[]),!r.loose){let c=r.items[f].tokens.filter($=>$.type==="space"),d=c.length>0&&c.some($=>this.rules.other.anyLine.test($.raw));r.loose=d}if(r.loose)for(let f=0;f<r.items.length;f++)r.items[f].loose=!0;return r}}html(e){let i=this.rules.block.html.exec(e);if(i)return{type:"html",block:!0,raw:i[0],pre:i[1]==="pre"||i[1]==="script"||i[1]==="style",text:i[0]}}def(e){let i=this.rules.block.def.exec(e);if(i){let t=i[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),n=i[2]?i[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=i[3]?i[3].substring(1,i[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):i[3];return{type:"def",tag:t,raw:i[0],href:n,title:r}}}table(e){let i=this.rules.block.table.exec(e);if(!i||!this.rules.other.tableDelimiter.test(i[2]))return;let t=Wn(i[1]),n=i[2].replace(this.rules.other.tableAlignChars,"").split("|"),r=i[3]?.trim()?i[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],a={type:"table",raw:i[0],header:[],align:[],rows:[]};if(t.length===n.length){for(let o of n)this.rules.other.tableAlignRight.test(o)?a.align.push("right"):this.rules.other.tableAlignCenter.test(o)?a.align.push("center"):this.rules.other.tableAlignLeft.test(o)?a.align.push("left"):a.align.push(null);for(let o=0;o<t.length;o++)a.header.push({text:t[o],tokens:this.lexer.inline(t[o]),header:!0,align:a.align[o]});for(let o of r)a.rows.push(Wn(o,a.header.length).map((l,f)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:a.align[f]})));return a}}lheading(e){let i=this.rules.block.lheading.exec(e);if(i)return{type:"heading",raw:i[0],depth:i[2].charAt(0)==="="?1:2,text:i[1],tokens:this.lexer.inline(i[1])}}paragraph(e){let i=this.rules.block.paragraph.exec(e);if(i){let t=i[1].charAt(i[1].length-1)===`
`?i[1].slice(0,-1):i[1];return{type:"paragraph",raw:i[0],text:t,tokens:this.lexer.inline(t)}}}text(e){let i=this.rules.block.text.exec(e);if(i)return{type:"text",raw:i[0],text:i[0],tokens:this.lexer.inline(i[0])}}escape(e){let i=this.rules.inline.escape.exec(e);if(i)return{type:"escape",raw:i[0],text:i[1]}}tag(e){let i=this.rules.inline.tag.exec(e);if(i)return!this.lexer.state.inLink&&this.rules.other.startATag.test(i[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(i[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(i[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(i[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:i[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:i[0]}}link(e){let i=this.rules.inline.link.exec(e);if(i){let t=i[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(t)){if(!this.rules.other.endAngleBracket.test(t))return;let a=Kt(t.slice(0,-1),"\\");if((t.length-a.length)%2===0)return}else{let a=yl(i[2],"()");if(a===-2)return;if(a>-1){let o=(i[0].indexOf("!")===0?5:4)+i[1].length+a;i[2]=i[2].substring(0,a),i[0]=i[0].substring(0,o).trim(),i[3]=""}}let n=i[2],r="";if(this.options.pedantic){let a=this.rules.other.pedanticHrefTitle.exec(n);a&&(n=a[1],r=a[3])}else r=i[3]?i[3].slice(1,-1):"";return n=n.trim(),this.rules.other.startAngleBracket.test(n)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(t)?n=n.slice(1):n=n.slice(1,-1)),Yn(i,{href:n&&n.replace(this.rules.inline.anyPunctuation,"$1"),title:r&&r.replace(this.rules.inline.anyPunctuation,"$1")},i[0],this.lexer,this.rules)}}reflink(e,i){let t;if((t=this.rules.inline.reflink.exec(e))||(t=this.rules.inline.nolink.exec(e))){let n=(t[2]||t[1]).replace(this.rules.other.multipleSpaceGlobal," "),r=i[n.toLowerCase()];if(!r){let a=t[0].charAt(0);return{type:"text",raw:a,text:a}}return Yn(t,r,t[0],this.lexer,this.rules)}}emStrong(e,i,t=""){let n=this.rules.inline.emStrongLDelim.exec(e);if(!(!n||n[3]&&t.match(this.rules.other.unicodeAlphaNumeric))&&(!(n[1]||n[2])||!t||this.rules.inline.punctuation.exec(t))){let r=[...n[0]].length-1,a,o,l=r,f=0,c=n[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(c.lastIndex=0,i=i.slice(-1*e.length+r);(n=c.exec(i))!=null;){if(a=n[1]||n[2]||n[3]||n[4]||n[5]||n[6],!a)continue;if(o=[...a].length,n[3]||n[4]){l+=o;continue}else if((n[5]||n[6])&&r%3&&!((r+o)%3)){f+=o;continue}if(l-=o,l>0)continue;o=Math.min(o,o+l+f);let d=[...n[0]][0].length,$=e.slice(0,r+n.index+d+o);if(Math.min(r,o)%2){let v=$.slice(1,-1);return{type:"em",raw:$,text:v,tokens:this.lexer.inlineTokens(v)}}let k=$.slice(2,-2);return{type:"strong",raw:$,text:k,tokens:this.lexer.inlineTokens(k)}}}}codespan(e){let i=this.rules.inline.code.exec(e);if(i){let t=i[2].replace(this.rules.other.newLineCharGlobal," "),n=this.rules.other.nonSpaceChar.test(t),r=this.rules.other.startingSpaceChar.test(t)&&this.rules.other.endingSpaceChar.test(t);return n&&r&&(t=t.substring(1,t.length-1)),{type:"codespan",raw:i[0],text:t}}}br(e){let i=this.rules.inline.br.exec(e);if(i)return{type:"br",raw:i[0]}}del(e){let i=this.rules.inline.del.exec(e);if(i)return{type:"del",raw:i[0],text:i[2],tokens:this.lexer.inlineTokens(i[2])}}autolink(e){let i=this.rules.inline.autolink.exec(e);if(i){let t,n;return i[2]==="@"?(t=i[1],n="mailto:"+t):(t=i[1],n=t),{type:"link",raw:i[0],text:t,href:n,tokens:[{type:"text",raw:t,text:t}]}}}url(e){let i;if(i=this.rules.inline.url.exec(e)){let t,n;if(i[2]==="@")t=i[0],n="mailto:"+t;else{let r;do r=i[0],i[0]=this.rules.inline._backpedal.exec(i[0])?.[0]??"";while(r!==i[0]);t=i[0],i[1]==="www."?n="http://"+i[0]:n=i[0]}return{type:"link",raw:i[0],text:t,href:n,tokens:[{type:"text",raw:t,text:t}]}}}inlineText(e){let i=this.rules.inline.text.exec(e);if(i){let t=this.lexer.state.inRawBlock;return{type:"text",raw:i[0],text:i[0],escaped:t}}}},qe=class Mr{tokens;options;state;tokenizer;inlineQueue;constructor(i){this.tokens=[],this.tokens.links=Object.create(null),this.options=i||yt,this.options.tokenizer=this.options.tokenizer||new Yi,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={other:ke,block:Ii.normal,inline:Yt.normal};this.options.pedantic?(t.block=Ii.pedantic,t.inline=Yt.pedantic):this.options.gfm&&(t.block=Ii.gfm,this.options.breaks?t.inline=Yt.breaks:t.inline=Yt.gfm),this.tokenizer.rules=t}static get rules(){return{block:Ii,inline:Yt}}static lex(i,t){return new Mr(t).lex(i)}static lexInline(i,t){return new Mr(t).inlineTokens(i)}lex(i){i=i.replace(ke.carriageReturn,`
`),this.blockTokens(i,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){let n=this.inlineQueue[t];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(i,t=[],n=!1){for(this.options.pedantic&&(i=i.replace(ke.tabCharGlobal,"    ").replace(ke.spaceLine,""));i;){let r;if(this.options.extensions?.block?.some(o=>(r=o.call({lexer:this},i,t))?(i=i.substring(r.raw.length),t.push(r),!0):!1))continue;if(r=this.tokenizer.space(i)){i=i.substring(r.raw.length);let o=t.at(-1);r.raw.length===1&&o!==void 0?o.raw+=`
`:t.push(r);continue}if(r=this.tokenizer.code(i)){i=i.substring(r.raw.length);let o=t.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=`
`+r.raw,o.text+=`
`+r.text,this.inlineQueue.at(-1).src=o.text):t.push(r);continue}if(r=this.tokenizer.fences(i)){i=i.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.heading(i)){i=i.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.hr(i)){i=i.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.blockquote(i)){i=i.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.list(i)){i=i.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.html(i)){i=i.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.def(i)){i=i.substring(r.raw.length);let o=t.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=`
`+r.raw,o.text+=`
`+r.raw,this.inlineQueue.at(-1).src=o.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});continue}if(r=this.tokenizer.table(i)){i=i.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.lheading(i)){i=i.substring(r.raw.length),t.push(r);continue}let a=i;if(this.options.extensions?.startBlock){let o=1/0,l=i.slice(1),f;this.options.extensions.startBlock.forEach(c=>{f=c.call({lexer:this},l),typeof f=="number"&&f>=0&&(o=Math.min(o,f))}),o<1/0&&o>=0&&(a=i.substring(0,o+1))}if(this.state.top&&(r=this.tokenizer.paragraph(a))){let o=t.at(-1);n&&o?.type==="paragraph"?(o.raw+=`
`+r.raw,o.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):t.push(r),n=a.length!==i.length,i=i.substring(r.raw.length);continue}if(r=this.tokenizer.text(i)){i=i.substring(r.raw.length);let o=t.at(-1);o?.type==="text"?(o.raw+=`
`+r.raw,o.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):t.push(r);continue}if(i){let o="Infinite loop on byte: "+i.charCodeAt(0);if(this.options.silent){console.error(o);break}else throw new Error(o)}}return this.state.top=!0,t}inline(i,t=[]){return this.inlineQueue.push({src:i,tokens:t}),t}inlineTokens(i,t=[]){let n=i,r=null;if(this.tokens.links){let l=Object.keys(this.tokens.links);if(l.length>0)for(;(r=this.tokenizer.rules.inline.reflinkSearch.exec(n))!=null;)l.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(n=n.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(r=this.tokenizer.rules.inline.anyPunctuation.exec(n))!=null;)n=n.slice(0,r.index)+"++"+n.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(r=this.tokenizer.rules.inline.blockSkip.exec(n))!=null;)n=n.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let a=!1,o="";for(;i;){a||(o=""),a=!1;let l;if(this.options.extensions?.inline?.some(c=>(l=c.call({lexer:this},i,t))?(i=i.substring(l.raw.length),t.push(l),!0):!1))continue;if(l=this.tokenizer.escape(i)){i=i.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.tag(i)){i=i.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.link(i)){i=i.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.reflink(i,this.tokens.links)){i=i.substring(l.raw.length);let c=t.at(-1);l.type==="text"&&c?.type==="text"?(c.raw+=l.raw,c.text+=l.text):t.push(l);continue}if(l=this.tokenizer.emStrong(i,n,o)){i=i.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.codespan(i)){i=i.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.br(i)){i=i.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.del(i)){i=i.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.autolink(i)){i=i.substring(l.raw.length),t.push(l);continue}if(!this.state.inLink&&(l=this.tokenizer.url(i))){i=i.substring(l.raw.length),t.push(l);continue}let f=i;if(this.options.extensions?.startInline){let c=1/0,d=i.slice(1),$;this.options.extensions.startInline.forEach(k=>{$=k.call({lexer:this},d),typeof $=="number"&&$>=0&&(c=Math.min(c,$))}),c<1/0&&c>=0&&(f=i.substring(0,c+1))}if(l=this.tokenizer.inlineText(f)){i=i.substring(l.raw.length),l.raw.slice(-1)!=="_"&&(o=l.raw.slice(-1)),a=!0;let c=t.at(-1);c?.type==="text"?(c.raw+=l.raw,c.text+=l.text):t.push(l);continue}if(i){let c="Infinite loop on byte: "+i.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return t}},Ki=class{options;parser;constructor(e){this.options=e||yt}space(e){return""}code({text:e,lang:i,escaped:t}){let n=(i||"").match(ke.notSpaceStart)?.[0],r=e.replace(ke.endingNewline,"")+`
`;return n?'<pre><code class="language-'+Me(n)+'">'+(t?r:Me(r,!0))+`</code></pre>
`:"<pre><code>"+(t?r:Me(r,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:i}){return`<h${i}>${this.parser.parseInline(e)}</h${i}>
`}hr(e){return`<hr>
`}list(e){let i=e.ordered,t=e.start,n="";for(let o=0;o<e.items.length;o++){let l=e.items[o];n+=this.listitem(l)}let r=i?"ol":"ul",a=i&&t!==1?' start="'+t+'"':"";return"<"+r+a+`>
`+n+"</"+r+`>
`}listitem(e){let i="";if(e.task){let t=this.checkbox({checked:!!e.checked});e.loose?e.tokens[0]?.type==="paragraph"?(e.tokens[0].text=t+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=t+" "+Me(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:t+" ",text:t+" ",escaped:!0}):i+=t+" "}return i+=this.parser.parse(e.tokens,!!e.loose),`<li>${i}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let i="",t="";for(let r=0;r<e.header.length;r++)t+=this.tablecell(e.header[r]);i+=this.tablerow({text:t});let n="";for(let r=0;r<e.rows.length;r++){let a=e.rows[r];t="";for(let o=0;o<a.length;o++)t+=this.tablecell(a[o]);n+=this.tablerow({text:t})}return n&&(n=`<tbody>${n}</tbody>`),`<table>
<thead>
`+i+`</thead>
`+n+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){let i=this.parser.parseInline(e.tokens),t=e.header?"th":"td";return(e.align?`<${t} align="${e.align}">`:`<${t}>`)+i+`</${t}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${Me(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:i,tokens:t}){let n=this.parser.parseInline(t),r=Gn(e);if(r===null)return n;e=r;let a='<a href="'+e+'"';return i&&(a+=' title="'+Me(i)+'"'),a+=">"+n+"</a>",a}image({href:e,title:i,text:t,tokens:n}){n&&(t=this.parser.parseInline(n,this.parser.textRenderer));let r=Gn(e);if(r===null)return Me(t);e=r;let a=`<img src="${e}" alt="${t}"`;return i&&(a+=` title="${Me(i)}"`),a+=">",a}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:Me(e.text)}},wn=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},Ve=class Lr{options;renderer;textRenderer;constructor(i){this.options=i||yt,this.options.renderer=this.options.renderer||new Ki,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new wn}static parse(i,t){return new Lr(t).parse(i)}static parseInline(i,t){return new Lr(t).parseInline(i)}parse(i,t=!0){let n="";for(let r=0;r<i.length;r++){let a=i[r];if(this.options.extensions?.renderers?.[a.type]){let l=a,f=this.options.extensions.renderers[l.type].call({parser:this},l);if(f!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(l.type)){n+=f||"";continue}}let o=a;switch(o.type){case"space":{n+=this.renderer.space(o);continue}case"hr":{n+=this.renderer.hr(o);continue}case"heading":{n+=this.renderer.heading(o);continue}case"code":{n+=this.renderer.code(o);continue}case"table":{n+=this.renderer.table(o);continue}case"blockquote":{n+=this.renderer.blockquote(o);continue}case"list":{n+=this.renderer.list(o);continue}case"html":{n+=this.renderer.html(o);continue}case"paragraph":{n+=this.renderer.paragraph(o);continue}case"text":{let l=o,f=this.renderer.text(l);for(;r+1<i.length&&i[r+1].type==="text";)l=i[++r],f+=`
`+this.renderer.text(l);t?n+=this.renderer.paragraph({type:"paragraph",raw:f,text:f,tokens:[{type:"text",raw:f,text:f,escaped:!0}]}):n+=f;continue}default:{let l='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return n}parseInline(i,t=this.renderer){let n="";for(let r=0;r<i.length;r++){let a=i[r];if(this.options.extensions?.renderers?.[a.type]){let l=this.options.extensions.renderers[a.type].call({parser:this},a);if(l!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){n+=l||"";continue}}let o=a;switch(o.type){case"escape":{n+=t.text(o);break}case"html":{n+=t.html(o);break}case"link":{n+=t.link(o);break}case"image":{n+=t.image(o);break}case"strong":{n+=t.strong(o);break}case"em":{n+=t.em(o);break}case"codespan":{n+=t.codespan(o);break}case"br":{n+=t.br(o);break}case"del":{n+=t.del(o);break}case"text":{n+=t.text(o);break}default:{let l='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return n}},Hi=class{options;block;constructor(e){this.options=e||yt}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?qe.lex:qe.lexInline}provideParser(){return this.block?Ve.parse:Ve.parseInline}},xl=class{defaults=dn();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=Ve;Renderer=Ki;TextRenderer=wn;Lexer=qe;Tokenizer=Yi;Hooks=Hi;constructor(...e){this.use(...e)}walkTokens(e,i){let t=[];for(let n of e)switch(t=t.concat(i.call(this,n)),n.type){case"table":{let r=n;for(let a of r.header)t=t.concat(this.walkTokens(a.tokens,i));for(let a of r.rows)for(let o of a)t=t.concat(this.walkTokens(o.tokens,i));break}case"list":{let r=n;t=t.concat(this.walkTokens(r.items,i));break}default:{let r=n;this.defaults.extensions?.childTokens?.[r.type]?this.defaults.extensions.childTokens[r.type].forEach(a=>{let o=r[a].flat(1/0);t=t.concat(this.walkTokens(o,i))}):r.tokens&&(t=t.concat(this.walkTokens(r.tokens,i)))}}return t}use(...e){let i=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(t=>{let n={...t};if(n.async=this.defaults.async||n.async||!1,t.extensions&&(t.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if("renderer"in r){let a=i.renderers[r.name];a?i.renderers[r.name]=function(...o){let l=r.renderer.apply(this,o);return l===!1&&(l=a.apply(this,o)),l}:i.renderers[r.name]=r.renderer}if("tokenizer"in r){if(!r.level||r.level!=="block"&&r.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let a=i[r.level];a?a.unshift(r.tokenizer):i[r.level]=[r.tokenizer],r.start&&(r.level==="block"?i.startBlock?i.startBlock.push(r.start):i.startBlock=[r.start]:r.level==="inline"&&(i.startInline?i.startInline.push(r.start):i.startInline=[r.start]))}"childTokens"in r&&r.childTokens&&(i.childTokens[r.name]=r.childTokens)}),n.extensions=i),t.renderer){let r=this.defaults.renderer||new Ki(this.defaults);for(let a in t.renderer){if(!(a in r))throw new Error(`renderer '${a}' does not exist`);if(["options","parser"].includes(a))continue;let o=a,l=t.renderer[o],f=r[o];r[o]=(...c)=>{let d=l.apply(r,c);return d===!1&&(d=f.apply(r,c)),d||""}}n.renderer=r}if(t.tokenizer){let r=this.defaults.tokenizer||new Yi(this.defaults);for(let a in t.tokenizer){if(!(a in r))throw new Error(`tokenizer '${a}' does not exist`);if(["options","rules","lexer"].includes(a))continue;let o=a,l=t.tokenizer[o],f=r[o];r[o]=(...c)=>{let d=l.apply(r,c);return d===!1&&(d=f.apply(r,c)),d}}n.tokenizer=r}if(t.hooks){let r=this.defaults.hooks||new Hi;for(let a in t.hooks){if(!(a in r))throw new Error(`hook '${a}' does not exist`);if(["options","block"].includes(a))continue;let o=a,l=t.hooks[o],f=r[o];Hi.passThroughHooks.has(a)?r[o]=c=>{if(this.defaults.async)return Promise.resolve(l.call(r,c)).then($=>f.call(r,$));let d=l.call(r,c);return f.call(r,d)}:r[o]=(...c)=>{let d=l.apply(r,c);return d===!1&&(d=f.apply(r,c)),d}}n.hooks=r}if(t.walkTokens){let r=this.defaults.walkTokens,a=t.walkTokens;n.walkTokens=function(o){let l=[];return l.push(a.call(this,o)),r&&(l=l.concat(r.call(this,o))),l}}this.defaults={...this.defaults,...n}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,i){return qe.lex(e,i??this.defaults)}parser(e,i){return Ve.parse(e,i??this.defaults)}parseMarkdown(e){return(i,t)=>{let n={...t},r={...this.defaults,...n},a=this.onError(!!r.silent,!!r.async);if(this.defaults.async===!0&&n.async===!1)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof i>"u"||i===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof i!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(i)+", string expected"));r.hooks&&(r.hooks.options=r,r.hooks.block=e);let o=r.hooks?r.hooks.provideLexer():e?qe.lex:qe.lexInline,l=r.hooks?r.hooks.provideParser():e?Ve.parse:Ve.parseInline;if(r.async)return Promise.resolve(r.hooks?r.hooks.preprocess(i):i).then(f=>o(f,r)).then(f=>r.hooks?r.hooks.processAllTokens(f):f).then(f=>r.walkTokens?Promise.all(this.walkTokens(f,r.walkTokens)).then(()=>f):f).then(f=>l(f,r)).then(f=>r.hooks?r.hooks.postprocess(f):f).catch(a);try{r.hooks&&(i=r.hooks.preprocess(i));let f=o(i,r);r.hooks&&(f=r.hooks.processAllTokens(f)),r.walkTokens&&this.walkTokens(f,r.walkTokens);let c=l(f,r);return r.hooks&&(c=r.hooks.postprocess(c)),c}catch(f){return a(f)}}}onError(e,i){return t=>{if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,e){let n="<p>An error occurred:</p><pre>"+Me(t.message+"",!0)+"</pre>";return i?Promise.resolve(n):n}if(i)return Promise.reject(t);throw t}}},_t=new xl;function oe(e,i){return _t.parse(e,i)}oe.options=oe.setOptions=function(e){return _t.setOptions(e),oe.defaults=_t.defaults,Qa(oe.defaults),oe};oe.getDefaults=dn;oe.defaults=yt;oe.use=function(...e){return _t.use(...e),oe.defaults=_t.defaults,Qa(oe.defaults),oe};oe.walkTokens=function(e,i){return _t.walkTokens(e,i)};oe.parseInline=_t.parseInline;oe.Parser=Ve;oe.parser=Ve.parse;oe.Renderer=Ki;oe.TextRenderer=wn;oe.Lexer=qe;oe.lexer=qe.lex;oe.Tokenizer=Yi;oe.Hooks=Hi;oe.parse=oe;oe.options;oe.setOptions;oe.use;oe.walkTokens;oe.parseInline;Ve.parse;qe.lex;const Sl=`# Unifying Playable Ads: The CTA SDK Bridge\r
\r
> **Note:** The CTA SDK is used by the [Publish Tool](/#publish), enabling seamless deployment and integration of HTML5 playables across multiple ad networks.\r
\r
## 1. Game Events and CTA Calls\r
\r
When the playable is finished, the user should click the Call to Action button (such as Install, Play, Next, etc.). When that button is clicked, you should call the following code:\r
\r
  \`\`\`typescript\r
  document["CTA"]?.onClick?.(); // Triggers the app store\r
  \`\`\`\r
\r
This method acts as a proxy for the specific APIs required by different ad platforms. It will only call the necessary API to direct the user to the app store.\r
\r
### Optional methods\r
\r
  \`\`\`typescript\r
  document["CTA"]?.gameEnd?.(); // Signals the end of gameplay\r
\r
  document["CTA"]?.gameReady?.(); // Signals the ad is loaded and interactive\r
  \`\`\`\r
\r
`;var $l=Object.getOwnPropertyDescriptor,Al=(e,i,t,n)=>{for(var r=n>1?void 0:n?$l(i,t):i,a=e.length-1,o;a>=0;a--)(o=e[a])&&(r=o(r)||r);return r};let Kn=class extends ge{constructor(){super(...arguments),this.markdownHtml=""}connectedCallback(){super.connectedCallback();const e=oe.parse(Sl);typeof e=="string"&&(this.markdownHtml=e),this.requestUpdate()}render(){return B`
      <div class="cta-sdk-info">
        <div>${No(this.markdownHtml)}</div>
      </div>
    `}};Kn=Al([we("cta-sdk-page"),rt("/cta-sdk",{title:"CTA SDK Documentation",description:"Documentation for the CTA SDK, providing guidance on how to integrate and use the SDK in your playable ads."})],Kn);var El=Object.getOwnPropertyDescriptor,Cl=(e,i,t,n)=>{for(var r=n>1?void 0:n?El(i,t):i,a=e.length-1,o;a>=0;a--)(o=e[a])&&(r=o(r)||r);return r};let Xn=class extends ge{render(){return B`
      <h1>Gritsenko Playable Ads Tools</h1>

      <p>
        This app provides a collection of open-source, useful tools for HTML5
        playable ads developers.
      </p>

      <h2>Core Features:</h2>
      <ul class="feature-list">
        <li>
          <strong>Publish to Ad Networks:</strong> Streamline the process of
          deploying your playable ads to various advertising networks.
        </li>
        <li>
          <strong>Assets Compression:</strong> Optimize your images, scripts,
          and other assets to reduce file size and improve loading times.
        </li>
        <li>
          <strong>Ad Network Requirements:</strong> Stay up-to-date with the
          specific requirements and specifications for different ad networks.
        </li>
        <li>
          <strong>Playable Ads Validator:</strong> Check your ads against common
          standards and network rules to ensure compatibility and performance.
        </li>
        <li>
          <strong>Playable Ads Sharing:</strong> Easily share your playable ad
          creations for testing and previews.
        </li>
      </ul>
    `}};Xn=Cl([we("home-page"),rt("/",{title:"Playable Tools for HTML5 Ads",description:"A collection of open-source tools for HTML5 playable ads developers, including publishing, asset compression, and validation."})],Xn);/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const Tl=4,Jn=0,Qn=1,Pl=2;function Dt(e){let i=e.length;for(;--i>=0;)e[i]=0}const Rl=0,hs=1,Ol=2,Ul=3,Dl=258,vn=29,yi=256,li=yi+1+vn,Tt=30,yn=19,ds=2*li+1,ft=15,mr=16,zl=7,kn=256,fs=16,us=17,ps=18,Br=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),ji=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Il=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),gs=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ml=512,He=new Array((li+2)*2);Dt(He);const ii=new Array(Tt*2);Dt(ii);const ci=new Array(Ml);Dt(ci);const hi=new Array(Dl-Ul+1);Dt(hi);const xn=new Array(vn);Dt(xn);const Xi=new Array(Tt);Dt(Xi);function wr(e,i,t,n,r){this.static_tree=e,this.extra_bits=i,this.extra_base=t,this.elems=n,this.max_length=r,this.has_stree=e&&e.length}let bs,_s,ms;function vr(e,i){this.dyn_tree=e,this.max_code=0,this.stat_desc=i}const ws=e=>e<256?ci[e]:ci[256+(e>>>7)],di=(e,i)=>{e.pending_buf[e.pending++]=i&255,e.pending_buf[e.pending++]=i>>>8&255},Se=(e,i,t)=>{e.bi_valid>mr-t?(e.bi_buf|=i<<e.bi_valid&65535,di(e,e.bi_buf),e.bi_buf=i>>mr-e.bi_valid,e.bi_valid+=t-mr):(e.bi_buf|=i<<e.bi_valid&65535,e.bi_valid+=t)},Le=(e,i,t)=>{Se(e,t[i*2],t[i*2+1])},vs=(e,i)=>{let t=0;do t|=e&1,e>>>=1,t<<=1;while(--i>0);return t>>>1},Ll=e=>{e.bi_valid===16?(di(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},Bl=(e,i)=>{const t=i.dyn_tree,n=i.max_code,r=i.stat_desc.static_tree,a=i.stat_desc.has_stree,o=i.stat_desc.extra_bits,l=i.stat_desc.extra_base,f=i.stat_desc.max_length;let c,d,$,k,v,C,j=0;for(k=0;k<=ft;k++)e.bl_count[k]=0;for(t[e.heap[e.heap_max]*2+1]=0,c=e.heap_max+1;c<ds;c++)d=e.heap[c],k=t[t[d*2+1]*2+1]+1,k>f&&(k=f,j++),t[d*2+1]=k,!(d>n)&&(e.bl_count[k]++,v=0,d>=l&&(v=o[d-l]),C=t[d*2],e.opt_len+=C*(k+v),a&&(e.static_len+=C*(r[d*2+1]+v)));if(j!==0){do{for(k=f-1;e.bl_count[k]===0;)k--;e.bl_count[k]--,e.bl_count[k+1]+=2,e.bl_count[f]--,j-=2}while(j>0);for(k=f;k!==0;k--)for(d=e.bl_count[k];d!==0;)$=e.heap[--c],!($>n)&&(t[$*2+1]!==k&&(e.opt_len+=(k-t[$*2+1])*t[$*2],t[$*2+1]=k),d--)}},ys=(e,i,t)=>{const n=new Array(ft+1);let r=0,a,o;for(a=1;a<=ft;a++)r=r+t[a-1]<<1,n[a]=r;for(o=0;o<=i;o++){let l=e[o*2+1];l!==0&&(e[o*2]=vs(n[l]++,l))}},Fl=()=>{let e,i,t,n,r;const a=new Array(ft+1);for(t=0,n=0;n<vn-1;n++)for(xn[n]=t,e=0;e<1<<Br[n];e++)hi[t++]=n;for(hi[t-1]=n,r=0,n=0;n<16;n++)for(Xi[n]=r,e=0;e<1<<ji[n];e++)ci[r++]=n;for(r>>=7;n<Tt;n++)for(Xi[n]=r<<7,e=0;e<1<<ji[n]-7;e++)ci[256+r++]=n;for(i=0;i<=ft;i++)a[i]=0;for(e=0;e<=143;)He[e*2+1]=8,e++,a[8]++;for(;e<=255;)He[e*2+1]=9,e++,a[9]++;for(;e<=279;)He[e*2+1]=7,e++,a[7]++;for(;e<=287;)He[e*2+1]=8,e++,a[8]++;for(ys(He,li+1,a),e=0;e<Tt;e++)ii[e*2+1]=5,ii[e*2]=vs(e,5);bs=new wr(He,Br,yi+1,li,ft),_s=new wr(ii,ji,0,Tt,ft),ms=new wr(new Array(0),Il,0,yn,zl)},ks=e=>{let i;for(i=0;i<li;i++)e.dyn_ltree[i*2]=0;for(i=0;i<Tt;i++)e.dyn_dtree[i*2]=0;for(i=0;i<yn;i++)e.bl_tree[i*2]=0;e.dyn_ltree[kn*2]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},xs=e=>{e.bi_valid>8?di(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},ea=(e,i,t,n)=>{const r=i*2,a=t*2;return e[r]<e[a]||e[r]===e[a]&&n[i]<=n[t]},yr=(e,i,t)=>{const n=e.heap[t];let r=t<<1;for(;r<=e.heap_len&&(r<e.heap_len&&ea(i,e.heap[r+1],e.heap[r],e.depth)&&r++,!ea(i,n,e.heap[r],e.depth));)e.heap[t]=e.heap[r],t=r,r<<=1;e.heap[t]=n},ta=(e,i,t)=>{let n,r,a=0,o,l;if(e.sym_next!==0)do n=e.pending_buf[e.sym_buf+a++]&255,n+=(e.pending_buf[e.sym_buf+a++]&255)<<8,r=e.pending_buf[e.sym_buf+a++],n===0?Le(e,r,i):(o=hi[r],Le(e,o+yi+1,i),l=Br[o],l!==0&&(r-=xn[o],Se(e,r,l)),n--,o=ws(n),Le(e,o,t),l=ji[o],l!==0&&(n-=Xi[o],Se(e,n,l)));while(a<e.sym_next);Le(e,kn,i)},Fr=(e,i)=>{const t=i.dyn_tree,n=i.stat_desc.static_tree,r=i.stat_desc.has_stree,a=i.stat_desc.elems;let o,l,f=-1,c;for(e.heap_len=0,e.heap_max=ds,o=0;o<a;o++)t[o*2]!==0?(e.heap[++e.heap_len]=f=o,e.depth[o]=0):t[o*2+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=f<2?++f:0,t[c*2]=1,e.depth[c]=0,e.opt_len--,r&&(e.static_len-=n[c*2+1]);for(i.max_code=f,o=e.heap_len>>1;o>=1;o--)yr(e,t,o);c=a;do o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],yr(e,t,1),l=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=l,t[c*2]=t[o*2]+t[l*2],e.depth[c]=(e.depth[o]>=e.depth[l]?e.depth[o]:e.depth[l])+1,t[o*2+1]=t[l*2+1]=c,e.heap[1]=c++,yr(e,t,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],Bl(e,i),ys(t,f,e.bl_count)},ia=(e,i,t)=>{let n,r=-1,a,o=i[0*2+1],l=0,f=7,c=4;for(o===0&&(f=138,c=3),i[(t+1)*2+1]=65535,n=0;n<=t;n++)a=o,o=i[(n+1)*2+1],!(++l<f&&a===o)&&(l<c?e.bl_tree[a*2]+=l:a!==0?(a!==r&&e.bl_tree[a*2]++,e.bl_tree[fs*2]++):l<=10?e.bl_tree[us*2]++:e.bl_tree[ps*2]++,l=0,r=a,o===0?(f=138,c=3):a===o?(f=6,c=3):(f=7,c=4))},ra=(e,i,t)=>{let n,r=-1,a,o=i[0*2+1],l=0,f=7,c=4;for(o===0&&(f=138,c=3),n=0;n<=t;n++)if(a=o,o=i[(n+1)*2+1],!(++l<f&&a===o)){if(l<c)do Le(e,a,e.bl_tree);while(--l!==0);else a!==0?(a!==r&&(Le(e,a,e.bl_tree),l--),Le(e,fs,e.bl_tree),Se(e,l-3,2)):l<=10?(Le(e,us,e.bl_tree),Se(e,l-3,3)):(Le(e,ps,e.bl_tree),Se(e,l-11,7));l=0,r=a,o===0?(f=138,c=3):a===o?(f=6,c=3):(f=7,c=4)}},Nl=e=>{let i;for(ia(e,e.dyn_ltree,e.l_desc.max_code),ia(e,e.dyn_dtree,e.d_desc.max_code),Fr(e,e.bl_desc),i=yn-1;i>=3&&e.bl_tree[gs[i]*2+1]===0;i--);return e.opt_len+=3*(i+1)+5+5+4,i},Zl=(e,i,t,n)=>{let r;for(Se(e,i-257,5),Se(e,t-1,5),Se(e,n-4,4),r=0;r<n;r++)Se(e,e.bl_tree[gs[r]*2+1],3);ra(e,e.dyn_ltree,i-1),ra(e,e.dyn_dtree,t-1)},Hl=e=>{let i=4093624447,t;for(t=0;t<=31;t++,i>>>=1)if(i&1&&e.dyn_ltree[t*2]!==0)return Jn;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return Qn;for(t=32;t<yi;t++)if(e.dyn_ltree[t*2]!==0)return Qn;return Jn};let na=!1;const jl=e=>{na||(Fl(),na=!0),e.l_desc=new vr(e.dyn_ltree,bs),e.d_desc=new vr(e.dyn_dtree,_s),e.bl_desc=new vr(e.bl_tree,ms),e.bi_buf=0,e.bi_valid=0,ks(e)},Ss=(e,i,t,n)=>{Se(e,(Rl<<1)+(n?1:0),3),xs(e),di(e,t),di(e,~t),t&&e.pending_buf.set(e.window.subarray(i,i+t),e.pending),e.pending+=t},ql=e=>{Se(e,hs<<1,3),Le(e,kn,He),Ll(e)},Vl=(e,i,t,n)=>{let r,a,o=0;e.level>0?(e.strm.data_type===Pl&&(e.strm.data_type=Hl(e)),Fr(e,e.l_desc),Fr(e,e.d_desc),o=Nl(e),r=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=r&&(r=a)):r=a=t+5,t+4<=r&&i!==-1?Ss(e,i,t,n):e.strategy===Tl||a===r?(Se(e,(hs<<1)+(n?1:0),3),ta(e,He,ii)):(Se(e,(Ol<<1)+(n?1:0),3),Zl(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),ta(e,e.dyn_ltree,e.dyn_dtree)),ks(e),n&&xs(e)},Gl=(e,i,t)=>(e.pending_buf[e.sym_buf+e.sym_next++]=i,e.pending_buf[e.sym_buf+e.sym_next++]=i>>8,e.pending_buf[e.sym_buf+e.sym_next++]=t,i===0?e.dyn_ltree[t*2]++:(e.matches++,i--,e.dyn_ltree[(hi[t]+yi+1)*2]++,e.dyn_dtree[ws(i)*2]++),e.sym_next===e.sym_end);var Wl=jl,Yl=Ss,Kl=Vl,Xl=Gl,Jl=ql,Ql={_tr_init:Wl,_tr_stored_block:Yl,_tr_flush_block:Kl,_tr_tally:Xl,_tr_align:Jl};const ec=(e,i,t,n)=>{let r=e&65535|0,a=e>>>16&65535|0,o=0;for(;t!==0;){o=t>2e3?2e3:t,t-=o;do r=r+i[n++]|0,a=a+r|0;while(--o);r%=65521,a%=65521}return r|a<<16|0};var fi=ec;const tc=()=>{let e,i=[];for(var t=0;t<256;t++){e=t;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;i[t]=e}return i},ic=new Uint32Array(tc()),rc=(e,i,t,n)=>{const r=ic,a=n+t;e^=-1;for(let o=n;o<a;o++)e=e>>>8^r[(e^i[o])&255];return e^-1};var _e=rc,mt={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},ki={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:nc,_tr_stored_block:Nr,_tr_flush_block:ac,_tr_tally:Je,_tr_align:sc}=Ql,{Z_NO_FLUSH:Qe,Z_PARTIAL_FLUSH:oc,Z_FULL_FLUSH:lc,Z_FINISH:Pe,Z_BLOCK:aa,Z_OK:me,Z_STREAM_END:sa,Z_STREAM_ERROR:Be,Z_DATA_ERROR:cc,Z_BUF_ERROR:kr,Z_DEFAULT_COMPRESSION:hc,Z_FILTERED:dc,Z_HUFFMAN_ONLY:Mi,Z_RLE:fc,Z_FIXED:uc,Z_DEFAULT_STRATEGY:pc,Z_UNKNOWN:gc,Z_DEFLATED:lr}=ki,bc=9,_c=15,mc=8,wc=29,vc=256,Zr=vc+1+wc,yc=30,kc=19,xc=2*Zr+1,Sc=15,ee=3,Xe=258,Fe=Xe+ee+1,$c=32,Ot=42,Sn=57,Hr=69,jr=73,qr=91,Vr=103,ut=113,Jt=666,xe=1,zt=2,wt=3,It=4,Ac=3,pt=(e,i)=>(e.msg=mt[i],i),oa=e=>e*2-(e>4?9:0),Ke=e=>{let i=e.length;for(;--i>=0;)e[i]=0},Ec=e=>{let i,t,n,r=e.w_size;i=e.hash_size,n=i;do t=e.head[--n],e.head[n]=t>=r?t-r:0;while(--i);i=r,n=i;do t=e.prev[--n],e.prev[n]=t>=r?t-r:0;while(--i)};let Cc=(e,i,t)=>(i<<e.hash_shift^t)&e.hash_mask,et=Cc;const Ae=e=>{const i=e.state;let t=i.pending;t>e.avail_out&&(t=e.avail_out),t!==0&&(e.output.set(i.pending_buf.subarray(i.pending_out,i.pending_out+t),e.next_out),e.next_out+=t,i.pending_out+=t,e.total_out+=t,e.avail_out-=t,i.pending-=t,i.pending===0&&(i.pending_out=0))},Ee=(e,i)=>{ac(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,i),e.block_start=e.strstart,Ae(e.strm)},re=(e,i)=>{e.pending_buf[e.pending++]=i},Xt=(e,i)=>{e.pending_buf[e.pending++]=i>>>8&255,e.pending_buf[e.pending++]=i&255},Gr=(e,i,t,n)=>{let r=e.avail_in;return r>n&&(r=n),r===0?0:(e.avail_in-=r,i.set(e.input.subarray(e.next_in,e.next_in+r),t),e.state.wrap===1?e.adler=fi(e.adler,i,r,t):e.state.wrap===2&&(e.adler=_e(e.adler,i,r,t)),e.next_in+=r,e.total_in+=r,r)},$s=(e,i)=>{let t=e.max_chain_length,n=e.strstart,r,a,o=e.prev_length,l=e.nice_match;const f=e.strstart>e.w_size-Fe?e.strstart-(e.w_size-Fe):0,c=e.window,d=e.w_mask,$=e.prev,k=e.strstart+Xe;let v=c[n+o-1],C=c[n+o];e.prev_length>=e.good_match&&(t>>=2),l>e.lookahead&&(l=e.lookahead);do if(r=i,!(c[r+o]!==C||c[r+o-1]!==v||c[r]!==c[n]||c[++r]!==c[n+1])){n+=2,r++;do;while(c[++n]===c[++r]&&c[++n]===c[++r]&&c[++n]===c[++r]&&c[++n]===c[++r]&&c[++n]===c[++r]&&c[++n]===c[++r]&&c[++n]===c[++r]&&c[++n]===c[++r]&&n<k);if(a=Xe-(k-n),n=k-Xe,a>o){if(e.match_start=i,o=a,a>=l)break;v=c[n+o-1],C=c[n+o]}}while((i=$[i&d])>f&&--t!==0);return o<=e.lookahead?o:e.lookahead},Ut=e=>{const i=e.w_size;let t,n,r;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=i+(i-Fe)&&(e.window.set(e.window.subarray(i,i+i-n),0),e.match_start-=i,e.strstart-=i,e.block_start-=i,e.insert>e.strstart&&(e.insert=e.strstart),Ec(e),n+=i),e.strm.avail_in===0)break;if(t=Gr(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=t,e.lookahead+e.insert>=ee)for(r=e.strstart-e.insert,e.ins_h=e.window[r],e.ins_h=et(e,e.ins_h,e.window[r+1]);e.insert&&(e.ins_h=et(e,e.ins_h,e.window[r+ee-1]),e.prev[r&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=r,r++,e.insert--,!(e.lookahead+e.insert<ee)););}while(e.lookahead<Fe&&e.strm.avail_in!==0)},As=(e,i)=>{let t=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,n,r,a,o=0,l=e.strm.avail_in;do{if(n=65535,a=e.bi_valid+42>>3,e.strm.avail_out<a||(a=e.strm.avail_out-a,r=e.strstart-e.block_start,n>r+e.strm.avail_in&&(n=r+e.strm.avail_in),n>a&&(n=a),n<t&&(n===0&&i!==Pe||i===Qe||n!==r+e.strm.avail_in)))break;o=i===Pe&&n===r+e.strm.avail_in?1:0,Nr(e,0,0,o),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,Ae(e.strm),r&&(r>n&&(r=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+r),e.strm.next_out),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r,e.block_start+=r,n-=r),n&&(Gr(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(o===0);return l-=e.strm.avail_in,l&&(l>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=l&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-l,e.strm.next_in),e.strstart),e.strstart+=l,e.insert+=l>e.w_size-e.insert?e.w_size-e.insert:l),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),o?It:i!==Qe&&i!==Pe&&e.strm.avail_in===0&&e.strstart===e.block_start?zt:(a=e.window_size-e.strstart,e.strm.avail_in>a&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,a+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),a>e.strm.avail_in&&(a=e.strm.avail_in),a&&(Gr(e.strm,e.window,e.strstart,a),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.high_water<e.strstart&&(e.high_water=e.strstart),a=e.bi_valid+42>>3,a=e.pending_buf_size-a>65535?65535:e.pending_buf_size-a,t=a>e.w_size?e.w_size:a,r=e.strstart-e.block_start,(r>=t||(r||i===Pe)&&i!==Qe&&e.strm.avail_in===0&&r<=a)&&(n=r>a?a:r,o=i===Pe&&e.strm.avail_in===0&&n===r?1:0,Nr(e,e.block_start,n,o),e.block_start+=n,Ae(e.strm)),o?wt:xe)},xr=(e,i)=>{let t,n;for(;;){if(e.lookahead<Fe){if(Ut(e),e.lookahead<Fe&&i===Qe)return xe;if(e.lookahead===0)break}if(t=0,e.lookahead>=ee&&(e.ins_h=et(e,e.ins_h,e.window[e.strstart+ee-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),t!==0&&e.strstart-t<=e.w_size-Fe&&(e.match_length=$s(e,t)),e.match_length>=ee)if(n=Je(e,e.strstart-e.match_start,e.match_length-ee),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=ee){e.match_length--;do e.strstart++,e.ins_h=et(e,e.ins_h,e.window[e.strstart+ee-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=et(e,e.ins_h,e.window[e.strstart+1]);else n=Je(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(Ee(e,!1),e.strm.avail_out===0))return xe}return e.insert=e.strstart<ee-1?e.strstart:ee-1,i===Pe?(Ee(e,!0),e.strm.avail_out===0?wt:It):e.sym_next&&(Ee(e,!1),e.strm.avail_out===0)?xe:zt},St=(e,i)=>{let t,n,r;for(;;){if(e.lookahead<Fe){if(Ut(e),e.lookahead<Fe&&i===Qe)return xe;if(e.lookahead===0)break}if(t=0,e.lookahead>=ee&&(e.ins_h=et(e,e.ins_h,e.window[e.strstart+ee-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=ee-1,t!==0&&e.prev_length<e.max_lazy_match&&e.strstart-t<=e.w_size-Fe&&(e.match_length=$s(e,t),e.match_length<=5&&(e.strategy===dc||e.match_length===ee&&e.strstart-e.match_start>4096)&&(e.match_length=ee-1)),e.prev_length>=ee&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-ee,n=Je(e,e.strstart-1-e.prev_match,e.prev_length-ee),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=r&&(e.ins_h=et(e,e.ins_h,e.window[e.strstart+ee-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=ee-1,e.strstart++,n&&(Ee(e,!1),e.strm.avail_out===0))return xe}else if(e.match_available){if(n=Je(e,0,e.window[e.strstart-1]),n&&Ee(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return xe}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=Je(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<ee-1?e.strstart:ee-1,i===Pe?(Ee(e,!0),e.strm.avail_out===0?wt:It):e.sym_next&&(Ee(e,!1),e.strm.avail_out===0)?xe:zt},Tc=(e,i)=>{let t,n,r,a;const o=e.window;for(;;){if(e.lookahead<=Xe){if(Ut(e),e.lookahead<=Xe&&i===Qe)return xe;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=ee&&e.strstart>0&&(r=e.strstart-1,n=o[r],n===o[++r]&&n===o[++r]&&n===o[++r])){a=e.strstart+Xe;do;while(n===o[++r]&&n===o[++r]&&n===o[++r]&&n===o[++r]&&n===o[++r]&&n===o[++r]&&n===o[++r]&&n===o[++r]&&r<a);e.match_length=Xe-(a-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=ee?(t=Je(e,1,e.match_length-ee),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(t=Je(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),t&&(Ee(e,!1),e.strm.avail_out===0))return xe}return e.insert=0,i===Pe?(Ee(e,!0),e.strm.avail_out===0?wt:It):e.sym_next&&(Ee(e,!1),e.strm.avail_out===0)?xe:zt},Pc=(e,i)=>{let t;for(;;){if(e.lookahead===0&&(Ut(e),e.lookahead===0)){if(i===Qe)return xe;break}if(e.match_length=0,t=Je(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,t&&(Ee(e,!1),e.strm.avail_out===0))return xe}return e.insert=0,i===Pe?(Ee(e,!0),e.strm.avail_out===0?wt:It):e.sym_next&&(Ee(e,!1),e.strm.avail_out===0)?xe:zt};function Ie(e,i,t,n,r){this.good_length=e,this.max_lazy=i,this.nice_length=t,this.max_chain=n,this.func=r}const Qt=[new Ie(0,0,0,0,As),new Ie(4,4,8,4,xr),new Ie(4,5,16,8,xr),new Ie(4,6,32,32,xr),new Ie(4,4,16,16,St),new Ie(8,16,32,32,St),new Ie(8,16,128,128,St),new Ie(8,32,128,256,St),new Ie(32,128,258,1024,St),new Ie(32,258,258,4096,St)],Rc=e=>{e.window_size=2*e.w_size,Ke(e.head),e.max_lazy_match=Qt[e.level].max_lazy,e.good_match=Qt[e.level].good_length,e.nice_match=Qt[e.level].nice_length,e.max_chain_length=Qt[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=ee-1,e.match_available=0,e.ins_h=0};function Oc(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=lr,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(xc*2),this.dyn_dtree=new Uint16Array((2*yc+1)*2),this.bl_tree=new Uint16Array((2*kc+1)*2),Ke(this.dyn_ltree),Ke(this.dyn_dtree),Ke(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Sc+1),this.heap=new Uint16Array(2*Zr+1),Ke(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*Zr+1),Ke(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const xi=e=>{if(!e)return 1;const i=e.state;return!i||i.strm!==e||i.status!==Ot&&i.status!==Sn&&i.status!==Hr&&i.status!==jr&&i.status!==qr&&i.status!==Vr&&i.status!==ut&&i.status!==Jt?1:0},Es=e=>{if(xi(e))return pt(e,Be);e.total_in=e.total_out=0,e.data_type=gc;const i=e.state;return i.pending=0,i.pending_out=0,i.wrap<0&&(i.wrap=-i.wrap),i.status=i.wrap===2?Sn:i.wrap?Ot:ut,e.adler=i.wrap===2?0:1,i.last_flush=-2,nc(i),me},Cs=e=>{const i=Es(e);return i===me&&Rc(e.state),i},Uc=(e,i)=>xi(e)||e.state.wrap!==2?Be:(e.state.gzhead=i,me),Ts=(e,i,t,n,r,a)=>{if(!e)return Be;let o=1;if(i===hc&&(i=6),n<0?(o=0,n=-n):n>15&&(o=2,n-=16),r<1||r>bc||t!==lr||n<8||n>15||i<0||i>9||a<0||a>uc||n===8&&o!==1)return pt(e,Be);n===8&&(n=9);const l=new Oc;return e.state=l,l.strm=e,l.status=Ot,l.wrap=o,l.gzhead=null,l.w_bits=n,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=r+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+ee-1)/ee),l.window=new Uint8Array(l.w_size*2),l.head=new Uint16Array(l.hash_size),l.prev=new Uint16Array(l.w_size),l.lit_bufsize=1<<r+6,l.pending_buf_size=l.lit_bufsize*4,l.pending_buf=new Uint8Array(l.pending_buf_size),l.sym_buf=l.lit_bufsize,l.sym_end=(l.lit_bufsize-1)*3,l.level=i,l.strategy=a,l.method=t,Cs(e)},Dc=(e,i)=>Ts(e,i,lr,_c,mc,pc),zc=(e,i)=>{if(xi(e)||i>aa||i<0)return e?pt(e,Be):Be;const t=e.state;if(!e.output||e.avail_in!==0&&!e.input||t.status===Jt&&i!==Pe)return pt(e,e.avail_out===0?kr:Be);const n=t.last_flush;if(t.last_flush=i,t.pending!==0){if(Ae(e),e.avail_out===0)return t.last_flush=-1,me}else if(e.avail_in===0&&oa(i)<=oa(n)&&i!==Pe)return pt(e,kr);if(t.status===Jt&&e.avail_in!==0)return pt(e,kr);if(t.status===Ot&&t.wrap===0&&(t.status=ut),t.status===Ot){let r=lr+(t.w_bits-8<<4)<<8,a=-1;if(t.strategy>=Mi||t.level<2?a=0:t.level<6?a=1:t.level===6?a=2:a=3,r|=a<<6,t.strstart!==0&&(r|=$c),r+=31-r%31,Xt(t,r),t.strstart!==0&&(Xt(t,e.adler>>>16),Xt(t,e.adler&65535)),e.adler=1,t.status=ut,Ae(e),t.pending!==0)return t.last_flush=-1,me}if(t.status===Sn){if(e.adler=0,re(t,31),re(t,139),re(t,8),t.gzhead)re(t,(t.gzhead.text?1:0)+(t.gzhead.hcrc?2:0)+(t.gzhead.extra?4:0)+(t.gzhead.name?8:0)+(t.gzhead.comment?16:0)),re(t,t.gzhead.time&255),re(t,t.gzhead.time>>8&255),re(t,t.gzhead.time>>16&255),re(t,t.gzhead.time>>24&255),re(t,t.level===9?2:t.strategy>=Mi||t.level<2?4:0),re(t,t.gzhead.os&255),t.gzhead.extra&&t.gzhead.extra.length&&(re(t,t.gzhead.extra.length&255),re(t,t.gzhead.extra.length>>8&255)),t.gzhead.hcrc&&(e.adler=_e(e.adler,t.pending_buf,t.pending,0)),t.gzindex=0,t.status=Hr;else if(re(t,0),re(t,0),re(t,0),re(t,0),re(t,0),re(t,t.level===9?2:t.strategy>=Mi||t.level<2?4:0),re(t,Ac),t.status=ut,Ae(e),t.pending!==0)return t.last_flush=-1,me}if(t.status===Hr){if(t.gzhead.extra){let r=t.pending,a=(t.gzhead.extra.length&65535)-t.gzindex;for(;t.pending+a>t.pending_buf_size;){let l=t.pending_buf_size-t.pending;if(t.pending_buf.set(t.gzhead.extra.subarray(t.gzindex,t.gzindex+l),t.pending),t.pending=t.pending_buf_size,t.gzhead.hcrc&&t.pending>r&&(e.adler=_e(e.adler,t.pending_buf,t.pending-r,r)),t.gzindex+=l,Ae(e),t.pending!==0)return t.last_flush=-1,me;r=0,a-=l}let o=new Uint8Array(t.gzhead.extra);t.pending_buf.set(o.subarray(t.gzindex,t.gzindex+a),t.pending),t.pending+=a,t.gzhead.hcrc&&t.pending>r&&(e.adler=_e(e.adler,t.pending_buf,t.pending-r,r)),t.gzindex=0}t.status=jr}if(t.status===jr){if(t.gzhead.name){let r=t.pending,a;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>r&&(e.adler=_e(e.adler,t.pending_buf,t.pending-r,r)),Ae(e),t.pending!==0)return t.last_flush=-1,me;r=0}t.gzindex<t.gzhead.name.length?a=t.gzhead.name.charCodeAt(t.gzindex++)&255:a=0,re(t,a)}while(a!==0);t.gzhead.hcrc&&t.pending>r&&(e.adler=_e(e.adler,t.pending_buf,t.pending-r,r)),t.gzindex=0}t.status=qr}if(t.status===qr){if(t.gzhead.comment){let r=t.pending,a;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>r&&(e.adler=_e(e.adler,t.pending_buf,t.pending-r,r)),Ae(e),t.pending!==0)return t.last_flush=-1,me;r=0}t.gzindex<t.gzhead.comment.length?a=t.gzhead.comment.charCodeAt(t.gzindex++)&255:a=0,re(t,a)}while(a!==0);t.gzhead.hcrc&&t.pending>r&&(e.adler=_e(e.adler,t.pending_buf,t.pending-r,r))}t.status=Vr}if(t.status===Vr){if(t.gzhead.hcrc){if(t.pending+2>t.pending_buf_size&&(Ae(e),t.pending!==0))return t.last_flush=-1,me;re(t,e.adler&255),re(t,e.adler>>8&255),e.adler=0}if(t.status=ut,Ae(e),t.pending!==0)return t.last_flush=-1,me}if(e.avail_in!==0||t.lookahead!==0||i!==Qe&&t.status!==Jt){let r=t.level===0?As(t,i):t.strategy===Mi?Pc(t,i):t.strategy===fc?Tc(t,i):Qt[t.level].func(t,i);if((r===wt||r===It)&&(t.status=Jt),r===xe||r===wt)return e.avail_out===0&&(t.last_flush=-1),me;if(r===zt&&(i===oc?sc(t):i!==aa&&(Nr(t,0,0,!1),i===lc&&(Ke(t.head),t.lookahead===0&&(t.strstart=0,t.block_start=0,t.insert=0))),Ae(e),e.avail_out===0))return t.last_flush=-1,me}return i!==Pe?me:t.wrap<=0?sa:(t.wrap===2?(re(t,e.adler&255),re(t,e.adler>>8&255),re(t,e.adler>>16&255),re(t,e.adler>>24&255),re(t,e.total_in&255),re(t,e.total_in>>8&255),re(t,e.total_in>>16&255),re(t,e.total_in>>24&255)):(Xt(t,e.adler>>>16),Xt(t,e.adler&65535)),Ae(e),t.wrap>0&&(t.wrap=-t.wrap),t.pending!==0?me:sa)},Ic=e=>{if(xi(e))return Be;const i=e.state.status;return e.state=null,i===ut?pt(e,cc):me},Mc=(e,i)=>{let t=i.length;if(xi(e))return Be;const n=e.state,r=n.wrap;if(r===2||r===1&&n.status!==Ot||n.lookahead)return Be;if(r===1&&(e.adler=fi(e.adler,i,t,0)),n.wrap=0,t>=n.w_size){r===0&&(Ke(n.head),n.strstart=0,n.block_start=0,n.insert=0);let f=new Uint8Array(n.w_size);f.set(i.subarray(t-n.w_size,t),0),i=f,t=n.w_size}const a=e.avail_in,o=e.next_in,l=e.input;for(e.avail_in=t,e.next_in=0,e.input=i,Ut(n);n.lookahead>=ee;){let f=n.strstart,c=n.lookahead-(ee-1);do n.ins_h=et(n,n.ins_h,n.window[f+ee-1]),n.prev[f&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=f,f++;while(--c);n.strstart=f,n.lookahead=ee-1,Ut(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=ee-1,n.match_available=0,e.next_in=o,e.input=l,e.avail_in=a,n.wrap=r,me};var Lc=Dc,Bc=Ts,Fc=Cs,Nc=Es,Zc=Uc,Hc=zc,jc=Ic,qc=Mc,Vc="pako deflate (from Nodeca project)",ri={deflateInit:Lc,deflateInit2:Bc,deflateReset:Fc,deflateResetKeep:Nc,deflateSetHeader:Zc,deflate:Hc,deflateEnd:jc,deflateSetDictionary:qc,deflateInfo:Vc};const Gc=(e,i)=>Object.prototype.hasOwnProperty.call(e,i);var Wc=function(e){const i=Array.prototype.slice.call(arguments,1);for(;i.length;){const t=i.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const n in t)Gc(t,n)&&(e[n]=t[n])}}return e},Yc=e=>{let i=0;for(let n=0,r=e.length;n<r;n++)i+=e[n].length;const t=new Uint8Array(i);for(let n=0,r=0,a=e.length;n<a;n++){let o=e[n];t.set(o,r),r+=o.length}return t},cr={assign:Wc,flattenChunks:Yc};let Ps=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Ps=!1}const ui=new Uint8Array(256);for(let e=0;e<256;e++)ui[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;ui[254]=ui[254]=1;var Kc=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let i,t,n,r,a,o=e.length,l=0;for(r=0;r<o;r++)t=e.charCodeAt(r),(t&64512)===55296&&r+1<o&&(n=e.charCodeAt(r+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),r++)),l+=t<128?1:t<2048?2:t<65536?3:4;for(i=new Uint8Array(l),a=0,r=0;a<l;r++)t=e.charCodeAt(r),(t&64512)===55296&&r+1<o&&(n=e.charCodeAt(r+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),r++)),t<128?i[a++]=t:t<2048?(i[a++]=192|t>>>6,i[a++]=128|t&63):t<65536?(i[a++]=224|t>>>12,i[a++]=128|t>>>6&63,i[a++]=128|t&63):(i[a++]=240|t>>>18,i[a++]=128|t>>>12&63,i[a++]=128|t>>>6&63,i[a++]=128|t&63);return i};const Xc=(e,i)=>{if(i<65534&&e.subarray&&Ps)return String.fromCharCode.apply(null,e.length===i?e:e.subarray(0,i));let t="";for(let n=0;n<i;n++)t+=String.fromCharCode(e[n]);return t};var Jc=(e,i)=>{const t=i||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,i));let n,r;const a=new Array(t*2);for(r=0,n=0;n<t;){let o=e[n++];if(o<128){a[r++]=o;continue}let l=ui[o];if(l>4){a[r++]=65533,n+=l-1;continue}for(o&=l===2?31:l===3?15:7;l>1&&n<t;)o=o<<6|e[n++]&63,l--;if(l>1){a[r++]=65533;continue}o<65536?a[r++]=o:(o-=65536,a[r++]=55296|o>>10&1023,a[r++]=56320|o&1023)}return Xc(a,r)},Qc=(e,i)=>{i=i||e.length,i>e.length&&(i=e.length);let t=i-1;for(;t>=0&&(e[t]&192)===128;)t--;return t<0||t===0?i:t+ui[e[t]]>i?t:i},pi={string2buf:Kc,buf2string:Jc,utf8border:Qc};function eh(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Rs=eh;const Os=Object.prototype.toString,{Z_NO_FLUSH:th,Z_SYNC_FLUSH:ih,Z_FULL_FLUSH:rh,Z_FINISH:nh,Z_OK:Ji,Z_STREAM_END:ah,Z_DEFAULT_COMPRESSION:sh,Z_DEFAULT_STRATEGY:oh,Z_DEFLATED:lh}=ki;function Si(e){this.options=cr.assign({level:sh,method:lh,chunkSize:16384,windowBits:15,memLevel:8,strategy:oh},e||{});let i=this.options;i.raw&&i.windowBits>0?i.windowBits=-i.windowBits:i.gzip&&i.windowBits>0&&i.windowBits<16&&(i.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Rs,this.strm.avail_out=0;let t=ri.deflateInit2(this.strm,i.level,i.method,i.windowBits,i.memLevel,i.strategy);if(t!==Ji)throw new Error(mt[t]);if(i.header&&ri.deflateSetHeader(this.strm,i.header),i.dictionary){let n;if(typeof i.dictionary=="string"?n=pi.string2buf(i.dictionary):Os.call(i.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(i.dictionary):n=i.dictionary,t=ri.deflateSetDictionary(this.strm,n),t!==Ji)throw new Error(mt[t]);this._dict_set=!0}}Si.prototype.push=function(e,i){const t=this.strm,n=this.options.chunkSize;let r,a;if(this.ended)return!1;for(i===~~i?a=i:a=i===!0?nh:th,typeof e=="string"?t.input=pi.string2buf(e):Os.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;;){if(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),(a===ih||a===rh)&&t.avail_out<=6){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(r=ri.deflate(t,a),r===ah)return t.next_out>0&&this.onData(t.output.subarray(0,t.next_out)),r=ri.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===Ji;if(t.avail_out===0){this.onData(t.output);continue}if(a>0&&t.next_out>0){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(t.avail_in===0)break}return!0};Si.prototype.onData=function(e){this.chunks.push(e)};Si.prototype.onEnd=function(e){e===Ji&&(this.result=cr.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function $n(e,i){const t=new Si(i);if(t.push(e,!0),t.err)throw t.msg||mt[t.err];return t.result}function ch(e,i){return i=i||{},i.raw=!0,$n(e,i)}function hh(e,i){return i=i||{},i.gzip=!0,$n(e,i)}var dh=Si,fh=$n,uh=ch,ph=hh,gh={Deflate:dh,deflate:fh,deflateRaw:uh,gzip:ph};const Li=16209,bh=16191;var _h=function(i,t){let n,r,a,o,l,f,c,d,$,k,v,C,j,U,D,V,z,P,X,ce,O,te,G,I;const W=i.state;n=i.next_in,G=i.input,r=n+(i.avail_in-5),a=i.next_out,I=i.output,o=a-(t-i.avail_out),l=a+(i.avail_out-257),f=W.dmax,c=W.wsize,d=W.whave,$=W.wnext,k=W.window,v=W.hold,C=W.bits,j=W.lencode,U=W.distcode,D=(1<<W.lenbits)-1,V=(1<<W.distbits)-1;e:do{C<15&&(v+=G[n++]<<C,C+=8,v+=G[n++]<<C,C+=8),z=j[v&D];t:for(;;){if(P=z>>>24,v>>>=P,C-=P,P=z>>>16&255,P===0)I[a++]=z&65535;else if(P&16){X=z&65535,P&=15,P&&(C<P&&(v+=G[n++]<<C,C+=8),X+=v&(1<<P)-1,v>>>=P,C-=P),C<15&&(v+=G[n++]<<C,C+=8,v+=G[n++]<<C,C+=8),z=U[v&V];i:for(;;){if(P=z>>>24,v>>>=P,C-=P,P=z>>>16&255,P&16){if(ce=z&65535,P&=15,C<P&&(v+=G[n++]<<C,C+=8,C<P&&(v+=G[n++]<<C,C+=8)),ce+=v&(1<<P)-1,ce>f){i.msg="invalid distance too far back",W.mode=Li;break e}if(v>>>=P,C-=P,P=a-o,ce>P){if(P=ce-P,P>d&&W.sane){i.msg="invalid distance too far back",W.mode=Li;break e}if(O=0,te=k,$===0){if(O+=c-P,P<X){X-=P;do I[a++]=k[O++];while(--P);O=a-ce,te=I}}else if($<P){if(O+=c+$-P,P-=$,P<X){X-=P;do I[a++]=k[O++];while(--P);if(O=0,$<X){P=$,X-=P;do I[a++]=k[O++];while(--P);O=a-ce,te=I}}}else if(O+=$-P,P<X){X-=P;do I[a++]=k[O++];while(--P);O=a-ce,te=I}for(;X>2;)I[a++]=te[O++],I[a++]=te[O++],I[a++]=te[O++],X-=3;X&&(I[a++]=te[O++],X>1&&(I[a++]=te[O++]))}else{O=a-ce;do I[a++]=I[O++],I[a++]=I[O++],I[a++]=I[O++],X-=3;while(X>2);X&&(I[a++]=I[O++],X>1&&(I[a++]=I[O++]))}}else if((P&64)===0){z=U[(z&65535)+(v&(1<<P)-1)];continue i}else{i.msg="invalid distance code",W.mode=Li;break e}break}}else if((P&64)===0){z=j[(z&65535)+(v&(1<<P)-1)];continue t}else if(P&32){W.mode=bh;break e}else{i.msg="invalid literal/length code",W.mode=Li;break e}break}}while(n<r&&a<l);X=C>>3,n-=X,C-=X<<3,v&=(1<<C)-1,i.next_in=n,i.next_out=a,i.avail_in=n<r?5+(r-n):5-(n-r),i.avail_out=a<l?257+(l-a):257-(a-l),W.hold=v,W.bits=C};const $t=15,la=852,ca=592,ha=0,Sr=1,da=2,mh=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),wh=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),vh=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),yh=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),kh=(e,i,t,n,r,a,o,l)=>{const f=l.bits;let c=0,d=0,$=0,k=0,v=0,C=0,j=0,U=0,D=0,V=0,z,P,X,ce,O,te=null,G;const I=new Uint16Array($t+1),W=new Uint16Array($t+1);let $e=null,Ne,Oe,Ue;for(c=0;c<=$t;c++)I[c]=0;for(d=0;d<n;d++)I[i[t+d]]++;for(v=f,k=$t;k>=1&&I[k]===0;k--);if(v>k&&(v=k),k===0)return r[a++]=1<<24|64<<16|0,r[a++]=1<<24|64<<16|0,l.bits=1,0;for($=1;$<k&&I[$]===0;$++);for(v<$&&(v=$),U=1,c=1;c<=$t;c++)if(U<<=1,U-=I[c],U<0)return-1;if(U>0&&(e===ha||k!==1))return-1;for(W[1]=0,c=1;c<$t;c++)W[c+1]=W[c]+I[c];for(d=0;d<n;d++)i[t+d]!==0&&(o[W[i[t+d]]++]=d);if(e===ha?(te=$e=o,G=20):e===Sr?(te=mh,$e=wh,G=257):(te=vh,$e=yh,G=0),V=0,d=0,c=$,O=a,C=v,j=0,X=-1,D=1<<v,ce=D-1,e===Sr&&D>la||e===da&&D>ca)return 1;for(;;){Ne=c-j,o[d]+1<G?(Oe=0,Ue=o[d]):o[d]>=G?(Oe=$e[o[d]-G],Ue=te[o[d]-G]):(Oe=96,Ue=0),z=1<<c-j,P=1<<C,$=P;do P-=z,r[O+(V>>j)+P]=Ne<<24|Oe<<16|Ue|0;while(P!==0);for(z=1<<c-1;V&z;)z>>=1;if(z!==0?(V&=z-1,V+=z):V=0,d++,--I[c]===0){if(c===k)break;c=i[t+o[d]]}if(c>v&&(V&ce)!==X){for(j===0&&(j=v),O+=$,C=c-j,U=1<<C;C+j<k&&(U-=I[C+j],!(U<=0));)C++,U<<=1;if(D+=1<<C,e===Sr&&D>la||e===da&&D>ca)return 1;X=V&ce,r[X]=v<<24|C<<16|O-a|0}}return V!==0&&(r[O+V]=c-j<<24|64<<16|0),l.bits=v,0};var ni=kh;const xh=0,Us=1,Ds=2,{Z_FINISH:fa,Z_BLOCK:Sh,Z_TREES:Bi,Z_OK:vt,Z_STREAM_END:$h,Z_NEED_DICT:Ah,Z_STREAM_ERROR:Re,Z_DATA_ERROR:zs,Z_MEM_ERROR:Is,Z_BUF_ERROR:Eh,Z_DEFLATED:ua}=ki,hr=16180,pa=16181,ga=16182,ba=16183,_a=16184,ma=16185,wa=16186,va=16187,ya=16188,ka=16189,Qi=16190,Ze=16191,$r=16192,xa=16193,Ar=16194,Sa=16195,$a=16196,Aa=16197,Ea=16198,Fi=16199,Ni=16200,Ca=16201,Ta=16202,Pa=16203,Ra=16204,Oa=16205,Er=16206,Ua=16207,Da=16208,de=16209,Ms=16210,Ls=16211,Ch=852,Th=592,Ph=15,Rh=Ph,za=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function Oh(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const kt=e=>{if(!e)return 1;const i=e.state;return!i||i.strm!==e||i.mode<hr||i.mode>Ls?1:0},Bs=e=>{if(kt(e))return Re;const i=e.state;return e.total_in=e.total_out=i.total=0,e.msg="",i.wrap&&(e.adler=i.wrap&1),i.mode=hr,i.last=0,i.havedict=0,i.flags=-1,i.dmax=32768,i.head=null,i.hold=0,i.bits=0,i.lencode=i.lendyn=new Int32Array(Ch),i.distcode=i.distdyn=new Int32Array(Th),i.sane=1,i.back=-1,vt},Fs=e=>{if(kt(e))return Re;const i=e.state;return i.wsize=0,i.whave=0,i.wnext=0,Bs(e)},Ns=(e,i)=>{let t;if(kt(e))return Re;const n=e.state;return i<0?(t=0,i=-i):(t=(i>>4)+5,i<48&&(i&=15)),i&&(i<8||i>15)?Re:(n.window!==null&&n.wbits!==i&&(n.window=null),n.wrap=t,n.wbits=i,Fs(e))},Zs=(e,i)=>{if(!e)return Re;const t=new Oh;e.state=t,t.strm=e,t.window=null,t.mode=hr;const n=Ns(e,i);return n!==vt&&(e.state=null),n},Uh=e=>Zs(e,Rh);let Ia=!0,Cr,Tr;const Dh=e=>{if(Ia){Cr=new Int32Array(512),Tr=new Int32Array(32);let i=0;for(;i<144;)e.lens[i++]=8;for(;i<256;)e.lens[i++]=9;for(;i<280;)e.lens[i++]=7;for(;i<288;)e.lens[i++]=8;for(ni(Us,e.lens,0,288,Cr,0,e.work,{bits:9}),i=0;i<32;)e.lens[i++]=5;ni(Ds,e.lens,0,32,Tr,0,e.work,{bits:5}),Ia=!1}e.lencode=Cr,e.lenbits=9,e.distcode=Tr,e.distbits=5},Hs=(e,i,t,n)=>{let r;const a=e.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),n>=a.wsize?(a.window.set(i.subarray(t-a.wsize,t),0),a.wnext=0,a.whave=a.wsize):(r=a.wsize-a.wnext,r>n&&(r=n),a.window.set(i.subarray(t-n,t-n+r),a.wnext),n-=r,n?(a.window.set(i.subarray(t-n,t),0),a.wnext=n,a.whave=a.wsize):(a.wnext+=r,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=r))),0},zh=(e,i)=>{let t,n,r,a,o,l,f,c,d,$,k,v,C,j,U=0,D,V,z,P,X,ce,O,te;const G=new Uint8Array(4);let I,W;const $e=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(kt(e)||!e.output||!e.input&&e.avail_in!==0)return Re;t=e.state,t.mode===Ze&&(t.mode=$r),o=e.next_out,r=e.output,f=e.avail_out,a=e.next_in,n=e.input,l=e.avail_in,c=t.hold,d=t.bits,$=l,k=f,te=vt;e:for(;;)switch(t.mode){case hr:if(t.wrap===0){t.mode=$r;break}for(;d<16;){if(l===0)break e;l--,c+=n[a++]<<d,d+=8}if(t.wrap&2&&c===35615){t.wbits===0&&(t.wbits=15),t.check=0,G[0]=c&255,G[1]=c>>>8&255,t.check=_e(t.check,G,2,0),c=0,d=0,t.mode=pa;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((c&255)<<8)+(c>>8))%31){e.msg="incorrect header check",t.mode=de;break}if((c&15)!==ua){e.msg="unknown compression method",t.mode=de;break}if(c>>>=4,d-=4,O=(c&15)+8,t.wbits===0&&(t.wbits=O),O>15||O>t.wbits){e.msg="invalid window size",t.mode=de;break}t.dmax=1<<t.wbits,t.flags=0,e.adler=t.check=1,t.mode=c&512?ka:Ze,c=0,d=0;break;case pa:for(;d<16;){if(l===0)break e;l--,c+=n[a++]<<d,d+=8}if(t.flags=c,(t.flags&255)!==ua){e.msg="unknown compression method",t.mode=de;break}if(t.flags&57344){e.msg="unknown header flags set",t.mode=de;break}t.head&&(t.head.text=c>>8&1),t.flags&512&&t.wrap&4&&(G[0]=c&255,G[1]=c>>>8&255,t.check=_e(t.check,G,2,0)),c=0,d=0,t.mode=ga;case ga:for(;d<32;){if(l===0)break e;l--,c+=n[a++]<<d,d+=8}t.head&&(t.head.time=c),t.flags&512&&t.wrap&4&&(G[0]=c&255,G[1]=c>>>8&255,G[2]=c>>>16&255,G[3]=c>>>24&255,t.check=_e(t.check,G,4,0)),c=0,d=0,t.mode=ba;case ba:for(;d<16;){if(l===0)break e;l--,c+=n[a++]<<d,d+=8}t.head&&(t.head.xflags=c&255,t.head.os=c>>8),t.flags&512&&t.wrap&4&&(G[0]=c&255,G[1]=c>>>8&255,t.check=_e(t.check,G,2,0)),c=0,d=0,t.mode=_a;case _a:if(t.flags&1024){for(;d<16;){if(l===0)break e;l--,c+=n[a++]<<d,d+=8}t.length=c,t.head&&(t.head.extra_len=c),t.flags&512&&t.wrap&4&&(G[0]=c&255,G[1]=c>>>8&255,t.check=_e(t.check,G,2,0)),c=0,d=0}else t.head&&(t.head.extra=null);t.mode=ma;case ma:if(t.flags&1024&&(v=t.length,v>l&&(v=l),v&&(t.head&&(O=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(n.subarray(a,a+v),O)),t.flags&512&&t.wrap&4&&(t.check=_e(t.check,n,v,a)),l-=v,a+=v,t.length-=v),t.length))break e;t.length=0,t.mode=wa;case wa:if(t.flags&2048){if(l===0)break e;v=0;do O=n[a+v++],t.head&&O&&t.length<65536&&(t.head.name+=String.fromCharCode(O));while(O&&v<l);if(t.flags&512&&t.wrap&4&&(t.check=_e(t.check,n,v,a)),l-=v,a+=v,O)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=va;case va:if(t.flags&4096){if(l===0)break e;v=0;do O=n[a+v++],t.head&&O&&t.length<65536&&(t.head.comment+=String.fromCharCode(O));while(O&&v<l);if(t.flags&512&&t.wrap&4&&(t.check=_e(t.check,n,v,a)),l-=v,a+=v,O)break e}else t.head&&(t.head.comment=null);t.mode=ya;case ya:if(t.flags&512){for(;d<16;){if(l===0)break e;l--,c+=n[a++]<<d,d+=8}if(t.wrap&4&&c!==(t.check&65535)){e.msg="header crc mismatch",t.mode=de;break}c=0,d=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),e.adler=t.check=0,t.mode=Ze;break;case ka:for(;d<32;){if(l===0)break e;l--,c+=n[a++]<<d,d+=8}e.adler=t.check=za(c),c=0,d=0,t.mode=Qi;case Qi:if(t.havedict===0)return e.next_out=o,e.avail_out=f,e.next_in=a,e.avail_in=l,t.hold=c,t.bits=d,Ah;e.adler=t.check=1,t.mode=Ze;case Ze:if(i===Sh||i===Bi)break e;case $r:if(t.last){c>>>=d&7,d-=d&7,t.mode=Er;break}for(;d<3;){if(l===0)break e;l--,c+=n[a++]<<d,d+=8}switch(t.last=c&1,c>>>=1,d-=1,c&3){case 0:t.mode=xa;break;case 1:if(Dh(t),t.mode=Fi,i===Bi){c>>>=2,d-=2;break e}break;case 2:t.mode=$a;break;case 3:e.msg="invalid block type",t.mode=de}c>>>=2,d-=2;break;case xa:for(c>>>=d&7,d-=d&7;d<32;){if(l===0)break e;l--,c+=n[a++]<<d,d+=8}if((c&65535)!==(c>>>16^65535)){e.msg="invalid stored block lengths",t.mode=de;break}if(t.length=c&65535,c=0,d=0,t.mode=Ar,i===Bi)break e;case Ar:t.mode=Sa;case Sa:if(v=t.length,v){if(v>l&&(v=l),v>f&&(v=f),v===0)break e;r.set(n.subarray(a,a+v),o),l-=v,a+=v,f-=v,o+=v,t.length-=v;break}t.mode=Ze;break;case $a:for(;d<14;){if(l===0)break e;l--,c+=n[a++]<<d,d+=8}if(t.nlen=(c&31)+257,c>>>=5,d-=5,t.ndist=(c&31)+1,c>>>=5,d-=5,t.ncode=(c&15)+4,c>>>=4,d-=4,t.nlen>286||t.ndist>30){e.msg="too many length or distance symbols",t.mode=de;break}t.have=0,t.mode=Aa;case Aa:for(;t.have<t.ncode;){for(;d<3;){if(l===0)break e;l--,c+=n[a++]<<d,d+=8}t.lens[$e[t.have++]]=c&7,c>>>=3,d-=3}for(;t.have<19;)t.lens[$e[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,I={bits:t.lenbits},te=ni(xh,t.lens,0,19,t.lencode,0,t.work,I),t.lenbits=I.bits,te){e.msg="invalid code lengths set",t.mode=de;break}t.have=0,t.mode=Ea;case Ea:for(;t.have<t.nlen+t.ndist;){for(;U=t.lencode[c&(1<<t.lenbits)-1],D=U>>>24,V=U>>>16&255,z=U&65535,!(D<=d);){if(l===0)break e;l--,c+=n[a++]<<d,d+=8}if(z<16)c>>>=D,d-=D,t.lens[t.have++]=z;else{if(z===16){for(W=D+2;d<W;){if(l===0)break e;l--,c+=n[a++]<<d,d+=8}if(c>>>=D,d-=D,t.have===0){e.msg="invalid bit length repeat",t.mode=de;break}O=t.lens[t.have-1],v=3+(c&3),c>>>=2,d-=2}else if(z===17){for(W=D+3;d<W;){if(l===0)break e;l--,c+=n[a++]<<d,d+=8}c>>>=D,d-=D,O=0,v=3+(c&7),c>>>=3,d-=3}else{for(W=D+7;d<W;){if(l===0)break e;l--,c+=n[a++]<<d,d+=8}c>>>=D,d-=D,O=0,v=11+(c&127),c>>>=7,d-=7}if(t.have+v>t.nlen+t.ndist){e.msg="invalid bit length repeat",t.mode=de;break}for(;v--;)t.lens[t.have++]=O}}if(t.mode===de)break;if(t.lens[256]===0){e.msg="invalid code -- missing end-of-block",t.mode=de;break}if(t.lenbits=9,I={bits:t.lenbits},te=ni(Us,t.lens,0,t.nlen,t.lencode,0,t.work,I),t.lenbits=I.bits,te){e.msg="invalid literal/lengths set",t.mode=de;break}if(t.distbits=6,t.distcode=t.distdyn,I={bits:t.distbits},te=ni(Ds,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,I),t.distbits=I.bits,te){e.msg="invalid distances set",t.mode=de;break}if(t.mode=Fi,i===Bi)break e;case Fi:t.mode=Ni;case Ni:if(l>=6&&f>=258){e.next_out=o,e.avail_out=f,e.next_in=a,e.avail_in=l,t.hold=c,t.bits=d,_h(e,k),o=e.next_out,r=e.output,f=e.avail_out,a=e.next_in,n=e.input,l=e.avail_in,c=t.hold,d=t.bits,t.mode===Ze&&(t.back=-1);break}for(t.back=0;U=t.lencode[c&(1<<t.lenbits)-1],D=U>>>24,V=U>>>16&255,z=U&65535,!(D<=d);){if(l===0)break e;l--,c+=n[a++]<<d,d+=8}if(V&&(V&240)===0){for(P=D,X=V,ce=z;U=t.lencode[ce+((c&(1<<P+X)-1)>>P)],D=U>>>24,V=U>>>16&255,z=U&65535,!(P+D<=d);){if(l===0)break e;l--,c+=n[a++]<<d,d+=8}c>>>=P,d-=P,t.back+=P}if(c>>>=D,d-=D,t.back+=D,t.length=z,V===0){t.mode=Oa;break}if(V&32){t.back=-1,t.mode=Ze;break}if(V&64){e.msg="invalid literal/length code",t.mode=de;break}t.extra=V&15,t.mode=Ca;case Ca:if(t.extra){for(W=t.extra;d<W;){if(l===0)break e;l--,c+=n[a++]<<d,d+=8}t.length+=c&(1<<t.extra)-1,c>>>=t.extra,d-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=Ta;case Ta:for(;U=t.distcode[c&(1<<t.distbits)-1],D=U>>>24,V=U>>>16&255,z=U&65535,!(D<=d);){if(l===0)break e;l--,c+=n[a++]<<d,d+=8}if((V&240)===0){for(P=D,X=V,ce=z;U=t.distcode[ce+((c&(1<<P+X)-1)>>P)],D=U>>>24,V=U>>>16&255,z=U&65535,!(P+D<=d);){if(l===0)break e;l--,c+=n[a++]<<d,d+=8}c>>>=P,d-=P,t.back+=P}if(c>>>=D,d-=D,t.back+=D,V&64){e.msg="invalid distance code",t.mode=de;break}t.offset=z,t.extra=V&15,t.mode=Pa;case Pa:if(t.extra){for(W=t.extra;d<W;){if(l===0)break e;l--,c+=n[a++]<<d,d+=8}t.offset+=c&(1<<t.extra)-1,c>>>=t.extra,d-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){e.msg="invalid distance too far back",t.mode=de;break}t.mode=Ra;case Ra:if(f===0)break e;if(v=k-f,t.offset>v){if(v=t.offset-v,v>t.whave&&t.sane){e.msg="invalid distance too far back",t.mode=de;break}v>t.wnext?(v-=t.wnext,C=t.wsize-v):C=t.wnext-v,v>t.length&&(v=t.length),j=t.window}else j=r,C=o-t.offset,v=t.length;v>f&&(v=f),f-=v,t.length-=v;do r[o++]=j[C++];while(--v);t.length===0&&(t.mode=Ni);break;case Oa:if(f===0)break e;r[o++]=t.length,f--,t.mode=Ni;break;case Er:if(t.wrap){for(;d<32;){if(l===0)break e;l--,c|=n[a++]<<d,d+=8}if(k-=f,e.total_out+=k,t.total+=k,t.wrap&4&&k&&(e.adler=t.check=t.flags?_e(t.check,r,k,o-k):fi(t.check,r,k,o-k)),k=f,t.wrap&4&&(t.flags?c:za(c))!==t.check){e.msg="incorrect data check",t.mode=de;break}c=0,d=0}t.mode=Ua;case Ua:if(t.wrap&&t.flags){for(;d<32;){if(l===0)break e;l--,c+=n[a++]<<d,d+=8}if(t.wrap&4&&c!==(t.total&4294967295)){e.msg="incorrect length check",t.mode=de;break}c=0,d=0}t.mode=Da;case Da:te=$h;break e;case de:te=zs;break e;case Ms:return Is;case Ls:default:return Re}return e.next_out=o,e.avail_out=f,e.next_in=a,e.avail_in=l,t.hold=c,t.bits=d,(t.wsize||k!==e.avail_out&&t.mode<de&&(t.mode<Er||i!==fa))&&Hs(e,e.output,e.next_out,k-e.avail_out),$-=e.avail_in,k-=e.avail_out,e.total_in+=$,e.total_out+=k,t.total+=k,t.wrap&4&&k&&(e.adler=t.check=t.flags?_e(t.check,r,k,e.next_out-k):fi(t.check,r,k,e.next_out-k)),e.data_type=t.bits+(t.last?64:0)+(t.mode===Ze?128:0)+(t.mode===Fi||t.mode===Ar?256:0),($===0&&k===0||i===fa)&&te===vt&&(te=Eh),te},Ih=e=>{if(kt(e))return Re;let i=e.state;return i.window&&(i.window=null),e.state=null,vt},Mh=(e,i)=>{if(kt(e))return Re;const t=e.state;return(t.wrap&2)===0?Re:(t.head=i,i.done=!1,vt)},Lh=(e,i)=>{const t=i.length;let n,r,a;return kt(e)||(n=e.state,n.wrap!==0&&n.mode!==Qi)?Re:n.mode===Qi&&(r=1,r=fi(r,i,t,0),r!==n.check)?zs:(a=Hs(e,i,t,t),a?(n.mode=Ms,Is):(n.havedict=1,vt))};var Bh=Fs,Fh=Ns,Nh=Bs,Zh=Uh,Hh=Zs,jh=zh,qh=Ih,Vh=Mh,Gh=Lh,Wh="pako inflate (from Nodeca project)",je={inflateReset:Bh,inflateReset2:Fh,inflateResetKeep:Nh,inflateInit:Zh,inflateInit2:Hh,inflate:jh,inflateEnd:qh,inflateGetHeader:Vh,inflateSetDictionary:Gh,inflateInfo:Wh};function Yh(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Kh=Yh;const js=Object.prototype.toString,{Z_NO_FLUSH:Xh,Z_FINISH:Jh,Z_OK:gi,Z_STREAM_END:Pr,Z_NEED_DICT:Rr,Z_STREAM_ERROR:Qh,Z_DATA_ERROR:Ma,Z_MEM_ERROR:ed}=ki;function $i(e){this.options=cr.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const i=this.options;i.raw&&i.windowBits>=0&&i.windowBits<16&&(i.windowBits=-i.windowBits,i.windowBits===0&&(i.windowBits=-15)),i.windowBits>=0&&i.windowBits<16&&!(e&&e.windowBits)&&(i.windowBits+=32),i.windowBits>15&&i.windowBits<48&&(i.windowBits&15)===0&&(i.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Rs,this.strm.avail_out=0;let t=je.inflateInit2(this.strm,i.windowBits);if(t!==gi)throw new Error(mt[t]);if(this.header=new Kh,je.inflateGetHeader(this.strm,this.header),i.dictionary&&(typeof i.dictionary=="string"?i.dictionary=pi.string2buf(i.dictionary):js.call(i.dictionary)==="[object ArrayBuffer]"&&(i.dictionary=new Uint8Array(i.dictionary)),i.raw&&(t=je.inflateSetDictionary(this.strm,i.dictionary),t!==gi)))throw new Error(mt[t])}$i.prototype.push=function(e,i){const t=this.strm,n=this.options.chunkSize,r=this.options.dictionary;let a,o,l;if(this.ended)return!1;for(i===~~i?o=i:o=i===!0?Jh:Xh,js.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),a=je.inflate(t,o),a===Rr&&r&&(a=je.inflateSetDictionary(t,r),a===gi?a=je.inflate(t,o):a===Ma&&(a=Rr));t.avail_in>0&&a===Pr&&t.state.wrap>0&&e[t.next_in]!==0;)je.inflateReset(t),a=je.inflate(t,o);switch(a){case Qh:case Ma:case Rr:case ed:return this.onEnd(a),this.ended=!0,!1}if(l=t.avail_out,t.next_out&&(t.avail_out===0||a===Pr))if(this.options.to==="string"){let f=pi.utf8border(t.output,t.next_out),c=t.next_out-f,d=pi.buf2string(t.output,f);t.next_out=c,t.avail_out=n-c,c&&t.output.set(t.output.subarray(f,f+c),0),this.onData(d)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(a===gi&&l===0)){if(a===Pr)return a=je.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};$i.prototype.onData=function(e){this.chunks.push(e)};$i.prototype.onEnd=function(e){e===gi&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=cr.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function An(e,i){const t=new $i(i);if(t.push(e),t.err)throw t.msg||mt[t.err];return t.result}function td(e,i){return i=i||{},i.raw=!0,An(e,i)}var id=$i,rd=An,nd=td,ad=An,sd={Inflate:id,inflate:rd,inflateRaw:nd,ungzip:ad};const{Deflate:od,deflate:ld,deflateRaw:cd,gzip:hd}=gh,{Inflate:dd,inflate:fd,inflateRaw:ud,ungzip:pd}=sd;var gd=od,bd=ld,_d=cd,md=hd,wd=dd,vd=fd,yd=ud,kd=pd,xd=ki,Wr={Deflate:gd,deflate:bd,deflateRaw:_d,gzip:md,Inflate:wd,inflate:vd,inflateRaw:yd,ungzip:kd,constants:xd};const Sd=`/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */\r
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).pako={})}(this,(function(e){"use strict";var t=(e,t,i,n)=>{let a=65535&e|0,r=e>>>16&65535|0,o=0;for(;0!==i;){o=i>2e3?2e3:i,i-=o;do{a=a+t[n++]|0,r=r+a|0}while(--o);a%=65521,r%=65521}return a|r<<16|0};const i=new Uint32Array((()=>{let e,t=[];for(var i=0;i<256;i++){e=i;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[i]=e}return t})());var n=(e,t,n,a)=>{const r=i,o=a+n;e^=-1;for(let i=a;i<o;i++)e=e>>>8^r[255&(e^t[i])];return-1^e};const a=16209;var r=function(e,t){let i,n,r,o,s,l,d,f,c,h,u,w,b,m,k,_,g,p,v,x,y,E,R,A;const Z=e.state;i=e.next_in,R=e.input,n=i+(e.avail_in-5),r=e.next_out,A=e.output,o=r-(t-e.avail_out),s=r+(e.avail_out-257),l=Z.dmax,d=Z.wsize,f=Z.whave,c=Z.wnext,h=Z.window,u=Z.hold,w=Z.bits,b=Z.lencode,m=Z.distcode,k=(1<<Z.lenbits)-1,_=(1<<Z.distbits)-1;e:do{w<15&&(u+=R[i++]<<w,w+=8,u+=R[i++]<<w,w+=8),g=b[u&k];t:for(;;){if(p=g>>>24,u>>>=p,w-=p,p=g>>>16&255,0===p)A[r++]=65535&g;else{if(!(16&p)){if(0==(64&p)){g=b[(65535&g)+(u&(1<<p)-1)];continue t}if(32&p){Z.mode=16191;break e}e.msg="invalid literal/length code",Z.mode=a;break e}v=65535&g,p&=15,p&&(w<p&&(u+=R[i++]<<w,w+=8),v+=u&(1<<p)-1,u>>>=p,w-=p),w<15&&(u+=R[i++]<<w,w+=8,u+=R[i++]<<w,w+=8),g=m[u&_];i:for(;;){if(p=g>>>24,u>>>=p,w-=p,p=g>>>16&255,!(16&p)){if(0==(64&p)){g=m[(65535&g)+(u&(1<<p)-1)];continue i}e.msg="invalid distance code",Z.mode=a;break e}if(x=65535&g,p&=15,w<p&&(u+=R[i++]<<w,w+=8,w<p&&(u+=R[i++]<<w,w+=8)),x+=u&(1<<p)-1,x>l){e.msg="invalid distance too far back",Z.mode=a;break e}if(u>>>=p,w-=p,p=r-o,x>p){if(p=x-p,p>f&&Z.sane){e.msg="invalid distance too far back",Z.mode=a;break e}if(y=0,E=h,0===c){if(y+=d-p,p<v){v-=p;do{A[r++]=h[y++]}while(--p);y=r-x,E=A}}else if(c<p){if(y+=d+c-p,p-=c,p<v){v-=p;do{A[r++]=h[y++]}while(--p);if(y=0,c<v){p=c,v-=p;do{A[r++]=h[y++]}while(--p);y=r-x,E=A}}}else if(y+=c-p,p<v){v-=p;do{A[r++]=h[y++]}while(--p);y=r-x,E=A}for(;v>2;)A[r++]=E[y++],A[r++]=E[y++],A[r++]=E[y++],v-=3;v&&(A[r++]=E[y++],v>1&&(A[r++]=E[y++]))}else{y=r-x;do{A[r++]=A[y++],A[r++]=A[y++],A[r++]=A[y++],v-=3}while(v>2);v&&(A[r++]=A[y++],v>1&&(A[r++]=A[y++]))}break}}break}}while(i<n&&r<s);v=w>>3,i-=v,w-=v<<3,u&=(1<<w)-1,e.next_in=i,e.next_out=r,e.avail_in=i<n?n-i+5:5-(i-n),e.avail_out=r<s?s-r+257:257-(r-s),Z.hold=u,Z.bits=w};const o=15,s=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),l=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),d=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),f=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var c=(e,t,i,n,a,r,c,h)=>{const u=h.bits;let w,b,m,k,_,g,p=0,v=0,x=0,y=0,E=0,R=0,A=0,Z=0,S=0,T=0,O=null;const U=new Uint16Array(16),D=new Uint16Array(16);let I,B,N,C=null;for(p=0;p<=o;p++)U[p]=0;for(v=0;v<n;v++)U[t[i+v]]++;for(E=u,y=o;y>=1&&0===U[y];y--);if(E>y&&(E=y),0===y)return a[r++]=20971520,a[r++]=20971520,h.bits=1,0;for(x=1;x<y&&0===U[x];x++);for(E<x&&(E=x),Z=1,p=1;p<=o;p++)if(Z<<=1,Z-=U[p],Z<0)return-1;if(Z>0&&(0===e||1!==y))return-1;for(D[1]=0,p=1;p<o;p++)D[p+1]=D[p]+U[p];for(v=0;v<n;v++)0!==t[i+v]&&(c[D[t[i+v]]++]=v);if(0===e?(O=C=c,g=20):1===e?(O=s,C=l,g=257):(O=d,C=f,g=0),T=0,v=0,p=x,_=r,R=E,A=0,m=-1,S=1<<E,k=S-1,1===e&&S>852||2===e&&S>592)return 1;for(;;){I=p-A,c[v]+1<g?(B=0,N=c[v]):c[v]>=g?(B=C[c[v]-g],N=O[c[v]-g]):(B=96,N=0),w=1<<p-A,b=1<<R,x=b;do{b-=w,a[_+(T>>A)+b]=I<<24|B<<16|N|0}while(0!==b);for(w=1<<p-1;T&w;)w>>=1;if(0!==w?(T&=w-1,T+=w):T=0,v++,0==--U[p]){if(p===y)break;p=t[i+c[v]]}if(p>E&&(T&k)!==m){for(0===A&&(A=E),_+=x,R=p-A,Z=1<<R;R+A<y&&(Z-=U[R+A],!(Z<=0));)R++,Z<<=1;if(S+=1<<R,1===e&&S>852||2===e&&S>592)return 1;m=T&k,a[m]=E<<24|R<<16|_-r|0}}return 0!==T&&(a[_+T]=p-A<<24|64<<16|0),h.bits=E,0},h={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{Z_FINISH:u,Z_BLOCK:w,Z_TREES:b,Z_OK:m,Z_STREAM_END:k,Z_NEED_DICT:_,Z_STREAM_ERROR:g,Z_DATA_ERROR:p,Z_MEM_ERROR:v,Z_BUF_ERROR:x,Z_DEFLATED:y}=h,E=16180,R=16190,A=16191,Z=16192,S=16194,T=16199,O=16200,U=16206,D=16209,I=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function B(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const N=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<E||t.mode>16211?1:0},C=e=>{if(N(e))return g;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=E,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,m},z=e=>{if(N(e))return g;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,C(e)},F=(e,t)=>{let i;if(N(e))return g;const n=e.state;return t<0?(i=0,t=-t):(i=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?g:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=i,n.wbits=t,z(e))},L=(e,t)=>{if(!e)return g;const i=new B;e.state=i,i.strm=e,i.window=null,i.mode=E;const n=F(e,t);return n!==m&&(e.state=null),n};let M,H,j=!0;const K=e=>{if(j){M=new Int32Array(512),H=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(c(1,e.lens,0,288,M,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;c(2,e.lens,0,32,H,0,e.work,{bits:5}),j=!1}e.lencode=M,e.lenbits=9,e.distcode=H,e.distbits=5},P=(e,t,i,n)=>{let a;const r=e.state;return null===r.window&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new Uint8Array(r.wsize)),n>=r.wsize?(r.window.set(t.subarray(i-r.wsize,i),0),r.wnext=0,r.whave=r.wsize):(a=r.wsize-r.wnext,a>n&&(a=n),r.window.set(t.subarray(i-n,i-n+a),r.wnext),(n-=a)?(r.window.set(t.subarray(i-n,i),0),r.wnext=n,r.whave=r.wsize):(r.wnext+=a,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=a))),0};var Y={inflateReset:z,inflateReset2:F,inflateResetKeep:C,inflateInit:e=>L(e,15),inflateInit2:L,inflate:(e,i)=>{let a,o,s,l,d,f,h,B,C,z,F,L,M,H,j,Y,G,X,W,q,J,Q,V=0;const $=new Uint8Array(4);let ee,te;const ie=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(N(e)||!e.output||!e.input&&0!==e.avail_in)return g;a=e.state,a.mode===A&&(a.mode=Z),d=e.next_out,s=e.output,h=e.avail_out,l=e.next_in,o=e.input,f=e.avail_in,B=a.hold,C=a.bits,z=f,F=h,Q=m;e:for(;;)switch(a.mode){case E:if(0===a.wrap){a.mode=Z;break}for(;C<16;){if(0===f)break e;f--,B+=o[l++]<<C,C+=8}if(2&a.wrap&&35615===B){0===a.wbits&&(a.wbits=15),a.check=0,$[0]=255&B,$[1]=B>>>8&255,a.check=n(a.check,$,2,0),B=0,C=0,a.mode=16181;break}if(a.head&&(a.head.done=!1),!(1&a.wrap)||(((255&B)<<8)+(B>>8))%31){e.msg="incorrect header check",a.mode=D;break}if((15&B)!==y){e.msg="unknown compression method",a.mode=D;break}if(B>>>=4,C-=4,J=8+(15&B),0===a.wbits&&(a.wbits=J),J>15||J>a.wbits){e.msg="invalid window size",a.mode=D;break}a.dmax=1<<a.wbits,a.flags=0,e.adler=a.check=1,a.mode=512&B?16189:A,B=0,C=0;break;case 16181:for(;C<16;){if(0===f)break e;f--,B+=o[l++]<<C,C+=8}if(a.flags=B,(255&a.flags)!==y){e.msg="unknown compression method",a.mode=D;break}if(57344&a.flags){e.msg="unknown header flags set",a.mode=D;break}a.head&&(a.head.text=B>>8&1),512&a.flags&&4&a.wrap&&($[0]=255&B,$[1]=B>>>8&255,a.check=n(a.check,$,2,0)),B=0,C=0,a.mode=16182;case 16182:for(;C<32;){if(0===f)break e;f--,B+=o[l++]<<C,C+=8}a.head&&(a.head.time=B),512&a.flags&&4&a.wrap&&($[0]=255&B,$[1]=B>>>8&255,$[2]=B>>>16&255,$[3]=B>>>24&255,a.check=n(a.check,$,4,0)),B=0,C=0,a.mode=16183;case 16183:for(;C<16;){if(0===f)break e;f--,B+=o[l++]<<C,C+=8}a.head&&(a.head.xflags=255&B,a.head.os=B>>8),512&a.flags&&4&a.wrap&&($[0]=255&B,$[1]=B>>>8&255,a.check=n(a.check,$,2,0)),B=0,C=0,a.mode=16184;case 16184:if(1024&a.flags){for(;C<16;){if(0===f)break e;f--,B+=o[l++]<<C,C+=8}a.length=B,a.head&&(a.head.extra_len=B),512&a.flags&&4&a.wrap&&($[0]=255&B,$[1]=B>>>8&255,a.check=n(a.check,$,2,0)),B=0,C=0}else a.head&&(a.head.extra=null);a.mode=16185;case 16185:if(1024&a.flags&&(L=a.length,L>f&&(L=f),L&&(a.head&&(J=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Uint8Array(a.head.extra_len)),a.head.extra.set(o.subarray(l,l+L),J)),512&a.flags&&4&a.wrap&&(a.check=n(a.check,o,L,l)),f-=L,l+=L,a.length-=L),a.length))break e;a.length=0,a.mode=16186;case 16186:if(2048&a.flags){if(0===f)break e;L=0;do{J=o[l+L++],a.head&&J&&a.length<65536&&(a.head.name+=String.fromCharCode(J))}while(J&&L<f);if(512&a.flags&&4&a.wrap&&(a.check=n(a.check,o,L,l)),f-=L,l+=L,J)break e}else a.head&&(a.head.name=null);a.length=0,a.mode=16187;case 16187:if(4096&a.flags){if(0===f)break e;L=0;do{J=o[l+L++],a.head&&J&&a.length<65536&&(a.head.comment+=String.fromCharCode(J))}while(J&&L<f);if(512&a.flags&&4&a.wrap&&(a.check=n(a.check,o,L,l)),f-=L,l+=L,J)break e}else a.head&&(a.head.comment=null);a.mode=16188;case 16188:if(512&a.flags){for(;C<16;){if(0===f)break e;f--,B+=o[l++]<<C,C+=8}if(4&a.wrap&&B!==(65535&a.check)){e.msg="header crc mismatch",a.mode=D;break}B=0,C=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),e.adler=a.check=0,a.mode=A;break;case 16189:for(;C<32;){if(0===f)break e;f--,B+=o[l++]<<C,C+=8}e.adler=a.check=I(B),B=0,C=0,a.mode=R;case R:if(0===a.havedict)return e.next_out=d,e.avail_out=h,e.next_in=l,e.avail_in=f,a.hold=B,a.bits=C,_;e.adler=a.check=1,a.mode=A;case A:if(i===w||i===b)break e;case Z:if(a.last){B>>>=7&C,C-=7&C,a.mode=U;break}for(;C<3;){if(0===f)break e;f--,B+=o[l++]<<C,C+=8}switch(a.last=1&B,B>>>=1,C-=1,3&B){case 0:a.mode=16193;break;case 1:if(K(a),a.mode=T,i===b){B>>>=2,C-=2;break e}break;case 2:a.mode=16196;break;case 3:e.msg="invalid block type",a.mode=D}B>>>=2,C-=2;break;case 16193:for(B>>>=7&C,C-=7&C;C<32;){if(0===f)break e;f--,B+=o[l++]<<C,C+=8}if((65535&B)!=(B>>>16^65535)){e.msg="invalid stored block lengths",a.mode=D;break}if(a.length=65535&B,B=0,C=0,a.mode=S,i===b)break e;case S:a.mode=16195;case 16195:if(L=a.length,L){if(L>f&&(L=f),L>h&&(L=h),0===L)break e;s.set(o.subarray(l,l+L),d),f-=L,l+=L,h-=L,d+=L,a.length-=L;break}a.mode=A;break;case 16196:for(;C<14;){if(0===f)break e;f--,B+=o[l++]<<C,C+=8}if(a.nlen=257+(31&B),B>>>=5,C-=5,a.ndist=1+(31&B),B>>>=5,C-=5,a.ncode=4+(15&B),B>>>=4,C-=4,a.nlen>286||a.ndist>30){e.msg="too many length or distance symbols",a.mode=D;break}a.have=0,a.mode=16197;case 16197:for(;a.have<a.ncode;){for(;C<3;){if(0===f)break e;f--,B+=o[l++]<<C,C+=8}a.lens[ie[a.have++]]=7&B,B>>>=3,C-=3}for(;a.have<19;)a.lens[ie[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,ee={bits:a.lenbits},Q=c(0,a.lens,0,19,a.lencode,0,a.work,ee),a.lenbits=ee.bits,Q){e.msg="invalid code lengths set",a.mode=D;break}a.have=0,a.mode=16198;case 16198:for(;a.have<a.nlen+a.ndist;){for(;V=a.lencode[B&(1<<a.lenbits)-1],j=V>>>24,Y=V>>>16&255,G=65535&V,!(j<=C);){if(0===f)break e;f--,B+=o[l++]<<C,C+=8}if(G<16)B>>>=j,C-=j,a.lens[a.have++]=G;else{if(16===G){for(te=j+2;C<te;){if(0===f)break e;f--,B+=o[l++]<<C,C+=8}if(B>>>=j,C-=j,0===a.have){e.msg="invalid bit length repeat",a.mode=D;break}J=a.lens[a.have-1],L=3+(3&B),B>>>=2,C-=2}else if(17===G){for(te=j+3;C<te;){if(0===f)break e;f--,B+=o[l++]<<C,C+=8}B>>>=j,C-=j,J=0,L=3+(7&B),B>>>=3,C-=3}else{for(te=j+7;C<te;){if(0===f)break e;f--,B+=o[l++]<<C,C+=8}B>>>=j,C-=j,J=0,L=11+(127&B),B>>>=7,C-=7}if(a.have+L>a.nlen+a.ndist){e.msg="invalid bit length repeat",a.mode=D;break}for(;L--;)a.lens[a.have++]=J}}if(a.mode===D)break;if(0===a.lens[256]){e.msg="invalid code -- missing end-of-block",a.mode=D;break}if(a.lenbits=9,ee={bits:a.lenbits},Q=c(1,a.lens,0,a.nlen,a.lencode,0,a.work,ee),a.lenbits=ee.bits,Q){e.msg="invalid literal/lengths set",a.mode=D;break}if(a.distbits=6,a.distcode=a.distdyn,ee={bits:a.distbits},Q=c(2,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,ee),a.distbits=ee.bits,Q){e.msg="invalid distances set",a.mode=D;break}if(a.mode=T,i===b)break e;case T:a.mode=O;case O:if(f>=6&&h>=258){e.next_out=d,e.avail_out=h,e.next_in=l,e.avail_in=f,a.hold=B,a.bits=C,r(e,F),d=e.next_out,s=e.output,h=e.avail_out,l=e.next_in,o=e.input,f=e.avail_in,B=a.hold,C=a.bits,a.mode===A&&(a.back=-1);break}for(a.back=0;V=a.lencode[B&(1<<a.lenbits)-1],j=V>>>24,Y=V>>>16&255,G=65535&V,!(j<=C);){if(0===f)break e;f--,B+=o[l++]<<C,C+=8}if(Y&&0==(240&Y)){for(X=j,W=Y,q=G;V=a.lencode[q+((B&(1<<X+W)-1)>>X)],j=V>>>24,Y=V>>>16&255,G=65535&V,!(X+j<=C);){if(0===f)break e;f--,B+=o[l++]<<C,C+=8}B>>>=X,C-=X,a.back+=X}if(B>>>=j,C-=j,a.back+=j,a.length=G,0===Y){a.mode=16205;break}if(32&Y){a.back=-1,a.mode=A;break}if(64&Y){e.msg="invalid literal/length code",a.mode=D;break}a.extra=15&Y,a.mode=16201;case 16201:if(a.extra){for(te=a.extra;C<te;){if(0===f)break e;f--,B+=o[l++]<<C,C+=8}a.length+=B&(1<<a.extra)-1,B>>>=a.extra,C-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=16202;case 16202:for(;V=a.distcode[B&(1<<a.distbits)-1],j=V>>>24,Y=V>>>16&255,G=65535&V,!(j<=C);){if(0===f)break e;f--,B+=o[l++]<<C,C+=8}if(0==(240&Y)){for(X=j,W=Y,q=G;V=a.distcode[q+((B&(1<<X+W)-1)>>X)],j=V>>>24,Y=V>>>16&255,G=65535&V,!(X+j<=C);){if(0===f)break e;f--,B+=o[l++]<<C,C+=8}B>>>=X,C-=X,a.back+=X}if(B>>>=j,C-=j,a.back+=j,64&Y){e.msg="invalid distance code",a.mode=D;break}a.offset=G,a.extra=15&Y,a.mode=16203;case 16203:if(a.extra){for(te=a.extra;C<te;){if(0===f)break e;f--,B+=o[l++]<<C,C+=8}a.offset+=B&(1<<a.extra)-1,B>>>=a.extra,C-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){e.msg="invalid distance too far back",a.mode=D;break}a.mode=16204;case 16204:if(0===h)break e;if(L=F-h,a.offset>L){if(L=a.offset-L,L>a.whave&&a.sane){e.msg="invalid distance too far back",a.mode=D;break}L>a.wnext?(L-=a.wnext,M=a.wsize-L):M=a.wnext-L,L>a.length&&(L=a.length),H=a.window}else H=s,M=d-a.offset,L=a.length;L>h&&(L=h),h-=L,a.length-=L;do{s[d++]=H[M++]}while(--L);0===a.length&&(a.mode=O);break;case 16205:if(0===h)break e;s[d++]=a.length,h--,a.mode=O;break;case U:if(a.wrap){for(;C<32;){if(0===f)break e;f--,B|=o[l++]<<C,C+=8}if(F-=h,e.total_out+=F,a.total+=F,4&a.wrap&&F&&(e.adler=a.check=a.flags?n(a.check,s,F,d-F):t(a.check,s,F,d-F)),F=h,4&a.wrap&&(a.flags?B:I(B))!==a.check){e.msg="incorrect data check",a.mode=D;break}B=0,C=0}a.mode=16207;case 16207:if(a.wrap&&a.flags){for(;C<32;){if(0===f)break e;f--,B+=o[l++]<<C,C+=8}if(4&a.wrap&&B!==(4294967295&a.total)){e.msg="incorrect length check",a.mode=D;break}B=0,C=0}a.mode=16208;case 16208:Q=k;break e;case D:Q=p;break e;case 16210:return v;default:return g}return e.next_out=d,e.avail_out=h,e.next_in=l,e.avail_in=f,a.hold=B,a.bits=C,(a.wsize||F!==e.avail_out&&a.mode<D&&(a.mode<U||i!==u))&&P(e,e.output,e.next_out,F-e.avail_out),z-=e.avail_in,F-=e.avail_out,e.total_in+=z,e.total_out+=F,a.total+=F,4&a.wrap&&F&&(e.adler=a.check=a.flags?n(a.check,s,F,e.next_out-F):t(a.check,s,F,e.next_out-F)),e.data_type=a.bits+(a.last?64:0)+(a.mode===A?128:0)+(a.mode===T||a.mode===S?256:0),(0===z&&0===F||i===u)&&Q===m&&(Q=x),Q},inflateEnd:e=>{if(N(e))return g;let t=e.state;return t.window&&(t.window=null),e.state=null,m},inflateGetHeader:(e,t)=>{if(N(e))return g;const i=e.state;return 0==(2&i.wrap)?g:(i.head=t,t.done=!1,m)},inflateSetDictionary:(e,i)=>{const n=i.length;let a,r,o;return N(e)?g:(a=e.state,0!==a.wrap&&a.mode!==R?g:a.mode===R&&(r=1,r=t(r,i,n,0),r!==a.check)?p:(o=P(e,i,n,n),o?(a.mode=16210,v):(a.havedict=1,m)))},inflateInfo:"pako inflate (from Nodeca project)"};const G=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var X=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const i=t.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(const t in i)G(i,t)&&(e[t]=i[t])}}return e},W=e=>{let t=0;for(let i=0,n=e.length;i<n;i++)t+=e[i].length;const i=new Uint8Array(t);for(let t=0,n=0,a=e.length;t<a;t++){let a=e[t];i.set(a,n),n+=a.length}return i};let q=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){q=!1}const J=new Uint8Array(256);for(let e=0;e<256;e++)J[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;J[254]=J[254]=1;var Q=e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,i,n,a,r,o=e.length,s=0;for(a=0;a<o;a++)i=e.charCodeAt(a),55296==(64512&i)&&a+1<o&&(n=e.charCodeAt(a+1),56320==(64512&n)&&(i=65536+(i-55296<<10)+(n-56320),a++)),s+=i<128?1:i<2048?2:i<65536?3:4;for(t=new Uint8Array(s),r=0,a=0;r<s;a++)i=e.charCodeAt(a),55296==(64512&i)&&a+1<o&&(n=e.charCodeAt(a+1),56320==(64512&n)&&(i=65536+(i-55296<<10)+(n-56320),a++)),i<128?t[r++]=i:i<2048?(t[r++]=192|i>>>6,t[r++]=128|63&i):i<65536?(t[r++]=224|i>>>12,t[r++]=128|i>>>6&63,t[r++]=128|63&i):(t[r++]=240|i>>>18,t[r++]=128|i>>>12&63,t[r++]=128|i>>>6&63,t[r++]=128|63&i);return t},V=(e,t)=>{const i=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let n,a;const r=new Array(2*i);for(a=0,n=0;n<i;){let t=e[n++];if(t<128){r[a++]=t;continue}let o=J[t];if(o>4)r[a++]=65533,n+=o-1;else{for(t&=2===o?31:3===o?15:7;o>1&&n<i;)t=t<<6|63&e[n++],o--;o>1?r[a++]=65533:t<65536?r[a++]=t:(t-=65536,r[a++]=55296|t>>10&1023,r[a++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&q)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let i="";for(let n=0;n<t;n++)i+=String.fromCharCode(e[n]);return i})(r,a)},$=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let i=t-1;for(;i>=0&&128==(192&e[i]);)i--;return i<0||0===i?t:i+J[e[i]]>t?i:t},ee={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};var te=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};var ie=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const ne=Object.prototype.toString,{Z_NO_FLUSH:ae,Z_FINISH:re,Z_OK:oe,Z_STREAM_END:se,Z_NEED_DICT:le,Z_STREAM_ERROR:de,Z_DATA_ERROR:fe,Z_MEM_ERROR:ce}=h;function he(e){this.options=X({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new te,this.strm.avail_out=0;let i=Y.inflateInit2(this.strm,t.windowBits);if(i!==oe)throw new Error(ee[i]);if(this.header=new ie,Y.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=Q(t.dictionary):"[object ArrayBuffer]"===ne.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(i=Y.inflateSetDictionary(this.strm,t.dictionary),i!==oe)))throw new Error(ee[i])}function ue(e,t){const i=new he(t);if(i.push(e),i.err)throw i.msg||ee[i.err];return i.result}he.prototype.push=function(e,t){const i=this.strm,n=this.options.chunkSize,a=this.options.dictionary;let r,o,s;if(this.ended)return!1;for(o=t===~~t?t:!0===t?re:ae,"[object ArrayBuffer]"===ne.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;;){for(0===i.avail_out&&(i.output=new Uint8Array(n),i.next_out=0,i.avail_out=n),r=Y.inflate(i,o),r===le&&a&&(r=Y.inflateSetDictionary(i,a),r===oe?r=Y.inflate(i,o):r===fe&&(r=le));i.avail_in>0&&r===se&&i.state.wrap>0&&0!==e[i.next_in];)Y.inflateReset(i),r=Y.inflate(i,o);switch(r){case de:case fe:case le:case ce:return this.onEnd(r),this.ended=!0,!1}if(s=i.avail_out,i.next_out&&(0===i.avail_out||r===se))if("string"===this.options.to){let e=$(i.output,i.next_out),t=i.next_out-e,a=V(i.output,e);i.next_out=t,i.avail_out=n-t,t&&i.output.set(i.output.subarray(e,e+t),0),this.onData(a)}else this.onData(i.output.length===i.next_out?i.output:i.output.subarray(0,i.next_out));if(r!==oe||0!==s){if(r===se)return r=Y.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,!0;if(0===i.avail_in)break}}return!0},he.prototype.onData=function(e){this.chunks.push(e)},he.prototype.onEnd=function(e){e===oe&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=W(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var we=he,be=ue,me=function(e,t){return(t=t||{}).raw=!0,ue(e,t)},ke=ue,_e=h,ge={Inflate:we,inflate:be,inflateRaw:me,ungzip:ke,constants:_e};e.Inflate=we,e.constants=_e,e.default=ge,e.inflate=be,e.inflateRaw=me,e.ungzip=ke,Object.defineProperty(e,"__esModule",{value:!0})}));\r
`;var $d=Object.getOwnPropertyDescriptor,Ad=(e,i,t,n)=>{for(var r=n>1?void 0:n?$d(i,t):i,a=e.length-1,o;a>=0;a--)(o=e[a])&&(r=o(r)||r);return r};let Yr=class{constructor(){}async pack(e){const i=e.name.replace(/\.html?$/i,""),t=await e.text(),n=Wr.deflate(t),r=this._arrayBufferToBase64(n),a='<!DOCTYPE html><html><head><meta charset="utf-8"><title>'+i+" (Packed)</title></head><body><script>"+Sd+`<\/script><script>// Loader logic
const b64 = "`+r+`";
function b64ToUint8Array(b64) {
  const bin = atob(b64);
  const arr = new Uint8Array(bin.length);
  for (let i = 0; i < bin.length; i++) arr[i] = bin.charCodeAt(i);
  return arr;
}
(function() {
  const compressed = b64ToUint8Array(b64);
  const html = window.pako.inflate(compressed, { to: 'string' });
  document.open();
  document.write(html);
  document.close();
})();
<\/script></body></html>`;return{fileName:`${i}-packed.html`,html:a}}_arrayBufferToBase64(e){let i="";const t=new Uint8Array(e),n=t.byteLength;for(let r=0;r<n;r++)i+=String.fromCharCode(t[r]);return btoa(i)}};Yr=Ad([nr()],Yr);var Ed=Object.defineProperty,Cd=Object.getOwnPropertyDescriptor,qs=(e,i,t,n)=>{for(var r=n>1?void 0:n?Cd(i,t):i,a=e.length-1,o;a>=0;a--)(o=e[a])&&(r=(n?o(i,t,r):o(r))||r);return n&&r&&Ed(i,t,r),r};let Kr=class extends ge{constructor(){super(...arguments),this.dragActive=!1,this.loadedFile=null,this.packedFileName=null,this.packedHtml=null,this.packedSize=null,this.compressionInfo=null,this._downloadPacked=()=>{if(!this.packedHtml||!this.packedFileName)return;const e=new Blob([this.packedHtml],{type:"text/html"}),i=URL.createObjectURL(e),t=document.createElement("a");t.href=i,t.download=this.packedFileName,document.body.appendChild(t),t.click(),setTimeout(()=>{document.body.removeChild(t),URL.revokeObjectURL(i)},100)}}render(){return B`
      <div class="imba-packer-page">
        <div style="margin-bottom:1.5rem">
          <strong>Imba Packer (Experimental)</strong><br />
          <div style="margin: 0.5em 0 1em 0; font-size: 0.97em; color: #555;">
            Imba Packer optimizes and compresses HTML files for playable ads and similar use cases.<br />
            <ul style="margin:0.5em 0 0.5em 1.2em; padding:0;">
              <li>Upload or drop an HTML file below.</li>
              <li>The file will be processed and minified to reduce its size.</li>
              <li>Download the packed HTML and view compression statistics.</li>
              <li>All original functionality is preserved as much as possible.</li>
            </ul>
            <span style="color:#a00">Experimental: results may vary depending on input file.</span>
          </div>
          <small>
            Drop your file below or select it manually.
          </small>
        </div>
        ${this.loadedFile?B`
              <div class="file-loaded-info">
                <strong>File loaded:</strong> ${this.loadedFile.name}
                (${(this.loadedFile.size/1024).toFixed(2)} KB)
                <button style="margin-left:1em" @click=${this._resetFile}>Cancel</button>
              </div>
              ${this.packedFileName&&this.packedHtml&&this.packedSize&&this.compressionInfo?B`
                <div class="packed-info" style="margin-top:1em;">
                  <div><strong>Packed file:</strong> ${this.packedFileName}</div>
                  <div><strong>Original size:</strong> ${(this.loadedFile.size/1024).toFixed(2)} KB</div>
                  <div><strong>Packed size:</strong> ${(this.packedSize/1024).toFixed(2)} KB</div>
                  <div><strong>Difference:</strong> ${(this.compressionInfo.diff/1024).toFixed(2)} KB</div>
                  <div><strong>Compression rate:</strong> ${this.compressionInfo.percent.toFixed(1)}%</div>
                  <button style="margin-top:0.7em" @click=${this._downloadPacked}>Download packed file</button>
                </div>
              `:B`<div style="margin-top:1em;">Packing...</div>`}
            `:B`
              <div
                class="dropzone ${this.dragActive?"dragover":""}"
                @dragover=${this._onDragOver}
                @dragleave=${this._onDragLeave}
                @drop=${this._onDrop}
              >
                <p>Drop your file here or</p>
                <label class="file-select-button">
                  Select file
                  <input
                    type="file"
                    @change=${this._onFileChange}
                  />
                </label>
              </div>
            `}
      </div>
    `}_onDragOver(e){e.preventDefault(),this.dragActive=!0,this.requestUpdate()}_onDragLeave(e){e.preventDefault(),this.dragActive=!1,this.requestUpdate()}_onDrop(e){e.preventDefault(),this.dragActive=!1,this.requestUpdate();const i=e.dataTransfer?.files;i&&i.length&&this._processFile(i[0])}_onFileChange(e){const t=e.target.files?.[0];t&&this._processFile(t)}async _processFile(e){if(!e.name.match(/\.html?$/i)){alert("Please select a valid .html file.");return}this.loadedFile=e,this.packedFileName=null,this.packedHtml=null,this.packedSize=null,this.compressionInfo=null,this.requestUpdate();try{const{fileName:t,html:n}=await this.imbaPackerService.pack(e);this.packedFileName=t,this.packedHtml=n,this.packedSize=new Blob([n],{type:"text/html"}).size;const r=this.loadedFile.size-this.packedSize,a=r/this.loadedFile.size*100;this.compressionInfo={diff:r,percent:a},this.requestUpdate()}catch(t){alert("Packing failed: "+(t instanceof Error?t.message:t))}const i=new CustomEvent("file-selected",{detail:e});this.dispatchEvent(i)}_resetFile(){this.loadedFile=null,this.packedFileName=null,this.packedHtml=null,this.packedSize=null,this.compressionInfo=null,this.requestUpdate()}};qs([_i(Yr)],Kr.prototype,"imbaPackerService",2);Kr=qs([we("imba-packer-page"),rt("/imba-packer")],Kr);var Td=Object.getOwnPropertyDescriptor,Pd=(e,i,t,n)=>{for(var r=n>1?void 0:n?Td(i,t):i,a=e.length-1,o;a>=0;a--)(o=e[a])&&(r=o(r)||r);return r};let er=class{getShareableLink(e,i,t){const n=new URLSearchParams({adId:e,size:i,orientation:t});return`${window.location.origin}/preview?${n.toString()}`}encodeUrl(e){const i=Wr.deflate(e),t=String.fromCharCode(...Array.from(i));return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}decodeUrl(e){let i=e.replace(/-/g,"+").replace(/_/g,"/");for(;i.length%4;)i+="=";const t=atob(i),n=new Uint8Array([...t].map(r=>r.charCodeAt(0)));try{return Wr.inflate(n,{to:"string"})}catch(r){return String(r)}}githubToRawUrl(e){const i=e.match(/^https:\/\/github\.com\/([^\/]+)\/([^\/]+)\/blob\/([^\/]+)\/(.+)$/);if(!i)return null;const[,t,n,r,a]=i;return`https://raw.githubusercontent.com/${t}/${n}/refs/heads/${r}/${a}`}async fetchRawContent(e){const i=await fetch(e);if(!i.ok)throw new Error(`Failed to fetch: ${i.status}`);return await i.text()}};er=Pd([nr()],er);/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */(function(e,i){typeof exports=="object"&&typeof module<"u"?i(exports):typeof define=="function"&&define.amd?define(["exports"],i):i((e=typeof globalThis<"u"?globalThis:e||self).pako={})})(void 0,function(e){var i=(h,u,s,g)=>{let _=65535&h|0,p=h>>>16&65535|0,A=0;for(;s!==0;){A=s>2e3?2e3:s,s-=A;do _=_+u[g++]|0,p=p+_|0;while(--A);_%=65521,p%=65521}return _|p<<16|0};const t=new Uint32Array((()=>{let h,u=[];for(var s=0;s<256;s++){h=s;for(var g=0;g<8;g++)h=1&h?3988292384^h>>>1:h>>>1;u[s]=h}return u})());var n=(h,u,s,g)=>{const _=t,p=g+s;h^=-1;for(let A=g;A<p;A++)h=h>>>8^_[255&(h^u[A])];return-1^h};const r=16209;var a=function(h,u){let s,g,_,p,A,S,M,w,y,be,Z,E,ve,ie,N,se,K,R,Q,he,L,ne,Y,q;const J=h.state;s=h.next_in,Y=h.input,g=s+(h.avail_in-5),_=h.next_out,q=h.output,p=_-(u-h.avail_out),A=_+(h.avail_out-257),S=J.dmax,M=J.wsize,w=J.whave,y=J.wnext,be=J.window,Z=J.hold,E=J.bits,ve=J.lencode,ie=J.distcode,N=(1<<J.lenbits)-1,se=(1<<J.distbits)-1;e:do{E<15&&(Z+=Y[s++]<<E,E+=8,Z+=Y[s++]<<E,E+=8),K=ve[Z&N];t:for(;;){if(R=K>>>24,Z>>>=R,E-=R,R=K>>>16&255,R===0)q[_++]=65535&K;else{if(!(16&R)){if((64&R)==0){K=ve[(65535&K)+(Z&(1<<R)-1)];continue t}if(32&R){J.mode=16191;break e}h.msg="invalid literal/length code",J.mode=r;break e}Q=65535&K,R&=15,R&&(E<R&&(Z+=Y[s++]<<E,E+=8),Q+=Z&(1<<R)-1,Z>>>=R,E-=R),E<15&&(Z+=Y[s++]<<E,E+=8,Z+=Y[s++]<<E,E+=8),K=ie[Z&se];i:for(;;){if(R=K>>>24,Z>>>=R,E-=R,R=K>>>16&255,!(16&R)){if((64&R)==0){K=ie[(65535&K)+(Z&(1<<R)-1)];continue i}h.msg="invalid distance code",J.mode=r;break e}if(he=65535&K,R&=15,E<R&&(Z+=Y[s++]<<E,E+=8,E<R&&(Z+=Y[s++]<<E,E+=8)),he+=Z&(1<<R)-1,he>S){h.msg="invalid distance too far back",J.mode=r;break e}if(Z>>>=R,E-=R,R=_-p,he>R){if(R=he-R,R>w&&J.sane){h.msg="invalid distance too far back",J.mode=r;break e}if(L=0,ne=be,y===0){if(L+=M-R,R<Q){Q-=R;do q[_++]=be[L++];while(--R);L=_-he,ne=q}}else if(y<R){if(L+=M+y-R,R-=y,R<Q){Q-=R;do q[_++]=be[L++];while(--R);if(L=0,y<Q){R=y,Q-=R;do q[_++]=be[L++];while(--R);L=_-he,ne=q}}}else if(L+=y-R,R<Q){Q-=R;do q[_++]=be[L++];while(--R);L=_-he,ne=q}for(;Q>2;)q[_++]=ne[L++],q[_++]=ne[L++],q[_++]=ne[L++],Q-=3;Q&&(q[_++]=ne[L++],Q>1&&(q[_++]=ne[L++]))}else{L=_-he;do q[_++]=q[L++],q[_++]=q[L++],q[_++]=q[L++],Q-=3;while(Q>2);Q&&(q[_++]=q[L++],Q>1&&(q[_++]=q[L++]))}break}}break}}while(s<g&&_<A);Q=E>>3,s-=Q,E-=Q<<3,Z&=(1<<E)-1,h.next_in=s,h.next_out=_,h.avail_in=s<g?g-s+5:5-(s-g),h.avail_out=_<A?A-_+257:257-(_-A),J.hold=Z,J.bits=E};const o=15,l=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),f=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),c=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),d=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var $=(h,u,s,g,_,p,A,S)=>{const M=S.bits;let w,y,be,Z,E,ve,ie=0,N=0,se=0,K=0,R=0,Q=0,he=0,L=0,ne=0,Y=0,q=null;const J=new Uint16Array(16),ye=new Uint16Array(16);let Gt,Ui,Di,zi=null;for(ie=0;ie<=o;ie++)J[ie]=0;for(N=0;N<g;N++)J[u[s+N]]++;for(R=M,K=o;K>=1&&J[K]===0;K--);if(R>K&&(R=K),K===0)return _[p++]=20971520,_[p++]=20971520,S.bits=1,0;for(se=1;se<K&&J[se]===0;se++);for(R<se&&(R=se),L=1,ie=1;ie<=o;ie++)if(L<<=1,L-=J[ie],L<0)return-1;if(L>0&&(h===0||K!==1))return-1;for(ye[1]=0,ie=1;ie<o;ie++)ye[ie+1]=ye[ie]+J[ie];for(N=0;N<g;N++)u[s+N]!==0&&(A[ye[u[s+N]]++]=N);if(h===0?(q=zi=A,ve=20):h===1?(q=l,zi=f,ve=257):(q=c,zi=d,ve=0),Y=0,N=0,ie=se,E=p,Q=R,he=0,be=-1,ne=1<<R,Z=ne-1,h===1&&ne>852||h===2&&ne>592)return 1;for(;;){Gt=ie-he,A[N]+1<ve?(Ui=0,Di=A[N]):A[N]>=ve?(Ui=zi[A[N]-ve],Di=q[A[N]-ve]):(Ui=96,Di=0),w=1<<ie-he,y=1<<Q,se=y;do y-=w,_[E+(Y>>he)+y]=Gt<<24|Ui<<16|Di|0;while(y!==0);for(w=1<<ie-1;Y&w;)w>>=1;if(w!==0?(Y&=w-1,Y+=w):Y=0,N++,--J[ie]==0){if(ie===K)break;ie=u[s+A[N]]}if(ie>R&&(Y&Z)!==be){for(he===0&&(he=R),E+=se,Q=ie-he,L=1<<Q;Q+he<K&&(L-=J[Q+he],!(L<=0));)Q++,L<<=1;if(ne+=1<<Q,h===1&&ne>852||h===2&&ne>592)return 1;be=Y&Z,_[be]=R<<24|Q<<16|E-p|0}}return Y!==0&&(_[E+Y]=ie-he<<24|64<<16|0),S.bits=R,0},k={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{Z_FINISH:v,Z_BLOCK:C,Z_TREES:j,Z_OK:U,Z_STREAM_END:D,Z_NEED_DICT:V,Z_STREAM_ERROR:z,Z_DATA_ERROR:P,Z_MEM_ERROR:X,Z_BUF_ERROR:ce,Z_DEFLATED:O}=k,te=16180,G=16190,I=16191,W=16192,$e=16194,Ne=16199,Oe=16200,Ue=16206,le=16209,Mt=h=>(h>>>24&255)+(h>>>8&65280)+((65280&h)<<8)+((255&h)<<24);function Ai(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const De=h=>{if(!h)return 1;const u=h.state;return!u||u.strm!==h||u.mode<te||u.mode>16211?1:0},Lt=h=>{if(De(h))return z;const u=h.state;return h.total_in=h.total_out=u.total=0,h.msg="",u.wrap&&(h.adler=1&u.wrap),u.mode=te,u.last=0,u.havedict=0,u.flags=-1,u.dmax=32768,u.head=null,u.hold=0,u.bits=0,u.lencode=u.lendyn=new Int32Array(852),u.distcode=u.distdyn=new Int32Array(592),u.sane=1,u.back=-1,U},Bt=h=>{if(De(h))return z;const u=h.state;return u.wsize=0,u.whave=0,u.wnext=0,Lt(h)},Ft=(h,u)=>{let s;if(De(h))return z;const g=h.state;return u<0?(s=0,u=-u):(s=5+(u>>4),u<48&&(u&=15)),u&&(u<8||u>15)?z:(g.window!==null&&g.wbits!==u&&(g.window=null),g.wrap=s,g.wbits=u,Bt(h))},H=(h,u)=>{if(!h)return z;const s=new Ai;h.state=s,s.strm=h,s.window=null,s.mode=te;const g=Ft(h,u);return g!==U&&(h.state=null),g};let ze,Nt,ue=!0;const dr=h=>{if(ue){ze=new Int32Array(512),Nt=new Int32Array(32);let u=0;for(;u<144;)h.lens[u++]=8;for(;u<256;)h.lens[u++]=9;for(;u<280;)h.lens[u++]=7;for(;u<288;)h.lens[u++]=8;for($(1,h.lens,0,288,ze,0,h.work,{bits:9}),u=0;u<32;)h.lens[u++]=5;$(2,h.lens,0,32,Nt,0,h.work,{bits:5}),ue=!1}h.lencode=ze,h.lenbits=9,h.distcode=Nt,h.distbits=5},Ei=(h,u,s,g)=>{let _;const p=h.state;return p.window===null&&(p.wsize=1<<p.wbits,p.wnext=0,p.whave=0,p.window=new Uint8Array(p.wsize)),g>=p.wsize?(p.window.set(u.subarray(s-p.wsize,s),0),p.wnext=0,p.whave=p.wsize):(_=p.wsize-p.wnext,_>g&&(_=g),p.window.set(u.subarray(s-g,s-g+_),p.wnext),(g-=_)?(p.window.set(u.subarray(s-g,s),0),p.wnext=g,p.whave=p.wsize):(p.wnext+=_,p.wnext===p.wsize&&(p.wnext=0),p.whave<p.wsize&&(p.whave+=_))),0};var Ce={inflateReset:Bt,inflateReset2:Ft,inflateResetKeep:Lt,inflateInit:h=>H(h,15),inflateInit2:H,inflate:(h,u)=>{let s,g,_,p,A,S,M,w,y,be,Z,E,ve,ie,N,se,K,R,Q,he,L,ne,Y=0;const q=new Uint8Array(4);let J,ye;const Gt=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(De(h)||!h.output||!h.input&&h.avail_in!==0)return z;s=h.state,s.mode===I&&(s.mode=W),A=h.next_out,_=h.output,M=h.avail_out,p=h.next_in,g=h.input,S=h.avail_in,w=s.hold,y=s.bits,be=S,Z=M,ne=U;e:for(;;)switch(s.mode){case te:if(s.wrap===0){s.mode=W;break}for(;y<16;){if(S===0)break e;S--,w+=g[p++]<<y,y+=8}if(2&s.wrap&&w===35615){s.wbits===0&&(s.wbits=15),s.check=0,q[0]=255&w,q[1]=w>>>8&255,s.check=n(s.check,q,2,0),w=0,y=0,s.mode=16181;break}if(s.head&&(s.head.done=!1),!(1&s.wrap)||(((255&w)<<8)+(w>>8))%31){h.msg="incorrect header check",s.mode=le;break}if((15&w)!==O){h.msg="unknown compression method",s.mode=le;break}if(w>>>=4,y-=4,L=8+(15&w),s.wbits===0&&(s.wbits=L),L>15||L>s.wbits){h.msg="invalid window size",s.mode=le;break}s.dmax=1<<s.wbits,s.flags=0,h.adler=s.check=1,s.mode=512&w?16189:I,w=0,y=0;break;case 16181:for(;y<16;){if(S===0)break e;S--,w+=g[p++]<<y,y+=8}if(s.flags=w,(255&s.flags)!==O){h.msg="unknown compression method",s.mode=le;break}if(57344&s.flags){h.msg="unknown header flags set",s.mode=le;break}s.head&&(s.head.text=w>>8&1),512&s.flags&&4&s.wrap&&(q[0]=255&w,q[1]=w>>>8&255,s.check=n(s.check,q,2,0)),w=0,y=0,s.mode=16182;case 16182:for(;y<32;){if(S===0)break e;S--,w+=g[p++]<<y,y+=8}s.head&&(s.head.time=w),512&s.flags&&4&s.wrap&&(q[0]=255&w,q[1]=w>>>8&255,q[2]=w>>>16&255,q[3]=w>>>24&255,s.check=n(s.check,q,4,0)),w=0,y=0,s.mode=16183;case 16183:for(;y<16;){if(S===0)break e;S--,w+=g[p++]<<y,y+=8}s.head&&(s.head.xflags=255&w,s.head.os=w>>8),512&s.flags&&4&s.wrap&&(q[0]=255&w,q[1]=w>>>8&255,s.check=n(s.check,q,2,0)),w=0,y=0,s.mode=16184;case 16184:if(1024&s.flags){for(;y<16;){if(S===0)break e;S--,w+=g[p++]<<y,y+=8}s.length=w,s.head&&(s.head.extra_len=w),512&s.flags&&4&s.wrap&&(q[0]=255&w,q[1]=w>>>8&255,s.check=n(s.check,q,2,0)),w=0,y=0}else s.head&&(s.head.extra=null);s.mode=16185;case 16185:if(1024&s.flags&&(E=s.length,E>S&&(E=S),E&&(s.head&&(L=s.head.extra_len-s.length,s.head.extra||(s.head.extra=new Uint8Array(s.head.extra_len)),s.head.extra.set(g.subarray(p,p+E),L)),512&s.flags&&4&s.wrap&&(s.check=n(s.check,g,E,p)),S-=E,p+=E,s.length-=E),s.length))break e;s.length=0,s.mode=16186;case 16186:if(2048&s.flags){if(S===0)break e;E=0;do L=g[p+E++],s.head&&L&&s.length<65536&&(s.head.name+=String.fromCharCode(L));while(L&&E<S);if(512&s.flags&&4&s.wrap&&(s.check=n(s.check,g,E,p)),S-=E,p+=E,L)break e}else s.head&&(s.head.name=null);s.length=0,s.mode=16187;case 16187:if(4096&s.flags){if(S===0)break e;E=0;do L=g[p+E++],s.head&&L&&s.length<65536&&(s.head.comment+=String.fromCharCode(L));while(L&&E<S);if(512&s.flags&&4&s.wrap&&(s.check=n(s.check,g,E,p)),S-=E,p+=E,L)break e}else s.head&&(s.head.comment=null);s.mode=16188;case 16188:if(512&s.flags){for(;y<16;){if(S===0)break e;S--,w+=g[p++]<<y,y+=8}if(4&s.wrap&&w!==(65535&s.check)){h.msg="header crc mismatch",s.mode=le;break}w=0,y=0}s.head&&(s.head.hcrc=s.flags>>9&1,s.head.done=!0),h.adler=s.check=0,s.mode=I;break;case 16189:for(;y<32;){if(S===0)break e;S--,w+=g[p++]<<y,y+=8}h.adler=s.check=Mt(w),w=0,y=0,s.mode=G;case G:if(s.havedict===0)return h.next_out=A,h.avail_out=M,h.next_in=p,h.avail_in=S,s.hold=w,s.bits=y,V;h.adler=s.check=1,s.mode=I;case I:if(u===C||u===j)break e;case W:if(s.last){w>>>=7&y,y-=7&y,s.mode=Ue;break}for(;y<3;){if(S===0)break e;S--,w+=g[p++]<<y,y+=8}switch(s.last=1&w,w>>>=1,y-=1,3&w){case 0:s.mode=16193;break;case 1:if(dr(s),s.mode=Ne,u===j){w>>>=2,y-=2;break e}break;case 2:s.mode=16196;break;case 3:h.msg="invalid block type",s.mode=le}w>>>=2,y-=2;break;case 16193:for(w>>>=7&y,y-=7&y;y<32;){if(S===0)break e;S--,w+=g[p++]<<y,y+=8}if((65535&w)!=(w>>>16^65535)){h.msg="invalid stored block lengths",s.mode=le;break}if(s.length=65535&w,w=0,y=0,s.mode=$e,u===j)break e;case $e:s.mode=16195;case 16195:if(E=s.length,E){if(E>S&&(E=S),E>M&&(E=M),E===0)break e;_.set(g.subarray(p,p+E),A),S-=E,p+=E,M-=E,A+=E,s.length-=E;break}s.mode=I;break;case 16196:for(;y<14;){if(S===0)break e;S--,w+=g[p++]<<y,y+=8}if(s.nlen=257+(31&w),w>>>=5,y-=5,s.ndist=1+(31&w),w>>>=5,y-=5,s.ncode=4+(15&w),w>>>=4,y-=4,s.nlen>286||s.ndist>30){h.msg="too many length or distance symbols",s.mode=le;break}s.have=0,s.mode=16197;case 16197:for(;s.have<s.ncode;){for(;y<3;){if(S===0)break e;S--,w+=g[p++]<<y,y+=8}s.lens[Gt[s.have++]]=7&w,w>>>=3,y-=3}for(;s.have<19;)s.lens[Gt[s.have++]]=0;if(s.lencode=s.lendyn,s.lenbits=7,J={bits:s.lenbits},ne=$(0,s.lens,0,19,s.lencode,0,s.work,J),s.lenbits=J.bits,ne){h.msg="invalid code lengths set",s.mode=le;break}s.have=0,s.mode=16198;case 16198:for(;s.have<s.nlen+s.ndist;){for(;Y=s.lencode[w&(1<<s.lenbits)-1],N=Y>>>24,se=Y>>>16&255,K=65535&Y,!(N<=y);){if(S===0)break e;S--,w+=g[p++]<<y,y+=8}if(K<16)w>>>=N,y-=N,s.lens[s.have++]=K;else{if(K===16){for(ye=N+2;y<ye;){if(S===0)break e;S--,w+=g[p++]<<y,y+=8}if(w>>>=N,y-=N,s.have===0){h.msg="invalid bit length repeat",s.mode=le;break}L=s.lens[s.have-1],E=3+(3&w),w>>>=2,y-=2}else if(K===17){for(ye=N+3;y<ye;){if(S===0)break e;S--,w+=g[p++]<<y,y+=8}w>>>=N,y-=N,L=0,E=3+(7&w),w>>>=3,y-=3}else{for(ye=N+7;y<ye;){if(S===0)break e;S--,w+=g[p++]<<y,y+=8}w>>>=N,y-=N,L=0,E=11+(127&w),w>>>=7,y-=7}if(s.have+E>s.nlen+s.ndist){h.msg="invalid bit length repeat",s.mode=le;break}for(;E--;)s.lens[s.have++]=L}}if(s.mode===le)break;if(s.lens[256]===0){h.msg="invalid code -- missing end-of-block",s.mode=le;break}if(s.lenbits=9,J={bits:s.lenbits},ne=$(1,s.lens,0,s.nlen,s.lencode,0,s.work,J),s.lenbits=J.bits,ne){h.msg="invalid literal/lengths set",s.mode=le;break}if(s.distbits=6,s.distcode=s.distdyn,J={bits:s.distbits},ne=$(2,s.lens,s.nlen,s.ndist,s.distcode,0,s.work,J),s.distbits=J.bits,ne){h.msg="invalid distances set",s.mode=le;break}if(s.mode=Ne,u===j)break e;case Ne:s.mode=Oe;case Oe:if(S>=6&&M>=258){h.next_out=A,h.avail_out=M,h.next_in=p,h.avail_in=S,s.hold=w,s.bits=y,a(h,Z),A=h.next_out,_=h.output,M=h.avail_out,p=h.next_in,g=h.input,S=h.avail_in,w=s.hold,y=s.bits,s.mode===I&&(s.back=-1);break}for(s.back=0;Y=s.lencode[w&(1<<s.lenbits)-1],N=Y>>>24,se=Y>>>16&255,K=65535&Y,!(N<=y);){if(S===0)break e;S--,w+=g[p++]<<y,y+=8}if(se&&(240&se)==0){for(R=N,Q=se,he=K;Y=s.lencode[he+((w&(1<<R+Q)-1)>>R)],N=Y>>>24,se=Y>>>16&255,K=65535&Y,!(R+N<=y);){if(S===0)break e;S--,w+=g[p++]<<y,y+=8}w>>>=R,y-=R,s.back+=R}if(w>>>=N,y-=N,s.back+=N,s.length=K,se===0){s.mode=16205;break}if(32&se){s.back=-1,s.mode=I;break}if(64&se){h.msg="invalid literal/length code",s.mode=le;break}s.extra=15&se,s.mode=16201;case 16201:if(s.extra){for(ye=s.extra;y<ye;){if(S===0)break e;S--,w+=g[p++]<<y,y+=8}s.length+=w&(1<<s.extra)-1,w>>>=s.extra,y-=s.extra,s.back+=s.extra}s.was=s.length,s.mode=16202;case 16202:for(;Y=s.distcode[w&(1<<s.distbits)-1],N=Y>>>24,se=Y>>>16&255,K=65535&Y,!(N<=y);){if(S===0)break e;S--,w+=g[p++]<<y,y+=8}if((240&se)==0){for(R=N,Q=se,he=K;Y=s.distcode[he+((w&(1<<R+Q)-1)>>R)],N=Y>>>24,se=Y>>>16&255,K=65535&Y,!(R+N<=y);){if(S===0)break e;S--,w+=g[p++]<<y,y+=8}w>>>=R,y-=R,s.back+=R}if(w>>>=N,y-=N,s.back+=N,64&se){h.msg="invalid distance code",s.mode=le;break}s.offset=K,s.extra=15&se,s.mode=16203;case 16203:if(s.extra){for(ye=s.extra;y<ye;){if(S===0)break e;S--,w+=g[p++]<<y,y+=8}s.offset+=w&(1<<s.extra)-1,w>>>=s.extra,y-=s.extra,s.back+=s.extra}if(s.offset>s.dmax){h.msg="invalid distance too far back",s.mode=le;break}s.mode=16204;case 16204:if(M===0)break e;if(E=Z-M,s.offset>E){if(E=s.offset-E,E>s.whave&&s.sane){h.msg="invalid distance too far back",s.mode=le;break}E>s.wnext?(E-=s.wnext,ve=s.wsize-E):ve=s.wnext-E,E>s.length&&(E=s.length),ie=s.window}else ie=_,ve=A-s.offset,E=s.length;E>M&&(E=M),M-=E,s.length-=E;do _[A++]=ie[ve++];while(--E);s.length===0&&(s.mode=Oe);break;case 16205:if(M===0)break e;_[A++]=s.length,M--,s.mode=Oe;break;case Ue:if(s.wrap){for(;y<32;){if(S===0)break e;S--,w|=g[p++]<<y,y+=8}if(Z-=M,h.total_out+=Z,s.total+=Z,4&s.wrap&&Z&&(h.adler=s.check=s.flags?n(s.check,_,Z,A-Z):i(s.check,_,Z,A-Z)),Z=M,4&s.wrap&&(s.flags?w:Mt(w))!==s.check){h.msg="incorrect data check",s.mode=le;break}w=0,y=0}s.mode=16207;case 16207:if(s.wrap&&s.flags){for(;y<32;){if(S===0)break e;S--,w+=g[p++]<<y,y+=8}if(4&s.wrap&&w!==(4294967295&s.total)){h.msg="incorrect length check",s.mode=le;break}w=0,y=0}s.mode=16208;case 16208:ne=D;break e;case le:ne=P;break e;case 16210:return X;default:return z}return h.next_out=A,h.avail_out=M,h.next_in=p,h.avail_in=S,s.hold=w,s.bits=y,(s.wsize||Z!==h.avail_out&&s.mode<le&&(s.mode<Ue||u!==v))&&Ei(h,h.output,h.next_out,Z-h.avail_out),be-=h.avail_in,Z-=h.avail_out,h.total_in+=be,h.total_out+=Z,s.total+=Z,4&s.wrap&&Z&&(h.adler=s.check=s.flags?n(s.check,_,Z,h.next_out-Z):i(s.check,_,Z,h.next_out-Z)),h.data_type=s.bits+(s.last?64:0)+(s.mode===I?128:0)+(s.mode===Ne||s.mode===$e?256:0),(be===0&&Z===0||u===v)&&ne===U&&(ne=ce),ne},inflateEnd:h=>{if(De(h))return z;let u=h.state;return u.window&&(u.window=null),h.state=null,U},inflateGetHeader:(h,u)=>{if(De(h))return z;const s=h.state;return(2&s.wrap)==0?z:(s.head=u,u.done=!1,U)},inflateSetDictionary:(h,u)=>{const s=u.length;let g,_,p;return De(h)?z:(g=h.state,g.wrap!==0&&g.mode!==G?z:g.mode===G&&(_=1,_=i(_,u,s,0),_!==g.check)?P:(p=Ei(h,u,s,s),p?(g.mode=16210,X):(g.havedict=1,U)))},inflateInfo:"pako inflate (from Nodeca project)"};const fr=(h,u)=>Object.prototype.hasOwnProperty.call(h,u);var Te=function(h){const u=Array.prototype.slice.call(arguments,1);for(;u.length;){const s=u.shift();if(s){if(typeof s!="object")throw new TypeError(s+"must be non-object");for(const g in s)fr(s,g)&&(h[g]=s[g])}}return h},Ci=h=>{let u=0;for(let g=0,_=h.length;g<_;g++)u+=h[g].length;const s=new Uint8Array(u);for(let g=0,_=0,p=h.length;g<p;g++){let A=h[g];s.set(A,_),_+=A.length}return s};let nt=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{nt=!1}const We=new Uint8Array(256);for(let h=0;h<256;h++)We[h]=h>=252?6:h>=248?5:h>=240?4:h>=224?3:h>=192?2:1;We[254]=We[254]=1;var ur=h=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(h);let u,s,g,_,p,A=h.length,S=0;for(_=0;_<A;_++)s=h.charCodeAt(_),(64512&s)==55296&&_+1<A&&(g=h.charCodeAt(_+1),(64512&g)==56320&&(s=65536+(s-55296<<10)+(g-56320),_++)),S+=s<128?1:s<2048?2:s<65536?3:4;for(u=new Uint8Array(S),p=0,_=0;p<S;_++)s=h.charCodeAt(_),(64512&s)==55296&&_+1<A&&(g=h.charCodeAt(_+1),(64512&g)==56320&&(s=65536+(s-55296<<10)+(g-56320),_++)),s<128?u[p++]=s:s<2048?(u[p++]=192|s>>>6,u[p++]=128|63&s):s<65536?(u[p++]=224|s>>>12,u[p++]=128|s>>>6&63,u[p++]=128|63&s):(u[p++]=240|s>>>18,u[p++]=128|s>>>12&63,u[p++]=128|s>>>6&63,u[p++]=128|63&s);return u},Zt=(h,u)=>{const s=u||h.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(h.subarray(0,u));let g,_;const p=new Array(2*s);for(_=0,g=0;g<s;){let A=h[g++];if(A<128){p[_++]=A;continue}let S=We[A];if(S>4)p[_++]=65533,g+=S-1;else{for(A&=S===2?31:S===3?15:7;S>1&&g<s;)A=A<<6|63&h[g++],S--;S>1?p[_++]=65533:A<65536?p[_++]=A:(A-=65536,p[_++]=55296|A>>10&1023,p[_++]=56320|1023&A)}}return((A,S)=>{if(S<65534&&A.subarray&&nt)return String.fromCharCode.apply(null,A.length===S?A:A.subarray(0,S));let M="";for(let w=0;w<S;w++)M+=String.fromCharCode(A[w]);return M})(p,_)},Ti=(h,u)=>{(u=u||h.length)>h.length&&(u=h.length);let s=u-1;for(;s>=0&&(192&h[s])==128;)s--;return s<0||s===0?u:s+We[h[s]]>u?s:u},xt={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Pi=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},Ri=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const Ht=Object.prototype.toString,{Z_NO_FLUSH:jt,Z_FINISH:pr,Z_OK:at,Z_STREAM_END:qt,Z_NEED_DICT:Vt,Z_STREAM_ERROR:st,Z_DATA_ERROR:Oi,Z_MEM_ERROR:gr}=k;function ot(h){this.options=Te({chunkSize:65536,windowBits:15,to:""},h||{});const u=this.options;u.raw&&u.windowBits>=0&&u.windowBits<16&&(u.windowBits=-u.windowBits,u.windowBits===0&&(u.windowBits=-15)),!(u.windowBits>=0&&u.windowBits<16)||h&&h.windowBits||(u.windowBits+=32),u.windowBits>15&&u.windowBits<48&&(15&u.windowBits)==0&&(u.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Pi,this.strm.avail_out=0;let s=Ce.inflateInit2(this.strm,u.windowBits);if(s!==at)throw new Error(xt[s]);if(this.header=new Ri,Ce.inflateGetHeader(this.strm,this.header),u.dictionary&&(typeof u.dictionary=="string"?u.dictionary=ur(u.dictionary):Ht.call(u.dictionary)==="[object ArrayBuffer]"&&(u.dictionary=new Uint8Array(u.dictionary)),u.raw&&(s=Ce.inflateSetDictionary(this.strm,u.dictionary),s!==at)))throw new Error(xt[s])}function lt(h,u){const s=new ot(u);if(s.push(h),s.err)throw s.msg||xt[s.err];return s.result}ot.prototype.push=function(h,u){const s=this.strm,g=this.options.chunkSize,_=this.options.dictionary;let p,A,S;if(this.ended)return!1;for(A=u===~~u?u:u===!0?pr:jt,Ht.call(h)==="[object ArrayBuffer]"?s.input=new Uint8Array(h):s.input=h,s.next_in=0,s.avail_in=s.input.length;;){for(s.avail_out===0&&(s.output=new Uint8Array(g),s.next_out=0,s.avail_out=g),p=Ce.inflate(s,A),p===Vt&&_&&(p=Ce.inflateSetDictionary(s,_),p===at?p=Ce.inflate(s,A):p===Oi&&(p=Vt));s.avail_in>0&&p===qt&&s.state.wrap>0&&h[s.next_in]!==0;)Ce.inflateReset(s),p=Ce.inflate(s,A);switch(p){case st:case Oi:case Vt:case gr:return this.onEnd(p),this.ended=!0,!1}if(S=s.avail_out,s.next_out&&(s.avail_out===0||p===qt))if(this.options.to==="string"){let M=Ti(s.output,s.next_out),w=s.next_out-M,y=Zt(s.output,M);s.next_out=w,s.avail_out=g-w,w&&s.output.set(s.output.subarray(M,M+w),0),this.onData(y)}else this.onData(s.output.length===s.next_out?s.output:s.output.subarray(0,s.next_out));if(p!==at||S!==0){if(p===qt)return p=Ce.inflateEnd(this.strm),this.onEnd(p),this.ended=!0,!0;if(s.avail_in===0)break}}return!0},ot.prototype.onData=function(h){this.chunks.push(h)},ot.prototype.onEnd=function(h){h===at&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Ci(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg};var b=ot,m=lt,x=function(h,u){return(u=u||{}).raw=!0,lt(h,u)},T=lt,F=k,fe={Inflate:b,inflate:m,inflateRaw:x,ungzip:T,constants:F};e.Inflate=b,e.constants=F,e.default=fe,e.inflate=m,e.inflateRaw=x,e.ungzip=T,Object.defineProperty(e,"__esModule",{value:!0})});var Rd=Object.defineProperty,Od=Object.getOwnPropertyDescriptor,En=(e,i,t,n)=>{for(var r=n>1?void 0:n?Od(i,t):i,a=e.length-1,o;a>=0;a--)(o=e[a])&&(r=(n?o(i,t,r):o(r))||r);return n&&r&&Rd(i,t,r),r};let tr=class extends ge{constructor(){super(...arguments),this.githubUrl="",this.pageContent="",this.loading=!0,this.error="",this.devices=[{name:"iPhone 14 Pro Max",width:430,height:932,type:"phone"},{name:"iPhone 14",width:390,height:844,type:"phone"},{name:"iPhone SE",width:375,height:667,type:"phone"},{name:"Google Pixel 7 Pro",width:412,height:892,type:"phone"},{name:"Samsung Galaxy S23 Ultra",width:384,height:851,type:"phone"},{name:"Generic Android",width:360,height:800,type:"phone"},{name:"--- Tablets ---",disabled:!0},{name:'iPad Pro 12.9"',width:1024,height:1366,type:"tablet"},{name:"iPad Air",width:820,height:1180,type:"tablet"},{name:"Samsung Galaxy Tab S8",width:800,height:1280,type:"tablet"},{name:"Generic tablet",width:768,height:1024,type:"tablet"}],this.selectedDeviceIdx=2,this.isPortrait=!0}async updated(e){if(e.has("githubUrl")&&this.githubUrl){this.loading=!0,this.error="",this.pageContent="";const i=this.previewService.githubToRawUrl(this.githubUrl);if(!i){this.error="Invalid GitHub URL",this.loading=!1,this.requestUpdate();return}try{this.pageContent=await this.previewService.fetchRawContent(i)}catch(t){this.error=t.message||String(t)}this.loading=!1,this.requestUpdate()}}get selectedDevice(){return this.devices[this.selectedDeviceIdx]||this.devices[0]}handleDeviceChange(e){const i=Number(e.target.value);this.selectedDeviceIdx=i,this.requestUpdate()}toggleOrientation(){this.isPortrait=!this.isPortrait,this.requestUpdate()}render(){const e=this.selectedDevice,i=this.isPortrait?e.width:e.height,t=this.isPortrait?e.height:e.width;return B`
      <div class="device-controls" style="margin-bottom: 1em; margin-top: 1em; display: flex; align-items: center; gap: 1em;">
        <select @change="${this.handleDeviceChange.bind(this)}" style="margin-bottom: 0;">
          ${this.devices.map((n,r)=>n.disabled?B`<option disabled> ${n.name} </option>`:B`<option value="${r}" ?selected="${r===this.selectedDeviceIdx}">${n.name}</option>`)}
        </select>
        <button @click="${this.toggleOrientation.bind(this)}" style="margin-left: 0;">
          ${this.isPortrait?"Portrait":"Landscape"}
        </button>
      </div>
      <div class="phone-simulator">
        <div class="phone-simulator-bg">
          <div class="phone-frame" style="width:${i}px; height:${t}px;">
            ${this.loading?B`
                  <div class="spinner-container">
                    <div class="spinner"></div>
                    <div class="loading-message" style="margin-top: 1em; font-size: 1.1em; color: #bdbdbd;">Loading playable content...</div>
                  </div>
                `:this.error?B`<div style="color: red;">${this.error}</div>`:B`<iframe
                  srcdoc="${this.pageContent}"
                  class="playable-iframe"
                  frameborder="0"
                  allowfullscreen
                  style="width:100%; height:100%; border:none;"
                ></iframe>`}
          </div>
        </div>
      </div>
    `}};En([Ge({type:String})],tr.prototype,"githubUrl",2);En([_i(er)],tr.prototype,"previewService",2);tr=En([we("playable-previewer")],tr);var Ud=Object.defineProperty,Dd=Object.getOwnPropertyDescriptor,Cn=(e,i,t,n)=>{for(var r=n>1?void 0:n?Dd(i,t):i,a=e.length-1,o;a>=0;a--)(o=e[a])&&(r=(n?o(i,t,r):o(r))||r);return n&&r&&Ud(i,t,r),r};let ir=class extends ge{constructor(){super(...arguments),this.urlInput="",this.decodedUrl="",this.recentUrls=[],this.isEncoded=!1,this.linkCopied=!1,this.handlePopState=()=>{let e;const i=window.location.hash;if(i){const t=i.indexOf("?");if(t!==-1){const n=i.substring(t+1);e=new URLSearchParams(n).get("url")}}if(e||(e=new URLSearchParams(window.location.search).get("url")),!e&&this._encodedUrlFromQuery&&(e=this._encodedUrlFromQuery),e){const t=this.previewService.decodeUrl(e);this.decodedUrl=t,this._encodedUrlInternal=e,this.isEncoded=!0}else this.isEncoded=!1,this.decodedUrl="",this._encodedUrlInternal=void 0;this.requestUpdate()}}disconnectedCallback(){super.disconnectedCallback?.();const e=localStorage.getItem("preview-recent-urls");if(e)try{this.recentUrls=JSON.parse(e)}catch{this.recentUrls=[]}window.removeEventListener("popstate",this.handlePopState)}get encodedUrl(){return this._encodedUrlFromQuery}connectedCallback(){super.connectedCallback();let e;const i=window.location.hash;if(i){const t=i.indexOf("?");if(t!==-1){const n=i.substring(t+1);e=new URLSearchParams(n).get("url")}}if(e||(e=new URLSearchParams(window.location.search).get("url")),!e&&this._encodedUrlFromQuery&&(e=this._encodedUrlFromQuery),e){const t=this.previewService.decodeUrl(e);this.decodedUrl=t,this._encodedUrlInternal=e,this.isEncoded=!0,this.requestUpdate()}else{const t=localStorage.getItem("preview-recent-urls");if(t)try{this.recentUrls=JSON.parse(t)}catch{this.recentUrls=[]}this.isEncoded=!1,this.decodedUrl="",this._encodedUrlInternal=void 0}window.addEventListener("popstate",this.handlePopState)}handleInput(e){this.decodedUrl=e.target.value,this.requestUpdate()}handleLoad(){if(!this.decodedUrl)return;this._encodedUrlInternal=this.previewService.encodeUrl(this.decodedUrl),this.isEncoded=!0;let e=[];const i=localStorage.getItem("preview-recent-urls");if(i)try{e=JSON.parse(i)}catch{e=[]}e=[this.decodedUrl,...e.filter(n=>n!==this.decodedUrl)].slice(0,10),localStorage.setItem("preview-recent-urls",JSON.stringify(e));const t=new URLSearchParams;t.set("url",this._encodedUrlInternal),window.history.pushState({},"",`${window.location.pathname}#preview?${t.toString()}`),this.requestUpdate()}async handleShare(){try{await navigator.clipboard.writeText(window.location.href),this.linkCopied=!0,this.requestUpdate(),this.copyTimeout&&clearTimeout(this.copyTimeout),this.copyTimeout=window.setTimeout(()=>{this.linkCopied=!1,this.requestUpdate()},3e3)}catch{}}render(){return B`
      <div class="preview-container">
        <div style="display: flex; align-items: center; gap: 1em;">
          <h2 style="margin: 0;">Playable Ad Preview</h2>
          ${this.isEncoded&&this.decodedUrl?B`
                <button
                  @click=${this.handleShare.bind(this)}
                  style="background: none; border: none; color: #1976d2; cursor: pointer; padding: 0; font: inherit; display: flex; align-items: center; gap: 0.5em; text-decoration: underline;"
                >
                  ${this.linkCopied?"Link copied":"Share"}
                </button>
              `:null}
        </div>
        ${this.isEncoded?null:B`
              <div style="margin: 1em 0; color: #555;">
                <p>
                  This page lets you share playable ads from a public GitHub repository and preview them on different devices and orientations.<br />
                </p>
                <p>
                  Paste the URL of your playable ad hosted on GitHub below, then click <b>Load</b> to preview and share the link. Use the <b>Share</b> button to copy a direct preview link.
                </p>
                <details style="margin-top: 1em;">
                  <summary style="cursor: pointer; font-weight: bold; color: #1976d2;">Show sample playable URL</summary>
                  <div style="margin: 0.5em 0 0 1em;">
                    <div style="display: flex; align-items: center; gap: 0.5em;">
                      <code style="background: #f5f5f5; padding: 0.2em 0.5em; border-radius: 4px; font-size: 0.95em;">https://github.com/gritsenko/playables/blob/main/Customize3d/index.html</code>
                      <button
                        style="background: #1976d2; color: #fff; border: none; border-radius: 4px; padding: 0.2em 0.8em; cursor: pointer; font-size: 0.95em;"
                        @click=${()=>{this.decodedUrl="https://github.com/gritsenko/playables/blob/main/Customize3d/index.html",this.handleLoad()}}
                      >
                        Try
                      </button>
                    </div>
                  </div>
                </details>
              </div>
            `}
        <div class="preview-controls" style="margin-bottom: 1.5em;">
          ${this.isEncoded?null:B`
                <input
                  type="text"
                  placeholder="Paste GitHub playable URL..."
                  .value=${this.decodedUrl}
                  @input=${this.handleInput.bind(this)}
                  style="width: 400px;"
                />
                <button @click=${this.handleLoad.bind(this)} style="margin-left: 0.5em;">Load</button>
              `}
        </div>
        ${!this.isEncoded&&this.recentUrls.length>0?B`
              <div style="margin-top: 0.5em;">
                <h3 style="margin-bottom: 0.5em; font-size: 1.1em; color: #1976d2;">Recent Playable URLs</h3>
                <div>
                  ${this.recentUrls.map(e=>B`
                      <div style="margin-bottom: 0.5em;">
                        <button
                          style="width: 100%; display: flex; align-items: center; justify-content: space-between; background: #f5f5f5; color: #222; border: none; border-radius: 4px; padding: 0.4em 0.8em; font-size: 0.95em; cursor: pointer; text-align: left;"
                          @click=${()=>{this.decodedUrl=e,this.handleLoad()}}
                        >
                          <span style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap; flex: 1;">${e}</span>
                          <span style="margin-left: 1em; color: #1976d2; font-weight: bold;">Preview</span>
                        </button>
                      </div>
                    `)}
                </div>
              </div>
            `:null}
        <div
          class="preview-frame"
          style="display: flex; justify-content: center; align-items: center; min-height: 60vh;"
        >
          ${this.isEncoded&&this.decodedUrl?B`<playable-previewer
                githubUrl="${this.decodedUrl}"
              ></playable-previewer>`:null}
        </div>
      </div>
    `}};Cn([_i(er)],ir.prototype,"previewService",2);Cn([So("url")],ir.prototype,"encodedUrl",1);ir=Cn([we("preview-page"),rt("/preview")],ir);const zd="modulepreload",Id=function(e){return"/PlayableTools/"+e},La={},Md=function(i,t,n){let r=Promise.resolve();if(t&&t.length>0){let f=function(c){return Promise.all(c.map(d=>Promise.resolve(d).then($=>({status:"fulfilled",value:$}),$=>({status:"rejected",reason:$}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");r=f(t.map(c=>{if(c=Id(c),c in La)return;La[c]=!0;const d=c.endsWith(".css"),$=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${$}`))return;const k=document.createElement("link");if(k.rel=d?"stylesheet":zd,d||(k.as="script"),k.crossOrigin="",k.href=c,l&&k.setAttribute("nonce",l),document.head.appendChild(k),d)return new Promise((v,C)=>{k.addEventListener("load",v),k.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return r.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return i().catch(a)})};class Xr{static getBaseDir(){const i=window.location.origin+window.location.pathname.replace(/([?#].*)$/,"");return i.endsWith("/")?i:i+"/"}static buildFetchUrl(i,t){return this.getBaseDir()+i+t}}const Ld={replaceTokens:{'<script type="module" crossorigin>':"<script>"}},Bd=[{Name:"Facebook",InjeectScripts:["cta.Facebook.js"]},{Name:"Moloco",InjeectScripts:["cta.Moloco.js"],replaceTokens:{XMLHttpRequest:"XRQ"}},{Name:"Facebook_Zip",format:"zip",ExtractScripts:!0,InjeectScripts:["cta.Facebook_Zip.js"]},{Name:"Mintegral",format:"zip",OutputIndexHtmlName:"%name%.html",InjeectScripts:["cta.Mintegral.js"]},{Name:"IronSource",InjeectScripts:["cta.IronSource.js"]},{Name:"AdColony",InjeectScripts:["cta.AdColony.js"]},{Name:"Unity",InjeectScripts:["cta.Unity.js"]},{Name:"Applovin",InjeectScripts:["cta.Applovin.js"]},{Name:"liftoff",InjeectScripts:["cta.Mraid2.js"]},{Name:"chartboost",InjeectScripts:["cta.Mraid2.js"]},{Name:"Vungle",OutputIndexHtmlName:"ad.html",format:"zip",ExtraFiles:[{from:"./Vungle/index.html",to:"./index.html"}],InjeectScripts:["cta.Vungle.js"]},{Name:"TikTok",format:"zip",OutputIndexHtmlName:"index.html",ExtraFiles:[{from:"./TikTok/config.json",to:"./config.json"}],InjeectScripts:["cta.TikTok.js"]},{Name:"Google",OutputIndexHtmlName:"index.html",format:"zip",Sizes:{"320x480":"width=320,height=480","480x320":"width=480,height=320","300x250":"width=300,height=250"},InjeectScripts:["cta.Google.js"],replaceTokens:{"</title>":'</title> <meta name="ad.size" content="{{ad.size}}"><meta name="ad.orientation" content="landscape">'}}],Fd={globalDefaults:Ld,platforms:Bd};var Nd=Object.getOwnPropertyDescriptor,Zd=(e,i,t,n)=>{for(var r=n>1?void 0:n?Nd(i,t):i,a=e.length-1,o;a>=0;a--)(o=e[a])&&(r=o(r)||r);return r};let Jr=class{constructor(){this.config=[],this.globalDefaults={},this.loadConfig(Fd)}loadConfig(e){if(Array.isArray(e.platforms))this.config=e.platforms,e.globalDefaults&&typeof e.globalDefaults=="object"&&(this.globalDefaults=e.globalDefaults),console.log("PlayablePublishService: Loaded platforms config:",this.config);else throw new Error("Invalid config: platforms array missing")}getPlatforms(){return this.config}getAvailablePlatforms(){return this.config.map(e=>e.Name)}async processHtml(e,i,t){const n=this.config.find(l=>l.Name===i);if(!n)throw new Error(`Platform '${i}' not found in config`);let r=e,a=performance.now();n.replaceTokens&&(r=this.applyReplaceTokens(r,n.replaceTokens));let o=performance.now();if(console.log(`[PlayablePublishService] Platform replaceTokens (${i}): ${(o-a).toFixed(2)} ms`),n.InjeectScripts&&Array.isArray(n.InjeectScripts)){let l=performance.now();r=await this.injectScripts(r,n.InjeectScripts);let f=performance.now();console.log(`[PlayablePublishService] Script injection (${i}): ${(f-l).toFixed(2)} ms`)}return n.OutputIndexHtmlName&&t?.name,r}applyReplaceTokens(e,i){if(!i||Object.keys(i).length===0)return e;const t=Object.keys(i).map(r=>r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")),n=new RegExp(t.join("|"),"g");return e.replace(n,r=>i[r]??r)}async injectScripts(e,i){let t=e;const n=i.map(async a=>{try{const o=Xr.buildFetchUrl("publish-data/",a),l=await fetch(o);return l.ok?`<script>
${await l.text()}
<\/script>`:(console.warn(`Could not load script: ${a} from ${o}`),null)}catch(o){return console.warn(`Failed to inject script ${a}:`,o),null}}),r=(await Promise.all(n)).filter(Boolean);for(const a of r)if(/<head[^>]*>/i.test(t)){const o=t.match(/(<head[^>]*>)([\s\S]*?)(<\/head>)/i);if(o){const l=o[2],f=l.match(/<script[^>]*>/i);if(f){const c=o.index+o[1].length+l.indexOf(f[0]);t=t.slice(0,c)+`
${a}
`+t.slice(c)}else t=t.replace(/<\/head>/i,`${a}
</head>`)}}else/<\/body>/i.test(t)?t=t.replace(/<\/body>/i,`${a}
</body>`):t=t+a;return t}async processAllPlatforms(e,i){if(!i.outputDirectory)throw new Error("Output directory is required");const t=i.name||"Playable",n=i.suffix||"EN";let r=e,a=performance.now();this.globalDefaults.replaceTokens&&(r=this.applyReplaceTokens(r,this.globalDefaults.replaceTokens));let o=performance.now();console.log(`[PlayablePublishService] Global replaceTokens: ${(o-a).toFixed(2)} ms`);let l=this.config;i.selectedPlatforms&&Array.isArray(i.selectedPlatforms)&&i.selectedPlatforms.length>0&&(l=this.config.filter(d=>i.selectedPlatforms.includes(d.Name)));const f=l.length;let c=0;for(const d of l){const $=await this.createPlatformDirectory(i.outputDirectory,d.Name),k=await this.processHtml(r,d.Name,i),v=this.generateFileName(t,d.Name,n,d);d.format==="zip"?await this.createZipPackageToDirectory(k,v,$,d):await this.saveHtmlFileToDirectory(k,v,$),c++;const C=30+c/f*70;i.onProgress?.(C,d.Name)}}generateFileName(e,i,t,n){return n.OutputIndexHtmlName?n.OutputIndexHtmlName.includes("%name%")?n.OutputIndexHtmlName.replace("%name%",e):n.OutputIndexHtmlName:`${e}_${i}_${t}.html`}async createPlatformDirectory(e,i){try{const t=await e.getDirectoryHandle(i,{create:!0});return console.log(`Created/accessed directory: ${i}`),t}catch(t){throw new Error(`Failed to create platform directory ${i}: ${t}`)}}async saveHtmlFileToDirectory(e,i,t){let n=performance.now();try{const o=await(await t.getFileHandle(i,{create:!0})).createWritable();await o.write(e),await o.close();const l=(e.length/1024).toFixed(2);console.log(`Saved HTML file: ${i} (${l} KB)`)}catch(a){throw new Error(`Failed to save HTML file ${i}: ${a}`)}let r=performance.now();console.log(`[PlayablePublishService] Save HTML (${i}): ${(r-n).toFixed(2)} ms`)}async createZipPackageToDirectory(e,i,t,n){try{const r=(await Md(async()=>{const{default:U}=await import("./jszip.min-3JaqhNgP.js").then(D=>D.j);return{default:U}},[])).default,a=new r;if(a.file(i,e),n.ExtraFiles)for(const U of n.ExtraFiles)try{const D=`/publish-data/${U.from.replace("./","")}`,V=await fetch(D);if(V.ok){const z=await V.text();a.file(U.to.replace("./",""),z)}else console.warn(`Could not load extra file from: ${D}`)}catch(D){console.warn(`Could not load extra file: ${U.from}`,D)}let o=performance.now();const l=await a.generateAsync({type:"uint8array",compression:"DEFLATE",compressionOptions:{level:3}}),f=new Blob([l],{type:"application/zip"});let c=performance.now();console.log(`[PlayablePublishService] Zipping (${i}): ${(c-o).toFixed(2)} ms`);let d=performance.now();const $=i.replace(".html",".zip"),v=await(await t.getFileHandle($,{create:!0})).createWritable();await v.write(f),await v.close();let C=performance.now();console.log(`[PlayablePublishService] Save ZIP (${$}): ${(C-d).toFixed(2)} ms`);const j=(f.size/1024).toFixed(2);console.log(`Saved ZIP file: ${$} (${j} KB)`)}catch(r){throw new Error(`Failed to create ZIP package ${i}: ${r}`)}}async requestOutputDirectory(){if("showDirectoryPicker"in window)try{const e=await window.showDirectoryPicker();return console.log(`Selected output directory: ${e.name}`),e}catch(e){throw e instanceof Error&&e.name==="AbortError"?new Error("Directory selection was cancelled"):new Error(`Failed to select directory: ${e}`)}else throw new Error("File System Access API is not supported in this browser. Please use Chrome, Edge, or another supported browser.")}};Jr=Zd([nr(Et.Singleton)],Jr);var Hd=Object.defineProperty,jd=(e,i,t,n)=>{for(var r=void 0,a=e.length-1,o;a>=0;a--)(o=e[a])&&(r=o(i,t,r)||r);return r&&Hd(i,t,r),r};class Vs extends ge{constructor(){super(...arguments),this.dragActive=!1,this.loadedFile=null,this.isPublishing=!1,this.publishProgress=0,this.currentPlatform=null,this.publishStartTime=null,this.publishElapsed=null,this.playableTitle="",this.googlePlayUrl="",this.appStoreUrl="",this.customSuffix="EN",this.outputDirectory="",this.availablePlatforms=[],this.selectedPlatforms=[],this.STORAGE_KEYS={playableTitle:"playable-publisher-title",googlePlayUrl:"playable-publisher-google-url",appStoreUrl:"playable-publisher-app-store-url",customSuffix:"playable-publisher-suffix",selectedPlatforms:"playable-publisher-selected-platforms"}}connectedCallback(){super.connectedCallback(),this.loadFromLocalStorage(),this.playablePublishService&&typeof this.playablePublishService.getAvailablePlatforms=="function"&&(this.availablePlatforms=this.playablePublishService.getAvailablePlatforms(),(!this.selectedPlatforms||this.selectedPlatforms.length===0)&&(this.selectedPlatforms=[...this.availablePlatforms]))}render(){return B`
      <div class="playable-publisher">
        <div style="margin-bottom:1.5rem">
          <strong>Publish Playable Ad</strong><br />
          <small>
            Use this tool to upload your playable ad HTML file and prepare it
            for different platforms.<br />
            Drop your .html file below or select it manually.
          </small>
        </div>

        ${this.loadedFile?B`
              <div class="file-loaded-info">
                <strong>File loaded:</strong> ${this.loadedFile.name}
                (${(this.loadedFile.size/1024).toFixed(2)} KB)

                ${this.isPublishing?B`
                      <div class="progress-container">
                        <div class="progress-text">
                          Publishing... ${Math.round(this.publishProgress)}%
                          ${this.currentPlatform?B`<span style="margin-left:1em;">(${this.currentPlatform})</span>`:""}
                        </div>
                        <div class="progress-bar-background">
                          <div 
                            class="progress-bar-fill"
                            style="width: ${this.publishProgress}%;"
                          ></div>
                        </div>
                      </div>
                    `:null}
              </div>
            `:B`
              <div
                class="dropzone ${this.dragActive?"dragover":""}"
                @dragover=${this._onDragOver}
                @dragleave=${this._onDragLeave}
                @drop=${this._onDrop}
              >
                <p>Drop your .html file here or</p>
                <label class="file-select-button">
                  Select file
                  <input
                    type="file"
                    accept=".html"
                    @change=${this._onFileChange}
                  />
                </label>
              </div>
            `}

        <!-- Form inputs: only show when file is loaded -->
        ${this.loadedFile?B`
          <div class="form-section compact-form" style="margin-bottom: 1.5rem;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
              <h3 style="margin: 0; font-size: 1.1rem;">Playable Configuration</h3>
            </div>
            <div class="form-row compact-row">
              <label for="playableTitle">Playable Title:</label>
              <input
                id="playableTitle"
                type="text"
                .value=${this.playableTitle}
                @input=${i=>{this.updateField("playableTitle",i.target.value)}}
                placeholder="e.g., GoH_PBCustomHero3D"
                style="margin-left: 8px;"
              />
            </div>
            <div class="form-row compact-row">
              <label for="googlePlayUrl">Google Play URL:</label>
              <input
                id="googlePlayUrl"
                type="url"
                .value=${this.googlePlayUrl}
                @input=${i=>{this.updateField("googlePlayUrl",i.target.value)}}
                placeholder="https://play.google.com/store/apps/details?id=..."
                style="margin-left: 8px;"
              />
            </div>
            <div class="form-row compact-row">
              <label for="appStoreUrl">App Store URL:</label>
              <input
                id="appStoreUrl"
                type="url"
                .value=${this.appStoreUrl}
                @input=${i=>{this.updateField("appStoreUrl",i.target.value)}}
                placeholder="https://apps.apple.com/app/..."
                style="margin-left: 8px;"
              />
            </div>
            <div class="form-row compact-row">
              <label for="customSuffix">Custom Suffix:</label>
              <input
                id="customSuffix"
                type="text"
                .value=${this.customSuffix}
                @input=${i=>{this.updateField("customSuffix",i.target.value)}}
                placeholder="EN"
                style="width: 60px; margin-left: 8px;"
              />
            </div>

            <!-- Platform checklist -->
            <div class="form-row compact-row platform-section">
              <label class="platform-label">Platforms:</label>
              <div class="platform-content">
                <div class="platform-actions">
                  <a href="#" @click=${this._selectAllPlatforms} class="platform-link">Select all</a>
                  <a href="#" @click=${this._clearAllPlatforms} class="platform-link">Clear all</a>
                </div>
                <div class="platform-grid">
                  ${this.availablePlatforms.map(i=>B`
                    <label class="platform-checkbox">
                      <input
                        type="checkbox"
                        .checked=${this.selectedPlatforms.includes(i)}
                        @change=${t=>this._onPlatformCheckboxChange(t,i)}
                      />
                      <span>${i}</span>
                    </label>
                  `)}
                </div>
              </div>
            </div>
          </div>
        `:null}

        <!-- Publish/Cancel buttons below the form -->
        <div style="margin-bottom: 1.5rem; display: flex; gap: 0.5rem; justify-content: center;">
          ${this.loadedFile&&this.playableTitle&&!this.isPublishing?B`
            <button 
              @click=${this._publishPlayable}
              style="margin-right: 0.5rem;"
              ?disabled=${!this.selectedPlatforms.length}
            >
              Publish
            </button>
          `:null}
          ${this.loadedFile&&!this.isPublishing?B`
            <button 
              @click=${this._resetFile}
            >
              Cancel
            </button>
          `:null}
        </div>
      </div>
    `}_onPlatformCheckboxChange(i,t){i.target.checked?this.selectedPlatforms.includes(t)||(this.selectedPlatforms=[...this.selectedPlatforms,t]):this.selectedPlatforms=this.selectedPlatforms.filter(r=>r!==t),this.saveToLocalStorage(),this.requestUpdate()}_selectAllPlatforms(i){i.preventDefault(),this.selectedPlatforms=[...this.availablePlatforms],this.saveToLocalStorage(),this.requestUpdate()}_clearAllPlatforms(i){i.preventDefault(),this.selectedPlatforms=[],this.saveToLocalStorage(),this.requestUpdate()}_onDragOver(i){i.preventDefault(),this.dragActive=!0,this.requestUpdate()}_onDragLeave(i){i.preventDefault(),this.dragActive=!1,this.requestUpdate()}_onDrop(i){i.preventDefault(),this.dragActive=!1,this.requestUpdate();const t=i.dataTransfer?.files;t&&t.length&&this._processFile(t[0])}_onFileChange(i){const n=i.target.files?.[0];n&&this._processFile(n)}_processFile(i){if(i&&i.name.endsWith(".html")){this.loadedFile=i,this.requestUpdate();const t=new CustomEvent("file-selected",{detail:i});this.dispatchEvent(t)}else alert("Please select a valid .html file.")}_resetFile(){this.loadedFile=null,this.requestUpdate()}async _publishPlayable(){if(!this.loadedFile||!this.playableTitle){alert("Please provide a playable title and select a file.");return}if(!this.selectedPlatforms||this.selectedPlatforms.length===0){alert("Please select at least one platform to publish.");return}try{this.isPublishing=!0,this.publishProgress=0,this.currentPlatform=null,this.publishElapsed=null,this.requestUpdate(),this.publishProgress=10,this.requestUpdate();const i=await this.playablePublishService.requestOutputDirectory();this.publishStartTime=Date.now(),this.publishProgress=20,this.requestUpdate();const t=await this._readFileContent(this.loadedFile),n={name:this.playableTitle,title:this.playableTitle,googlePlayUrl:this.googlePlayUrl,appStoreUrl:this.appStoreUrl,suffix:this.customSuffix,outputDirectory:i,onProgress:(r,a)=>{this.publishProgress=r,a&&(this.currentPlatform=a),this.requestUpdate()},selectedPlatforms:[...this.selectedPlatforms]};if(this.publishProgress=30,this.requestUpdate(),await this.playablePublishService.processAllPlatforms(t,n),this.publishProgress=100,this.currentPlatform=null,this.publishStartTime){const r=Date.now()-this.publishStartTime;this.publishElapsed=this._formatElapsed(r)}this.requestUpdate(),setTimeout(()=>{let r="Publishing completed successfully! Files have been saved to the selected directory with subfolders for each platform.";this.publishElapsed&&(r+=`

Elapsed time: ${this.publishElapsed}`),alert(r),this.isPublishing=!1,this.publishProgress=0,this.publishElapsed=null,this.publishStartTime=null,this.requestUpdate()},500)}catch(i){console.error("Publishing failed:",i);let t=i instanceof Error?i.message:"Unknown error";t.includes("File System Access API is not supported")&&(t+=`

For best results, please use Chrome 86+, Edge 86+, or another browser that supports the File System Access API.`),alert(`Publishing failed: ${t}`),this.isPublishing=!1,this.publishProgress=0,this.requestUpdate()}}_formatElapsed(i){const t=Math.floor(i/1e3),n=Math.floor(t/60),r=t%60;return n>0?`${n}m ${r}s`:`${r}s`}_readFileContent(i){return new Promise((t,n)=>{const r=new FileReader;r.onload=a=>{const o=a.target?.result;typeof o=="string"?t(o):n(new Error("Failed to read file as text"))},r.onerror=()=>n(new Error("Failed to read file")),r.readAsText(i)})}loadFromLocalStorage(){this.playableTitle=localStorage.getItem(this.STORAGE_KEYS.playableTitle)||"",this.googlePlayUrl=localStorage.getItem(this.STORAGE_KEYS.googlePlayUrl)||"",this.appStoreUrl=localStorage.getItem(this.STORAGE_KEYS.appStoreUrl)||"",this.customSuffix=localStorage.getItem(this.STORAGE_KEYS.customSuffix)||"EN";const i=localStorage.getItem(this.STORAGE_KEYS.selectedPlatforms);if(i)try{const t=JSON.parse(i);Array.isArray(t)&&(this.selectedPlatforms=t)}catch{}this.requestUpdate()}saveToLocalStorage(){localStorage.setItem(this.STORAGE_KEYS.playableTitle,this.playableTitle),localStorage.setItem(this.STORAGE_KEYS.googlePlayUrl,this.googlePlayUrl),localStorage.setItem(this.STORAGE_KEYS.appStoreUrl,this.appStoreUrl),localStorage.setItem(this.STORAGE_KEYS.customSuffix,this.customSuffix),localStorage.setItem(this.STORAGE_KEYS.selectedPlatforms,JSON.stringify(this.selectedPlatforms))}updateField(i,t){switch(i){case"playableTitle":this.playableTitle=t;break;case"googlePlayUrl":this.googlePlayUrl=t;break;case"appStoreUrl":this.appStoreUrl=t;break;case"customSuffix":this.customSuffix=t;break}this.saveToLocalStorage(),this.requestUpdate()}}jd([_i(Jr)],Vs.prototype,"playablePublishService");customElements.define("playable-publisher",Vs);var qd=Object.getOwnPropertyDescriptor,Vd=(e,i,t,n)=>{for(var r=n>1?void 0:n?qd(i,t):i,a=e.length-1,o;a>=0;a--)(o=e[a])&&(r=o(r)||r);return r};let Ba=class extends ge{render(){return B`
      <div class="warning-notice">
        <strong>Important:</strong> You must integrate the CTA SDK into your playable ad for successful publishing. See <a href="#cta-sdk" >cta-sdk</a> for instructions.
      </div>
      <playable-publisher></playable-publisher>

      <style>
        .warning-notice {
          background: var(--pico-mark-background-color);
          color: var(--pico-mark-color);
          border: 1px solid var(--pico-mark-background-color);
          padding: 1em;
          margin-bottom: 1em;
          border-radius: var(--pico-border-radius);
        }
      </style>
    `}};Ba=Vd([we("publish-page"),rt("/publish",{title:"Publish Playable Ads",description:"Publish your playable ads to multiple ad networks with ease. This tool streamlines the process of deploying your ads."})],Ba);var Gd=Object.getOwnPropertyDescriptor,Wd=(e,i,t,n)=>{for(var r=n>1?void 0:n?Gd(i,t):i,a=e.length-1,o;a>=0;a--)(o=e[a])&&(r=o(r)||r);return r};let Fa=class extends ge{render(){return B`
      <section class="validate-page">
        <h1>Technical Requirements of Ad Networks</h1>
        <p>
          Playable ads must comply with the technical specifications set by
          various ad networks to ensure compatibility and optimal performance.
          Below are requirements and validation tools for major networks:
        </p>
        <ul class="ad-network-list">
          <li>
            <strong>Facebook Ads</strong> — <em>2MB (HTML), 5MB (ZIP)</em><br />
            <span>
              <a
                href="https://developers.facebook.com/tools/playable-preview/"
                target="_blank"
                >Playable Preview</a
              >
              <small
                >(public tool does not test ZIPs; use Ads Manager for full
                validation)</small
              ></span
            >
            <br />
            <small>
              <strong>Testing:</strong> Use the Facebook Playable Preview tool. Drag your file in and check for errors. All specification items must be green before uploading to Ads Manager.
            </small>
          </li>
          <li>
            <strong>Google Adwords</strong> — <em>5MB (ZIP)</em><br />
            <span>
              <a
                href="https://h5validator.appspot.com/dcm/asset"
                target="_blank"
                >H5 Validator</a
              ></span
            >
            <br />
            <small>
              <strong>Note:</strong> Zip file name length errors can be ignored. Use the correct compressed package and check for format issues.
            </small>
          </li>
          <li>
            <strong>Unity</strong> — <em>5MB (HTML)</em><br />
            <span>
              <a
                href="https://apps.apple.com/us/app/ad-testing/id1463016906"
                target="_blank"
                >iOS Validator</a
              >,
              <a
                href="https://play.google.com/store/apps/details?id=com.unity3d.auicreativetestapp&hl=en_US"
                target="_blank"
                >Android Validator</a
              ></span
            ><br />
            <small>
              <strong>Testing:</strong> Use the Unity test app, paste your playable ad URL, and check for issues in the Creative report. App store links must use the <code>apps.apple.com/</code> domain for iOS.
            </small>
          </li>
          <li>
            <strong>AppLovin</strong> — <em>5MB (HTML)</em><br />
            <span>
              <a
                href="https://p.applov.in/playablePreview?create=1&qr=1"
                target="_blank"
                >Web Validator</a
              >,
              <a
                href="https://apps.apple.com/us/app/playable-preview/id6468529760"
                target="_blank"
                >iOS App</a
              >,
              <a
                href="https://install.appcenter.ms/orgs/iosdeveloper-dbmy/apps/android-playable-preview/distribution_groups/all-users-of-android-playable-preview"
                target="_blank"
                >Android App</a
              ></span
            >
            <br />
            <small>
              <strong>Testing:</strong> Use the Applovin preview tool. Contact Applovin for permission if using external requests (analytics), or your playable may be rejected.
            </small>
          </li>
          <li>
            <strong>IronSource</strong> — <em>5MB (HTML)</em><br />
            <span>Validation: Only in Ads Manager</span><br />
            <small>
              <strong>Testing:</strong> The ironSource test tool is deprecated. Submit your build for review in the ironSource dashboard. See the <a href="https://developers.is.com/ironsource-mobile/general/html-upload/" target="_blank">official guide</a>.
            </small>
            <br />
            <small>From 2025, accepts Unity builds in MRAID (not DAPI).</small>
          </li>
          <li>
            <strong>Moloco</strong> — <em>5MB (HTML)</em><br />
            <span>No validation tool available</span><br />
            <small>
              Uses Facebook's format and API. Code must NOT contain <code>XMLHttpRequest</code> (remove from PixiJS/Howler if present).
            </small>
          </li>
          <li>
            <strong>TikTok</strong> — <em>5MB (ZIP)</em><br />
            <span>
              <a
                href="https://ads.tiktok.com/help/article/playable-ads"
                target="_blank"
                >Playable Ads Help</a
              >,
              <a
                href="https://bytedance.feishu.cn/docs/doccnSSJ2uAY8EYPCAtTuoX3u9"
                target="_blank"
                >Feishu Doc 1</a
              >,
              <a
                href="https://bytedance.us.feishu.cn/docs/doccnmdeT1KStyS0QdVExnVAy8v"
                target="_blank"
                >Feishu Doc 2</a
              ></span
            ><br />
            <small>
              <strong>Note:</strong> No official testing tool. <code>config.json</code> must be present in the root directory and include orientation (0-responsive, 1-portrait, 2-landscape) and language codes in <code>playable_languages</code> array.
            </small>
          </li>
          <li>
            <strong>Mintegral</strong> — <em>5MB (ZIP)</em><br />
            <span>
              <a
                href="https://www.mindworks-creative.com/review/"
                target="_blank"
                >Mindworks Review</a
              ></span
            ><br />
            <small>
              <strong>Testing:</strong> Use the Mindworks Review tool. Drag in your zip archive and check for errors. Archive name must match the main folder/file inside.
            </small>
          </li>
          <li>
            <strong>Vungle</strong> — <em>5MB (ZIP)</em><br />
            <span>
              <a
                href="https://support.vungle.com/hc/en-us/articles/4908908675355-Test-Your-Playable-Asset-With-Our-Creative-Verifier"
                target="_blank"
                >Creative Verifier</a
              ></span
            ><br />
            <small>
              <strong>Testing:</strong> See Vungle's official guide for step-by-step testing instructions.
            </small>
          </li>
          <li>
            <strong>WeChat MiniGame</strong> — <em>Special requirements</em><br />
            <span>No public validator tool</span><br />
            <small>
              <strong>Notes:</strong> No CTA button or app store redirect needed; after trial ends, user is sent to End Card. "Rigid Body" and "Video" assets are not supported. Only some templates support WeChat MiniGame export (look for WeChat logo). See <a href="https://doc.playturbo.com/other-tutorials/documentation-for-project-deployment/playable-upload-specifications-for-networks" target="_blank">Playturbo docs</a> for details.
            </small>
          </li>
        </ul>
        <h2>General Requirements</h2>
        <ul class="general-reqs">
          <li>
            <strong>File Size Limits:</strong> Most networks enforce a maximum
            file size (e.g., 2MB or 5MB) for fast loading.
          </li>
          <li>
            <strong>Supported Formats:</strong> HTML5 is the standard, but some
            networks may have additional format preferences.
          </li>
          <li>
            <strong>Loading Time:</strong> Ads should load quickly, typically
            within 1–3 seconds.
          </li>
          <li>
            <strong>Responsive Design:</strong> Playable ads should adapt to
            different screen sizes and orientations.
          </li>
          <li>
            <strong>API Integrations:</strong> Some networks require integration
            with their SDKs or specific event tracking APIs.
          </li>
          <li>
            <strong>Asset Optimization:</strong> Use compressed images, minified
            scripts, and efficient code to reduce load times.
          </li>
          <li>
            <strong>Best Practices:</strong> 
            <ul>
              <li>Unzip downloaded archives and use the inner zip for upload.</li>
              <li>Main HTML file should be named <code>index</code> and placed in the root directory.</li>
              <li>Check for channel-specific restrictions (e.g., WeChat MiniGame does not support video or rigid body assets).</li>
              <li>For TikTok, ensure <code>config.json</code> is present and correctly formatted.</li>
              <li>Always test your playable in the official validator or preview tool before submitting.</li>
            </ul>
          </li>
        </ul>
        <h2>References & Further Reading</h2>
        <ul>
          <li>
            <a href="https://doc.playturbo.com/other-tutorials/documentation-for-project-deployment/playable-upload-specifications-for-networks" target="_blank">
              Playturbo: Playable Upload Specifications for Networks
            </a>
          </li>
        </ul>
        <h2>Other Ad Networks</h2>
        <ul class="other-networks">
          <li>
            <strong>AdColony</strong>: 2MB, Single HTML file, <a href="https://www.adcolony.com/" target="_blank">AdColony</a> (iOS, Android)
          </li>
          <li>
            <strong>Liftoff</strong>: 5MB, Zip file with resources, <a href="https://liftoff.io/" target="_blank">Liftoff</a>
          </li>
          <li>
            <strong>Inmobi</strong>: 5MB, Offline script must be deployed to CDN and HTML paths updated, <a href="https://www.inmobi.com/" target="_blank">Inmobi</a>
          </li>
          <li>
            <strong>Tapjoy</strong>: 1.9MB, <a href="https://www.tapjoy.com/" target="_blank">Tapjoy</a>
          </li>
          <li>
            <strong>Pangle</strong>: 5MB, <a href="https://www.pangleglobal.com/" target="_blank">Pangle</a>
          </li>
          <li>
            <strong>myTarget</strong>: 2MB, <a href="https://target.my.com/" target="_blank">myTarget</a>
          </li>
          <li>
            <strong>Kwai</strong>: 5MB, <a href="https://www.kwai.com/" target="_blank">Kwai</a>
          </li>
          <li>
            <strong>i-mobile</strong>: 6MB, <a href="https://www.i-mobile.co.jp/" target="_blank">i-mobile</a>
          </li>
          <li>
            <strong>Snapchat</strong>: 5MB, <a href="https://forbusiness.snapchat.com/" target="_blank">Snapchat</a>
          </li>
          <li>
            <strong>Smadex</strong>: 5MB, <a href="https://www.smadex.com/" target="_blank">Smadex</a>
          </li>
          <li>
            <strong>Chartboost</strong>: 3MB, <a href="https://www.chartboost.com/" target="_blank">Chartboost</a>
          </li>
          <li>
            <strong>Bigo</strong>: 5MB, <a href="https://www.bigo.sg/" target="_blank">Bigo</a>
          </li>
          <li>
            <strong>巨量引擎</strong>: 3MB, <a href="https://www.oceanengine.com/" target="_blank">Ocean Engine</a>
          </li>
          <li>
            <strong>快手</strong>: 3MB, <a href="https://www.kuaishou.com/" target="_blank">Kuaishou</a>
          </li>
          <li>
            <strong>Tencent AMS</strong>: 3MB, <a href="https://e.qq.com/" target="_blank">Tencent AMS</a>
          </li>
          <li>
            <strong>Tencent Ads</strong>: 3MB, Zip file with resources, <a href="https://ad.qq.com/" target="_blank">Tencent Ads</a>
          </li>
          <li>
            <strong>WeChat MiniGame</strong>: 15MB, Zip with resources, <a href="https://developers.weixin.qq.com/minigame/" target="_blank">WeChat MiniGame Docs</a>
          </li>
        </ul>
      </section>
    `}};Fa=Wd([we("validate-page"),rt("/validate",{title:"Ad Network Technical Requirements",description:"A comprehensive guide to the technical requirements for major ad networks, including file size limits and validation tools."})],Fa);/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Yd=e=>e??pe;var Kd=Object.getOwnPropertyDescriptor,Xd=(e,i,t,n)=>{for(var r=n>1?void 0:n?Kd(i,t):i,a=e.length-1,o;a>=0;a--)(o=e[a])&&(r=o(r)||r);return r};let Na=class extends ge{constructor(){super(...arguments),this.menuItems=[{label:"Home",path:"/",disabled:!1},{label:"CTA SDK",path:"/cta-sdk",disabled:!1},{label:"Publish",path:"/publish",disabled:!1},{label:"Validate",path:"/validate",disabled:!1},{label:"Compress assets",path:"/compress-assets",disabled:!1},{label:"Base64 Converter",path:"/base64",disabled:!1},{label:"Imba Packer",path:"/imba-packer",disabled:!1},{label:"Preview",path:"/preview",disabled:!1}],this.handleHashChange=()=>{this.requestUpdate()}}get currentPath(){let e=window.location.hash?window.location.hash.substring(1):"";return e.startsWith("/")||(e="/"+e),e}connectedCallback(){super.connectedCallback(),window.addEventListener("hashchange",this.handleHashChange)}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("hashchange",this.handleHashChange)}render(){return B`
      <nav aria-label="Main menu">
        <ul>
          ${this.menuItems.map(e=>{const i=this.currentPath===e.path;return B`
              <li>
                <a
                  href=${Yd(e.disabled?void 0:`#${e.path.substring(1)}`)}
                  class="${i?"active":""} ${e.disabled?"disabled":""}"
                  tabindex="${e.disabled?-1:0}"
                  aria-disabled="${e.disabled}"
                  title=${e.disabled?"Coming soon":""}
                  ...=${i?{"aria-current":"page"}:{}}
                  @click=${e.disabled?t=>t.preventDefault():void 0}
                >
                  ${e.label}
                </a>
              </li>
            `})}
        </ul>
      </nav>
    `}};Na=Xd([we("nav-menu")],Na);var Jd=Object.defineProperty,Qd=Object.getOwnPropertyDescriptor,Gs=(e,i,t,n)=>{for(var r=n>1?void 0:n?Qd(i,t):i,a=e.length-1,o;a>=0;a--)(o=e[a])&&(r=(n?o(i,t,r):o(r))||r);return n&&r&&Jd(i,t,r),r};let Qr=class extends ge{constructor(){super(...arguments),this.versionService=new hn}async connectedCallback(){super.connectedCallback(),await this.loadVersion()}async loadVersion(){try{await this.versionService.initialize();const e=this.versionService.getCurrentVersion();this.currentVersion=e?.version||""}catch(e){console.warn("Failed to load version in site logo:",e),this.currentVersion=""}}render(){return B`
      <a href="${Xr.getBaseDir()}" class="site-logo-link">
        <img
          src="${Xr.buildFetchUrl("","small-logo.jpg")}"
          alt="Logo"
          class="site-logo-img"
        />
        <span class="site-logo-title">
          <div class="site-logo-subheader">Gritsenko</div>
          Playable Ads Tools
          ${this.currentVersion?B`<div class="site-logo-version">v${this.currentVersion}</div>`:""}
        </span>
      </a>
    `}};Gs([it()],Qr.prototype,"currentVersion",2);Qr=Gs([we("site-logo")],Qr);var ef=Object.defineProperty,tf=Object.getOwnPropertyDescriptor,Tn=(e,i,t,n)=>{for(var r=n>1?void 0:n?tf(i,t):i,a=e.length-1,o;a>=0;a--)(o=e[a])&&(r=(n?o(i,t,r):o(r))||r);return n&&r&&ef(i,t,r),r};let bi=class extends $o{constructor(){super(...arguments),this.sidebarOpen=!1,this.deferredPrompt=null}toggleSidebar(){this.sidebarOpen=!this.sidebarOpen}closeSidebar(){this.sidebarOpen=!1}connectedCallback(){super.connectedCallback(),window.addEventListener("beforeinstallprompt",e=>{const i=e;i.preventDefault(),this.deferredPrompt=i})}suggestPWAInstall(){this.deferredPrompt?(this.deferredPrompt.prompt(),this.deferredPrompt.userChoice.then(e=>{e.outcome==="accepted"?console.log("User accepted the install prompt"):console.log("User dismissed the install prompt"),this.deferredPrompt=null})):alert("The install prompt is not available. Please use the browser menu to install the app.")}render(){return B`
      <!-- Responsive header for mobile -->
      <header class="main-header">
        <site-logo></site-logo>
        <div class="hamburger" @click="${this.toggleSidebar}">
          <div class="hamburger-icon">
            <span></span>
            <span></span>
            <span></span>
          </div>
        </div>
      </header>

      <!-- Sidebar overlay for mobile -->
      <div class="sidebar-overlay${this.sidebarOpen?" open":""}" @click="${this.closeSidebar}"></div>
      <div class="layout">
        <aside class="sidebar${this.sidebarOpen?" open":""}">
          <site-logo class="sidebar-header"></site-logo>
          <nav class="menu">
            <nav-menu></nav-menu>
          </nav>
          <div style="margin-top:auto; text-align:left;">
            <a href="https://github.com/gritsenko/PlayableTools" target="_blank" rel="noopener" title="GitHub Repository" style="display:inline-flex;align-items:center;gap:0.5rem;color:var(--pico-muted-color);text-decoration:none;font-size:1rem;padding:0.5rem 0;">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" style="vertical-align:middle;"><path d="M12 2C6.477 2 2 6.484 2 12.021c0 4.428 2.865 8.184 6.839 9.525.5.092.682-.217.682-.483 0-.237-.009-.868-.013-1.703-2.782.605-3.369-1.342-3.369-1.342-.454-1.155-1.11-1.463-1.11-1.463-.908-.62.069-.608.069-.608 1.004.07 1.532 1.032 1.532 1.032.892 1.53 2.341 1.088 2.91.832.091-.647.35-1.088.636-1.339-2.221-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.254-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.025A9.564 9.564 0 0 1 12 6.844c.85.004 1.705.115 2.504.337 1.909-1.295 2.748-1.025 2.748-1.025.546 1.378.202 2.396.099 2.65.64.7 1.028 1.595 1.028 2.688 0 3.847-2.337 4.695-4.566 4.944.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.579.688.481C19.138 20.203 22 16.447 22 12.021 22 6.484 17.523 2 12 2Z"/></svg>
              <span>GitHub</span>
            </a>
        <a href="https://t.me/playable_html5" target="_blank" rel="noopener" title="Telegram Group" style="display:inline-flex;align-items:center;gap:0.5rem;color:var(--pico-muted-color);text-decoration:none;font-size:1rem;padding:0.5rem 0;">
          <svg width="24" height="24" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg" style="vertical-align:middle;">
            <circle cx="16" cy="16" r="14" fill="url(#paint0_linear_87_7225)"/>
            <path d="M22.9866 10.2088C23.1112 9.40332 22.3454 8.76755 21.6292 9.082L7.36482 15.3448C6.85123 15.5703 6.8888 16.3483 7.42147 16.5179L10.3631 17.4547C10.9246 17.6335 11.5325 17.541 12.0228 17.2023L18.655 12.6203C18.855 12.4821 19.073 12.7665 18.9021 12.9426L14.1281 17.8646C13.665 18.3421 13.7569 19.1512 14.314 19.5005L19.659 22.8523C20.2585 23.2282 21.0297 22.8506 21.1418 22.1261L22.9866 10.2088Z" fill="white"/>
            <defs>
              <linearGradient id="paint0_linear_87_7225" x1="16" y1="2" x2="16" y2="30" gradientUnits="userSpaceOnUse">
                <stop stop-color="#37BBFE"/>
                <stop offset="1" stop-color="#007DBB"/>
              </linearGradient>
            </defs>
          </svg>
          <span>Telegram</span>
        </a>
            <button @click="${this.suggestPWAInstall}" style="display:inline-flex;align-items:center;gap:0.5rem;color:var(--pico-muted-color);text-decoration:none;font-size:1rem;padding:0.5rem 0;border:none;background:none;cursor:pointer;">
              <img src="pwa.png" width="170" alt="PWA Badge" style="vertical-align:middle;"/>
            </button>
          </div>
        </aside>
        <main class="main">${this.body}</main>
      </div>
    `}};Tn([Ge({attribute:!1,type:Object})],bi.prototype,"body",2);Tn([Ge({type:Boolean})],bi.prototype,"sidebarOpen",2);bi=Tn([we("main-layout")],bi);var rf=Object.defineProperty,nf=Object.getOwnPropertyDescriptor,Ws=(e,i,t,n)=>{for(var r=n>1?void 0:n?nf(i,t):i,a=e.length-1,o;a>=0;a--)(o=e[a])&&(r=(n?o(i,t,r):o(r))||r);return n&&r&&rf(i,t,r),r};let en=class extends ge{constructor(){super(...arguments),this.versionService=new hn,this.updateAvailable=!1}async connectedCallback(){super.connectedCallback(),console.log("🔧 Initializing PlayableTools..."),await this.initializeVersionService()}disconnectedCallback(){super.disconnectedCallback(),this.versionService.destroy()}async initializeVersionService(){try{await this.versionService.initialize();const e=this.versionService.getCurrentVersion();e&&(console.log(`🚀 Playable Ads Tools v${e.version}`),console.log(`📅 Build time: ${new Date(e.buildTime).toLocaleString()}`),console.log(`🔧 Build hash: ${e.hash}`),console.log(`${this.versionService.isPWAMode()?"📱 PWA Mode":"🌐 Browser Mode"}`)),this.versionService.onUpdateAvailable(i=>{this.updateAvailable=i,i&&(console.log("🔄 New version available!"),this.showUpdateNotification())})}catch(e){console.warn("Failed to initialize version service:",e)}}showUpdateNotification(){this.requestUpdate(),requestAnimationFrame(()=>{const e=this.querySelector("update-notification");e?.show&&e.show()})}async handleReloadRequested(){try{await this.versionService.reloadWithCacheClear()}catch(e){console.error("Failed to reload app:",e),window.location.reload()}}render(){return B`
      <router-outlet .defaultLayout="${bi}"></router-outlet>
      ${this.updateAvailable?B`
        <update-notification @reload-requested=${this.handleReloadRequested}></update-notification>
      `:""}
    `}};Ws([it()],en.prototype,"updateAvailable",2);en=Ws([we("app-root")],en);export{zn as c,of as g};
